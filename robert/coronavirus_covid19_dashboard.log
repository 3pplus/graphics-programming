1                                                          The SAS System                               18:30 Sunday, April 12, 2020

NOTE: Unable to open SASUSER.REGSTRY. WORK.REGSTRY will be opened instead.
NOTE: All registry changes will be lost at the end of the session.

WARNING: Unable to copy SASUSER registry to WORK registry. Because of this, you will not see registry customizations during this 
         session.
NOTE: Unable to open SASUSER.PROFILE. WORK.PROFILE will be opened 
      instead.
NOTE: All profile changes will be lost at the end of the session.
NOTE: Copyright (c) 2016 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M6) 
      Licensed to SAS IT, Site 70068128.
NOTE: This session is executing on the X64_10PRO  platform.



NOTE: Analytical products:
      
      SAS/STAT 15.1
      SAS/ETS 15.1
      SAS/IML 15.1
      SAS/QC 15.1

WARNING: Your system is scheduled to expire on May 19, 2020, which is 
         37 days from now. The SAS System will no longer function on 
         or after that date. Please contact your SAS Installation 
         Representative to obtain your updated SAS Installation Data 
         (SID) file, which includes SETINIT information.
To locate the name of your SAS Installation Representative go to 
2                           The SAS System
                                           18:30 Sunday, April 12, 2020

http://support.sas.com/repfinder and provide your site number 70068128 
and company name as SAS IT. On the SAS REP list provided, locate the 
REP for operating system Windows.
NOTE: Additional host information:

 X64_10PRO WIN 10.0.18362  Workstation

NOTE: SAS initialization used:
      real time           0.19 seconds
      cpu time            0.14 seconds
      

NOTE: AUTOEXEC processing beginning; file is U:\autoexec.sas.


NOTE: AUTOEXEC processing completed.

1          %let name=coronavirus_covid19_dashboard;
2          filename odsout '.';
3          
4          /*
5          Imitation/variation of Johns Hopkins dashboard:
6          https://gisanddata.maps.arcgis.com/apps/opsdashboard/index.h
6        ! tml#/bda7594740fd40299423467b48e9ecf6
7          
8          https://github.com/CSSEGISandData/2019-nCoV/tree/master/time
8        ! _series
3                           The SAS System
                                           18:30 Sunday, April 12, 2020

9          https://github.com/CSSEGISandData/2019-nCoV/
10         
11         https://github.com/CSSEGISandData/COVID-19/tree/master/csse_
11       ! covid_19_data/csse_covid_19_time_series
12         https://github.com/CSSEGISandData/COVID-19/
13         */
14         
15         /*
16         Make a local copy/clone of the GitHub data.
17         gitfn_clone() needs an empty folder, therefore use a new
18         folder name each time, with the date & time in the name.
19         */
20         /*
21         %let
21       ! gitfolder=./github_clone_&sysdate9._%sysfunc(tranwrd(&systim
21       ! e,:,_));
22         %let gitfolder=./github_clone_17FEB2020;
23         */
24         
25         %let gitfolder=./github_clone_&sysdate9;
26         /*
27         data _null_;
28          rc =
28       ! gitfn_clone("https://github.com/CSSEGISandData/COVID-19/",
29            "&gitfolder");
30          put rc=;
31         run;
4                           The SAS System
                                           18:30 Sunday, April 12, 2020

32         */
33         
34         /*
35         John D. accesses the data like this:
36         https://raw.githubusercontent.com/CSSEGISandData/COVID-19/ma
36       ! ster/csse_covid_19_data/csse_covid_19_time_series/time_serie
36       ! s_19-covid-Confirmed.csv
37         */
38         
39         /* ------------------ Import the confirmed cases data
39       ! ---------------------- */
40         
41         /*
42         filename confdata
42       ! "./&gitfolder/time_series/time_series_2019-ncov-Confirmed.cs
42       ! v";
43         filename confdata
43       ! "./&gitfolder/csse_covid_19_data/csse_covid_19_time_series/t
43       ! ime_series_19-covid-Confirmed.csv";
44         */
45         filename confdata
45       ! "./&gitfolder/csse_covid_19_data/csse_covid_19_time_series/t
45       ! ime_series_covid19_confirmed_global.csv";
46         proc import datafile=confdata
WARNING: The Base SAS Software product with which IMPORT is associated 
         will be expiring soon, and is currently in warning mode to 
         indicate this upcoming expiration. Please run PROC SETINIT to 
5                           The SAS System
                                           18:30 Sunday, April 12, 2020

         obtain more information on your warning period.
47          out=confirmed_data dbms=csv replace;
48         getnames=yes;
49         guessingrows=all;
50         run;

51          /**********************************************************
51       ! ************
52          *   PRODUCT:   SAS
53          *   VERSION:   9.4
54          *   CREATOR:   External File Interface
55          *   DATE:      12APR20
56          *   DESC:      Generated SAS Datastep Code
57          *   TEMPLATE SOURCE:  (None Specified.)
58          ***********************************************************
58       ! ************/
59             data WORK.CONFIRMED_DATA    ;
60             %let _EFIERR_ = 0; /* set the ERROR detection macro
60       ! variable */
61             infile CONFDATA delimiter = ',' MISSOVER DSD lrecl=32767
61       !  firstobs=2 ;
62                informat Province_State $34. ;
63                informat Country_Region $32. ;
64                informat Lat best32. ;
65                informat Long best32. ;
66                informat _1_22_20 best32. ;
67                informat _1_23_20 best32. ;
6                           The SAS System
                                           18:30 Sunday, April 12, 2020

68                informat _1_24_20 best32. ;
69                informat _1_25_20 best32. ;
70                informat _1_26_20 best32. ;
71                informat _1_27_20 best32. ;
72                informat _1_28_20 best32. ;
73                informat _1_29_20 best32. ;
74                informat _1_30_20 best32. ;
75                informat _1_31_20 best32. ;
76                informat _2_1_20 best32. ;
77                informat _2_2_20 best32. ;
78                informat _2_3_20 best32. ;
79                informat _2_4_20 best32. ;
80                informat _2_5_20 best32. ;
81                informat _2_6_20 best32. ;
82                informat _2_7_20 best32. ;
83                informat _2_8_20 best32. ;
84                informat _2_9_20 best32. ;
85                informat _2_10_20 best32. ;
86                informat _2_11_20 best32. ;
87                informat _2_12_20 best32. ;
88                informat _2_13_20 best32. ;
89                informat _2_14_20 best32. ;
90                informat _2_15_20 best32. ;
91                informat _2_16_20 best32. ;
92                informat _2_17_20 best32. ;
93                informat _2_18_20 best32. ;
94                informat _2_19_20 best32. ;
7                           The SAS System
                                           18:30 Sunday, April 12, 2020

95                informat _2_20_20 best32. ;
96                informat _2_21_20 best32. ;
97                informat _2_22_20 best32. ;
98                informat _2_23_20 best32. ;
99                informat _2_24_20 best32. ;
100               informat _2_25_20 best32. ;
101               informat _2_26_20 best32. ;
102               informat _2_27_20 best32. ;
103               informat _2_28_20 best32. ;
104               informat _2_29_20 best32. ;
105               informat _3_1_20 best32. ;
106               informat _3_2_20 best32. ;
107               informat _3_3_20 best32. ;
108               informat _3_4_20 best32. ;
109               informat _3_5_20 best32. ;
110               informat _3_6_20 best32. ;
111               informat _3_7_20 best32. ;
112               informat _3_8_20 best32. ;
113               informat _3_9_20 best32. ;
114               informat _3_10_20 best32. ;
115               informat _3_11_20 best32. ;
116               informat _3_12_20 best32. ;
117               informat _3_13_20 best32. ;
118               informat _3_14_20 best32. ;
119               informat _3_15_20 best32. ;
120               informat _3_16_20 best32. ;
121               informat _3_17_20 best32. ;
8                           The SAS System
                                           18:30 Sunday, April 12, 2020

122               informat _3_18_20 best32. ;
123               informat _3_19_20 best32. ;
124               informat _3_20_20 best32. ;
125               informat _3_21_20 best32. ;
126               informat _3_22_20 best32. ;
127               informat _3_23_20 best32. ;
128               informat _3_24_20 best32. ;
129               informat _3_25_20 best32. ;
130               informat _3_26_20 best32. ;
131               informat _3_27_20 best32. ;
132               informat _3_28_20 best32. ;
133               informat _3_29_20 best32. ;
134               informat _3_30_20 best32. ;
135               informat _3_31_20 best32. ;
136               informat _4_1_20 best32. ;
137               informat _4_2_20 best32. ;
138               informat _4_3_20 best32. ;
139               informat _4_4_20 best32. ;
140               informat _4_5_20 best32. ;
141               informat _4_6_20 best32. ;
142               informat _4_7_20 best32. ;
143               informat _4_8_20 best32. ;
144               informat _4_9_20 best32. ;
145               informat _4_10_20 best32. ;
146               informat _4_11_20 best32. ;
147               format Province_State $34. ;
148               format Country_Region $32. ;
9                           The SAS System
                                           18:30 Sunday, April 12, 2020

149               format Lat best12. ;
150               format Long best12. ;
151               format _1_22_20 best12. ;
152               format _1_23_20 best12. ;
153               format _1_24_20 best12. ;
154               format _1_25_20 best12. ;
155               format _1_26_20 best12. ;
156               format _1_27_20 best12. ;
157               format _1_28_20 best12. ;
158               format _1_29_20 best12. ;
159               format _1_30_20 best12. ;
160               format _1_31_20 best12. ;
161               format _2_1_20 best12. ;
162               format _2_2_20 best12. ;
163               format _2_3_20 best12. ;
164               format _2_4_20 best12. ;
165               format _2_5_20 best12. ;
166               format _2_6_20 best12. ;
167               format _2_7_20 best12. ;
168               format _2_8_20 best12. ;
169               format _2_9_20 best12. ;
170               format _2_10_20 best12. ;
171               format _2_11_20 best12. ;
172               format _2_12_20 best12. ;
173               format _2_13_20 best12. ;
174               format _2_14_20 best12. ;
175               format _2_15_20 best12. ;
10                          The SAS System
                                           18:30 Sunday, April 12, 2020

176               format _2_16_20 best12. ;
177               format _2_17_20 best12. ;
178               format _2_18_20 best12. ;
179               format _2_19_20 best12. ;
180               format _2_20_20 best12. ;
181               format _2_21_20 best12. ;
182               format _2_22_20 best12. ;
183               format _2_23_20 best12. ;
184               format _2_24_20 best12. ;
185               format _2_25_20 best12. ;
186               format _2_26_20 best12. ;
187               format _2_27_20 best12. ;
188               format _2_28_20 best12. ;
189               format _2_29_20 best12. ;
190               format _3_1_20 best12. ;
191               format _3_2_20 best12. ;
192               format _3_3_20 best12. ;
193               format _3_4_20 best12. ;
194               format _3_5_20 best12. ;
195               format _3_6_20 best12. ;
196               format _3_7_20 best12. ;
197               format _3_8_20 best12. ;
198               format _3_9_20 best12. ;
199               format _3_10_20 best12. ;
200               format _3_11_20 best12. ;
201               format _3_12_20 best12. ;
202               format _3_13_20 best12. ;
11                          The SAS System
                                           18:30 Sunday, April 12, 2020

203               format _3_14_20 best12. ;
204               format _3_15_20 best12. ;
205               format _3_16_20 best12. ;
206               format _3_17_20 best12. ;
207               format _3_18_20 best12. ;
208               format _3_19_20 best12. ;
209               format _3_20_20 best12. ;
210               format _3_21_20 best12. ;
211               format _3_22_20 best12. ;
212               format _3_23_20 best12. ;
213               format _3_24_20 best12. ;
214               format _3_25_20 best12. ;
215               format _3_26_20 best12. ;
216               format _3_27_20 best12. ;
217               format _3_28_20 best12. ;
218               format _3_29_20 best12. ;
219               format _3_30_20 best12. ;
220               format _3_31_20 best12. ;
221               format _4_1_20 best12. ;
222               format _4_2_20 best12. ;
223               format _4_3_20 best12. ;
224               format _4_4_20 best12. ;
225               format _4_5_20 best12. ;
226               format _4_6_20 best12. ;
227               format _4_7_20 best12. ;
228               format _4_8_20 best12. ;
229               format _4_9_20 best12. ;
12                          The SAS System
                                           18:30 Sunday, April 12, 2020

230               format _4_10_20 best12. ;
231               format _4_11_20 best12. ;
232            input
233                        Province_State  $
234                        Country_Region  $
235                        Lat
236                        Long
237                        _1_22_20
238                        _1_23_20
239                        _1_24_20
240                        _1_25_20
241                        _1_26_20
242                        _1_27_20
243                        _1_28_20
244                        _1_29_20
245                        _1_30_20
246                        _1_31_20
247                        _2_1_20
248                        _2_2_20
249                        _2_3_20
250                        _2_4_20
251                        _2_5_20
252                        _2_6_20
253                        _2_7_20
254                        _2_8_20
255                        _2_9_20
256                        _2_10_20
13                          The SAS System
                                           18:30 Sunday, April 12, 2020

257                        _2_11_20
258                        _2_12_20
259                        _2_13_20
260                        _2_14_20
261                        _2_15_20
262                        _2_16_20
263                        _2_17_20
264                        _2_18_20
265                        _2_19_20
266                        _2_20_20
267                        _2_21_20
268                        _2_22_20
269                        _2_23_20
270                        _2_24_20
271                        _2_25_20
272                        _2_26_20
273                        _2_27_20
274                        _2_28_20
275                        _2_29_20
276                        _3_1_20
277                        _3_2_20
278                        _3_3_20
279                        _3_4_20
280                        _3_5_20
281                        _3_6_20
282                        _3_7_20
283                        _3_8_20
14                          The SAS System
                                           18:30 Sunday, April 12, 2020

284                        _3_9_20
285                        _3_10_20
286                        _3_11_20
287                        _3_12_20
288                        _3_13_20
289                        _3_14_20
290                        _3_15_20
291                        _3_16_20
292                        _3_17_20
293                        _3_18_20
294                        _3_19_20
295                        _3_20_20
296                        _3_21_20
297                        _3_22_20
298                        _3_23_20
299                        _3_24_20
300                        _3_25_20
301                        _3_26_20
302                        _3_27_20
303                        _3_28_20
304                        _3_29_20
305                        _3_30_20
306                        _3_31_20
307                        _4_1_20
308                        _4_2_20
309                        _4_3_20
310                        _4_4_20
15                          The SAS System
                                           18:30 Sunday, April 12, 2020

311                        _4_5_20
312                        _4_6_20
313                        _4_7_20
314                        _4_8_20
315                        _4_9_20
316                        _4_10_20
317                        _4_11_20
318            ;
319            if _ERROR_ then call symputx('_EFIERR_',1);  /* set
319      ! ERROR detection macro variable */
320            run;

NOTE: The infile CONFDATA is:
      
      Filename=U:\web\democd103\.\github_clone_12APR2020\csse_covid_19_
      data\csse_covid_19_time_series\time_series_covid19_confirmed_glob
      al.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=66487,
      Last Modified=12Apr2020:18:24:51,
      Create Time=12Apr2020:18:24:51

NOTE: 264 records were read from the infile CONFDATA.
      The minimum record length was 181.
      The maximum record length was 499.
NOTE: The data set WORK.CONFIRMED_DATA has 264 observations and 85 
      variables.
NOTE: DATA statement used (Total process time):
16                          The SAS System
                                           18:30 Sunday, April 12, 2020

      real time           0.02 seconds
      cpu time            0.00 seconds
      

264 rows created in WORK.CONFIRMED_DATA from CONFDATA.
  
  
  
NOTE: WORK.CONFIRMED_DATA data set was successfully created.
NOTE: The data set WORK.CONFIRMED_DATA has 264 observations and 85 
      variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.68 seconds
      cpu time            0.39 seconds
      

321        
322        /* Needed, because of
322      ! https://github.com/CSSEGISandData/COVID-19/issues/559 */
323        /* The state summary has no comma in the province_state
323      ! variable - don't output those lines, or you'll double-count)
323      !  */
324        /*
325        data confirmed_data; set confirmed_data;
326        if country_region^='US' or (country_region='US' and
326      ! (index(province_state,',')^=0 or province_state in ('Diamond
326      !  Princess' 'Grand Princess')))  then output;
17                          The SAS System
                                           18:30 Sunday, April 12, 2020

327        run;
328        */
329        
330        proc transpose data=confirmed_data out=confirmed_data
330      ! (rename=(_name_=datestring col1=confirmed));
331        by Province_State Country_Region Lat Long notsorted;
332        run;

NOTE: There were 264 observations read from the data set 
      WORK.CONFIRMED_DATA.
NOTE: The data set WORK.CONFIRMED_DATA has 21384 observations and 6 
      variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

333        
334        /* The date/timestamp is in a string - parse it apart, and
334      ! create a real date variable */
335        data confirmed_data (drop = month day year datestring);
336         set confirmed_data;
337        Country_Region=trim(left(Country_Region));
338        if province_state='Curacao' then Country_Region='Curacao';
339        if province_state='Greenland' then
339      ! Country_Region='Greenland';
340        if province_state='Faroe Islands' then Country_Region='Faroe
18                          The SAS System
                                           18:30 Sunday, April 12, 2020

340      !  Islands';
341        if province_state='Aruba' then Country_Region='Aruba';
342        if province_state='Sint Maarten' then Country_Region='Sint
342      ! Maarten';
343        if province_state='Bonaire, Sint Eustatius and Saba' then
343      ! Country_Region='Bonaire, Sint Eustatius and Saba';
344        if country_region='United Arab Emirates' then
344      ! Country_Region='UAE';
345        if country_region='Iran (Islamic Republic of)' then
345      ! country_region='Iran';
346        month=.; month=scan(datestring,1,'_');
347        day=.; day=scan(datestring,2,'_');
348        year=.; year=2000+scan(datestring,3,'_');
349        if confirmed=0 then confirmed=.;
350        format snapshot date9.;
351        snapshot=mdy(month,day,year);
352        run;

NOTE: Character values have been converted to numeric 
      values at the places given by: (Line):(Column).
      346:16   347:12   348:19   
NOTE: There were 21384 observations read from the data set 
      WORK.CONFIRMED_DATA.
NOTE: The data set WORK.CONFIRMED_DATA has 21384 observations and 6 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
19                          The SAS System
                                           18:30 Sunday, April 12, 2020

      cpu time            0.00 seconds
      

353        /*
354        Create a table with just the latest date/timestamp.
355        You'll use this latest data in all but the timeseries plot.
356        */
357        proc sql noprint;
358        create table latest_confirmed as
359        select unique *
360        from confirmed_data
361        having snapshot=max(snapshot);
NOTE: The query requires remerging summary statistics back with the 
      original data.
NOTE: Table WORK.LATEST_CONFIRMED created, with 264 rows and 6 columns.

362        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

362      !       run;
363        
364        /* Create macro variables with the data & time, to use in
364      ! the title */
365        proc sql noprint;
20                          The SAS System
                                           18:30 Sunday, April 12, 2020

366        select unique(snapshot) format=nldate20. into :datestr
366      ! separated by ' ' from latest_confirmed;
367        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

367      !       run;
368        
369        /* save a copy of the dataset, to use in other programs */
370        libname robsdata '.';
NOTE: Libref ROBSDATA was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: U:\web\democd103
371        data robsdata.confirmed_data; set confirmed_data;
372        run;

NOTE: There were 21384 observations read from the data set 
      WORK.CONFIRMED_DATA.
NOTE: The data set ROBSDATA.CONFIRMED_DATA has 21384 observations and 
      6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.21 seconds
      cpu time            0.06 seconds
      

21                          The SAS System
                                           18:30 Sunday, April 12, 2020

373        
374        /* ------------------ Import the deaths data
374      ! ---------------------- */
375        
376        /*
377        filename deatdata
377      ! "./&gitfolder/time_series/time_series_2019-ncov-Deaths.csv";
378        filename deatdata
378      ! "./&gitfolder/csse_covid_19_data/csse_covid_19_time_series/t
378      ! ime_series_19-covid-Deaths.csv";
379        */
380        filename deatdata
380      ! "./&gitfolder/csse_covid_19_data/csse_covid_19_time_series/t
380      ! ime_series_covid19_deaths_global.csv";
381        proc import datafile=deatdata
382         out=death_data dbms=csv replace;
383        getnames=yes;
384        guessingrows=all;
385        run;

386         /**********************************************************
386      ! ************
387         *   PRODUCT:   SAS
388         *   VERSION:   9.4
389         *   CREATOR:   External File Interface
390         *   DATE:      12APR20
391         *   DESC:      Generated SAS Datastep Code
22                          The SAS System
                                           18:30 Sunday, April 12, 2020

392         *   TEMPLATE SOURCE:  (None Specified.)
393         ***********************************************************
393      ! ************/
394            data WORK.DEATH_DATA    ;
395            %let _EFIERR_ = 0; /* set the ERROR detection macro
395      ! variable */
396            infile DEATDATA delimiter = ',' MISSOVER DSD lrecl=32767
396      !  firstobs=2 ;
397               informat Province_State $34. ;
398               informat Country_Region $32. ;
399               informat Lat best32. ;
400               informat Long best32. ;
401               informat _1_22_20 best32. ;
402               informat _1_23_20 best32. ;
403               informat _1_24_20 best32. ;
404               informat _1_25_20 best32. ;
405               informat _1_26_20 best32. ;
406               informat _1_27_20 best32. ;
407               informat _1_28_20 best32. ;
408               informat _1_29_20 best32. ;
409               informat _1_30_20 best32. ;
410               informat _1_31_20 best32. ;
411               informat _2_1_20 best32. ;
412               informat _2_2_20 best32. ;
413               informat _2_3_20 best32. ;
414               informat _2_4_20 best32. ;
415               informat _2_5_20 best32. ;
23                          The SAS System
                                           18:30 Sunday, April 12, 2020

416               informat _2_6_20 best32. ;
417               informat _2_7_20 best32. ;
418               informat _2_8_20 best32. ;
419               informat _2_9_20 best32. ;
420               informat _2_10_20 best32. ;
421               informat _2_11_20 best32. ;
422               informat _2_12_20 best32. ;
423               informat _2_13_20 best32. ;
424               informat _2_14_20 best32. ;
425               informat _2_15_20 best32. ;
426               informat _2_16_20 best32. ;
427               informat _2_17_20 best32. ;
428               informat _2_18_20 best32. ;
429               informat _2_19_20 best32. ;
430               informat _2_20_20 best32. ;
431               informat _2_21_20 best32. ;
432               informat _2_22_20 best32. ;
433               informat _2_23_20 best32. ;
434               informat _2_24_20 best32. ;
435               informat _2_25_20 best32. ;
436               informat _2_26_20 best32. ;
437               informat _2_27_20 best32. ;
438               informat _2_28_20 best32. ;
439               informat _2_29_20 best32. ;
440               informat _3_1_20 best32. ;
441               informat _3_2_20 best32. ;
442               informat _3_3_20 best32. ;
24                          The SAS System
                                           18:30 Sunday, April 12, 2020

443               informat _3_4_20 best32. ;
444               informat _3_5_20 best32. ;
445               informat _3_6_20 best32. ;
446               informat _3_7_20 best32. ;
447               informat _3_8_20 best32. ;
448               informat _3_9_20 best32. ;
449               informat _3_10_20 best32. ;
450               informat _3_11_20 best32. ;
451               informat _3_12_20 best32. ;
452               informat _3_13_20 best32. ;
453               informat _3_14_20 best32. ;
454               informat _3_15_20 best32. ;
455               informat _3_16_20 best32. ;
456               informat _3_17_20 best32. ;
457               informat _3_18_20 best32. ;
458               informat _3_19_20 best32. ;
459               informat _3_20_20 best32. ;
460               informat _3_21_20 best32. ;
461               informat _3_22_20 best32. ;
462               informat _3_23_20 best32. ;
463               informat _3_24_20 best32. ;
464               informat _3_25_20 best32. ;
465               informat _3_26_20 best32. ;
466               informat _3_27_20 best32. ;
467               informat _3_28_20 best32. ;
468               informat _3_29_20 best32. ;
469               informat _3_30_20 best32. ;
25                          The SAS System
                                           18:30 Sunday, April 12, 2020

470               informat _3_31_20 best32. ;
471               informat _4_1_20 best32. ;
472               informat _4_2_20 best32. ;
473               informat _4_3_20 best32. ;
474               informat _4_4_20 best32. ;
475               informat _4_5_20 best32. ;
476               informat _4_6_20 best32. ;
477               informat _4_7_20 best32. ;
478               informat _4_8_20 best32. ;
479               informat _4_9_20 best32. ;
480               informat _4_10_20 best32. ;
481               informat _4_11_20 best32. ;
482               format Province_State $34. ;
483               format Country_Region $32. ;
484               format Lat best12. ;
485               format Long best12. ;
486               format _1_22_20 best12. ;
487               format _1_23_20 best12. ;
488               format _1_24_20 best12. ;
489               format _1_25_20 best12. ;
490               format _1_26_20 best12. ;
491               format _1_27_20 best12. ;
492               format _1_28_20 best12. ;
493               format _1_29_20 best12. ;
494               format _1_30_20 best12. ;
495               format _1_31_20 best12. ;
496               format _2_1_20 best12. ;
26                          The SAS System
                                           18:30 Sunday, April 12, 2020

497               format _2_2_20 best12. ;
498               format _2_3_20 best12. ;
499               format _2_4_20 best12. ;
500               format _2_5_20 best12. ;
501               format _2_6_20 best12. ;
502               format _2_7_20 best12. ;
503               format _2_8_20 best12. ;
504               format _2_9_20 best12. ;
505               format _2_10_20 best12. ;
506               format _2_11_20 best12. ;
507               format _2_12_20 best12. ;
508               format _2_13_20 best12. ;
509               format _2_14_20 best12. ;
510               format _2_15_20 best12. ;
511               format _2_16_20 best12. ;
512               format _2_17_20 best12. ;
513               format _2_18_20 best12. ;
514               format _2_19_20 best12. ;
515               format _2_20_20 best12. ;
516               format _2_21_20 best12. ;
517               format _2_22_20 best12. ;
518               format _2_23_20 best12. ;
519               format _2_24_20 best12. ;
520               format _2_25_20 best12. ;
521               format _2_26_20 best12. ;
522               format _2_27_20 best12. ;
523               format _2_28_20 best12. ;
27                          The SAS System
                                           18:30 Sunday, April 12, 2020

524               format _2_29_20 best12. ;
525               format _3_1_20 best12. ;
526               format _3_2_20 best12. ;
527               format _3_3_20 best12. ;
528               format _3_4_20 best12. ;
529               format _3_5_20 best12. ;
530               format _3_6_20 best12. ;
531               format _3_7_20 best12. ;
532               format _3_8_20 best12. ;
533               format _3_9_20 best12. ;
534               format _3_10_20 best12. ;
535               format _3_11_20 best12. ;
536               format _3_12_20 best12. ;
537               format _3_13_20 best12. ;
538               format _3_14_20 best12. ;
539               format _3_15_20 best12. ;
540               format _3_16_20 best12. ;
541               format _3_17_20 best12. ;
542               format _3_18_20 best12. ;
543               format _3_19_20 best12. ;
544               format _3_20_20 best12. ;
545               format _3_21_20 best12. ;
546               format _3_22_20 best12. ;
547               format _3_23_20 best12. ;
548               format _3_24_20 best12. ;
549               format _3_25_20 best12. ;
550               format _3_26_20 best12. ;
28                          The SAS System
                                           18:30 Sunday, April 12, 2020

551               format _3_27_20 best12. ;
552               format _3_28_20 best12. ;
553               format _3_29_20 best12. ;
554               format _3_30_20 best12. ;
555               format _3_31_20 best12. ;
556               format _4_1_20 best12. ;
557               format _4_2_20 best12. ;
558               format _4_3_20 best12. ;
559               format _4_4_20 best12. ;
560               format _4_5_20 best12. ;
561               format _4_6_20 best12. ;
562               format _4_7_20 best12. ;
563               format _4_8_20 best12. ;
564               format _4_9_20 best12. ;
565               format _4_10_20 best12. ;
566               format _4_11_20 best12. ;
567            input
568                        Province_State  $
569                        Country_Region  $
570                        Lat
571                        Long
572                        _1_22_20
573                        _1_23_20
574                        _1_24_20
575                        _1_25_20
576                        _1_26_20
577                        _1_27_20
29                          The SAS System
                                           18:30 Sunday, April 12, 2020

578                        _1_28_20
579                        _1_29_20
580                        _1_30_20
581                        _1_31_20
582                        _2_1_20
583                        _2_2_20
584                        _2_3_20
585                        _2_4_20
586                        _2_5_20
587                        _2_6_20
588                        _2_7_20
589                        _2_8_20
590                        _2_9_20
591                        _2_10_20
592                        _2_11_20
593                        _2_12_20
594                        _2_13_20
595                        _2_14_20
596                        _2_15_20
597                        _2_16_20
598                        _2_17_20
599                        _2_18_20
600                        _2_19_20
601                        _2_20_20
602                        _2_21_20
603                        _2_22_20
604                        _2_23_20
30                          The SAS System
                                           18:30 Sunday, April 12, 2020

605                        _2_24_20
606                        _2_25_20
607                        _2_26_20
608                        _2_27_20
609                        _2_28_20
610                        _2_29_20
611                        _3_1_20
612                        _3_2_20
613                        _3_3_20
614                        _3_4_20
615                        _3_5_20
616                        _3_6_20
617                        _3_7_20
618                        _3_8_20
619                        _3_9_20
620                        _3_10_20
621                        _3_11_20
622                        _3_12_20
623                        _3_13_20
624                        _3_14_20
625                        _3_15_20
626                        _3_16_20
627                        _3_17_20
628                        _3_18_20
629                        _3_19_20
630                        _3_20_20
631                        _3_21_20
31                          The SAS System
                                           18:30 Sunday, April 12, 2020

632                        _3_22_20
633                        _3_23_20
634                        _3_24_20
635                        _3_25_20
636                        _3_26_20
637                        _3_27_20
638                        _3_28_20
639                        _3_29_20
640                        _3_30_20
641                        _3_31_20
642                        _4_1_20
643                        _4_2_20
644                        _4_3_20
645                        _4_4_20
646                        _4_5_20
647                        _4_6_20
648                        _4_7_20
649                        _4_8_20
650                        _4_9_20
651                        _4_10_20
652                        _4_11_20
653            ;
654            if _ERROR_ then call symputx('_EFIERR_',1);  /* set
654      ! ERROR detection macro variable */
655            run;

NOTE: The infile DEATDATA is:
32                          The SAS System
                                           18:30 Sunday, April 12, 2020

      
      Filename=U:\web\democd103\.\github_clone_12APR2020\csse_covid_19_
      data\csse_covid_19_time_series\time_series_covid19_deaths_global.
      csv,
      RECFM=V,LRECL=32767,File Size (bytes)=53781,
      Last Modified=12Apr2020:18:24:51,
      Create Time=12Apr2020:18:24:51

NOTE: 264 records were read from the infile DEATDATA.
      The minimum record length was 177.
      The maximum record length was 407.
NOTE: The data set WORK.DEATH_DATA has 264 observations and 85 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.05 seconds
      cpu time            0.00 seconds
      

264 rows created in WORK.DEATH_DATA from DEATDATA.
  
  
  
NOTE: WORK.DEATH_DATA data set was successfully created.
NOTE: The data set WORK.DEATH_DATA has 264 observations and 85 
      variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.56 seconds
33                          The SAS System
                                           18:30 Sunday, April 12, 2020

      cpu time            0.26 seconds
      

656        
657        /* Needed, because of
657      ! https://github.com/CSSEGISandData/COVID-19/issues/559 */
658        /* The state summary has no comma in the province_state
658      ! variable - don't output those lines, or you'll double-count)
658      !  */
659        /*
660        data death_data; set death_data;
661        if country_region^='US' or (country_region='US' and
661      ! (index(province_state,',')^=0 or province_state in ('Diamond
661      !  Princess' 'Grand Princess')))  then output;
662        run;
663        */
664        
665        proc transpose data=death_data out=death_data
665      ! (rename=(_name_=datestring col1=deaths));
666        by Province_State Country_Region Lat Long notsorted;
667        run;

NOTE: There were 264 observations read from the data set 
      WORK.DEATH_DATA.
NOTE: The data set WORK.DEATH_DATA has 21384 observations and 6 
      variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
34                          The SAS System
                                           18:30 Sunday, April 12, 2020

      real time           0.01 seconds
      cpu time            0.00 seconds
      

668        
669        /* The date/timestamp is in a string - parse it apart, and
669      ! create a real date variable */
670        data death_data (drop = month day year datestring);
671         set death_data;
672        Country_Region=trim(left(Country_Region));
673        if province_state='Curacao' then Country_Region='Curacao';
674        if province_state='Greenland' then
674      ! Country_Region='Greenland';
675        if province_state='Faroe Islands' then Country_Region='Faroe
675      !  Islands';
676        if province_state='Aruba' then Country_Region='Aruba';
677        if province_state='Sint Maarten' then Country_Region='Sint
677      ! Maarten';
678        if province_state='Bonaire, Sint Eustatius and Saba' then
678      ! Country_Region='Bonaire, Sint Eustatius and Saba';
679        if Country_Region='United Arab Emirates' then
679      ! Country_Region='UAE';
680        if country_region='Iran (Islamic Republic of)' then
680      ! country_region='Iran';
681        month=.; month=scan(datestring,1,'_');
682        day=.; day=scan(datestring,2,'_');
683        year=.; year=2000+scan(datestring,3,'_');
35                          The SAS System
                                           18:30 Sunday, April 12, 2020

684        if deaths=0 then deaths=.;
685        format snapshot date9.;
686        snapshot=mdy(month,day,year);
687        run;

NOTE: Character values have been converted to numeric 
      values at the places given by: (Line):(Column).
      681:16   682:12   683:19   
NOTE: There were 21384 observations read from the data set 
      WORK.DEATH_DATA.
NOTE: The data set WORK.DEATH_DATA has 21384 observations and 6 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

688        
689        proc sql noprint;
690        create table latest_deaths as
691        select unique *
692        from death_data
693        having snapshot=max(snapshot);
NOTE: The query requires remerging summary statistics back with the 
      original data.
NOTE: Table WORK.LATEST_DEATHS created, with 264 rows and 6 columns.

36                          The SAS System
                                           18:30 Sunday, April 12, 2020

694        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

694      !       run;
695        
696        
697        /* ------------------ Import the recovered cases data
697      ! ---------------------- */
698        
699        /*
700        filename recodata
700      ! "./&gitfolder/time_series/time_series_2019-ncov-Recovered.cs
700      ! v";
701        filename recodata
701      ! "./&gitfolder/csse_covid_19_data/csse_covid_19_time_series/t
701      ! ime_series_19-covid-Recovered.csv";
702        */
703        filename recodata
703      ! "./&gitfolder/csse_covid_19_data/csse_covid_19_time_series/t
703      ! ime_series_covid19_recovered_global.csv";
704        proc import datafile=recodata
705         out=recovered_data dbms=csv replace;
706        getnames=yes;
707        guessingrows=all;
37                          The SAS System
                                           18:30 Sunday, April 12, 2020

708        run;

709         /**********************************************************
709      ! ************
710         *   PRODUCT:   SAS
711         *   VERSION:   9.4
712         *   CREATOR:   External File Interface
713         *   DATE:      12APR20
714         *   DESC:      Generated SAS Datastep Code
715         *   TEMPLATE SOURCE:  (None Specified.)
716         ***********************************************************
716      ! ************/
717            data WORK.RECOVERED_DATA    ;
718            %let _EFIERR_ = 0; /* set the ERROR detection macro
718      ! variable */
719            infile RECODATA delimiter = ',' MISSOVER DSD lrecl=32767
719      !  firstobs=2 ;
720               informat Province_State $34. ;
721               informat Country_Region $32. ;
722               informat Lat best32. ;
723               informat Long best32. ;
724               informat _1_22_20 best32. ;
725               informat _1_23_20 best32. ;
726               informat _1_24_20 best32. ;
727               informat _1_25_20 best32. ;
728               informat _1_26_20 best32. ;
729               informat _1_27_20 best32. ;
38                          The SAS System
                                           18:30 Sunday, April 12, 2020

730               informat _1_28_20 best32. ;
731               informat _1_29_20 best32. ;
732               informat _1_30_20 best32. ;
733               informat _1_31_20 best32. ;
734               informat _2_1_20 best32. ;
735               informat _2_2_20 best32. ;
736               informat _2_3_20 best32. ;
737               informat _2_4_20 best32. ;
738               informat _2_5_20 best32. ;
739               informat _2_6_20 best32. ;
740               informat _2_7_20 best32. ;
741               informat _2_8_20 best32. ;
742               informat _2_9_20 best32. ;
743               informat _2_10_20 best32. ;
744               informat _2_11_20 best32. ;
745               informat _2_12_20 best32. ;
746               informat _2_13_20 best32. ;
747               informat _2_14_20 best32. ;
748               informat _2_15_20 best32. ;
749               informat _2_16_20 best32. ;
750               informat _2_17_20 best32. ;
751               informat _2_18_20 best32. ;
752               informat _2_19_20 best32. ;
753               informat _2_20_20 best32. ;
754               informat _2_21_20 best32. ;
755               informat _2_22_20 best32. ;
756               informat _2_23_20 best32. ;
39                          The SAS System
                                           18:30 Sunday, April 12, 2020

757               informat _2_24_20 best32. ;
758               informat _2_25_20 best32. ;
759               informat _2_26_20 best32. ;
760               informat _2_27_20 best32. ;
761               informat _2_28_20 best32. ;
762               informat _2_29_20 best32. ;
763               informat _3_1_20 best32. ;
764               informat _3_2_20 best32. ;
765               informat _3_3_20 best32. ;
766               informat _3_4_20 best32. ;
767               informat _3_5_20 best32. ;
768               informat _3_6_20 best32. ;
769               informat _3_7_20 best32. ;
770               informat _3_8_20 best32. ;
771               informat _3_9_20 best32. ;
772               informat _3_10_20 best32. ;
773               informat _3_11_20 best32. ;
774               informat _3_12_20 best32. ;
775               informat _3_13_20 best32. ;
776               informat _3_14_20 best32. ;
777               informat _3_15_20 best32. ;
778               informat _3_16_20 best32. ;
779               informat _3_17_20 best32. ;
780               informat _3_18_20 best32. ;
781               informat _3_19_20 best32. ;
782               informat _3_20_20 best32. ;
783               informat _3_21_20 best32. ;
40                          The SAS System
                                           18:30 Sunday, April 12, 2020

784               informat _3_22_20 best32. ;
785               informat _3_23_20 best32. ;
786               informat _3_24_20 best32. ;
787               informat _3_25_20 best32. ;
788               informat _3_26_20 best32. ;
789               informat _3_27_20 best32. ;
790               informat _3_28_20 best32. ;
791               informat _3_29_20 best32. ;
792               informat _3_30_20 best32. ;
793               informat _3_31_20 best32. ;
794               informat _4_1_20 best32. ;
795               informat _4_2_20 best32. ;
796               informat _4_3_20 best32. ;
797               informat _4_4_20 best32. ;
798               informat _4_5_20 best32. ;
799               informat _4_6_20 best32. ;
800               informat _4_7_20 best32. ;
801               informat _4_8_20 best32. ;
802               informat _4_9_20 best32. ;
803               informat _4_10_20 best32. ;
804               informat _4_11_20 best32. ;
805               format Province_State $34. ;
806               format Country_Region $32. ;
807               format Lat best12. ;
808               format Long best12. ;
809               format _1_22_20 best12. ;
810               format _1_23_20 best12. ;
41                          The SAS System
                                           18:30 Sunday, April 12, 2020

811               format _1_24_20 best12. ;
812               format _1_25_20 best12. ;
813               format _1_26_20 best12. ;
814               format _1_27_20 best12. ;
815               format _1_28_20 best12. ;
816               format _1_29_20 best12. ;
817               format _1_30_20 best12. ;
818               format _1_31_20 best12. ;
819               format _2_1_20 best12. ;
820               format _2_2_20 best12. ;
821               format _2_3_20 best12. ;
822               format _2_4_20 best12. ;
823               format _2_5_20 best12. ;
824               format _2_6_20 best12. ;
825               format _2_7_20 best12. ;
826               format _2_8_20 best12. ;
827               format _2_9_20 best12. ;
828               format _2_10_20 best12. ;
829               format _2_11_20 best12. ;
830               format _2_12_20 best12. ;
831               format _2_13_20 best12. ;
832               format _2_14_20 best12. ;
833               format _2_15_20 best12. ;
834               format _2_16_20 best12. ;
835               format _2_17_20 best12. ;
836               format _2_18_20 best12. ;
837               format _2_19_20 best12. ;
42                          The SAS System
                                           18:30 Sunday, April 12, 2020

838               format _2_20_20 best12. ;
839               format _2_21_20 best12. ;
840               format _2_22_20 best12. ;
841               format _2_23_20 best12. ;
842               format _2_24_20 best12. ;
843               format _2_25_20 best12. ;
844               format _2_26_20 best12. ;
845               format _2_27_20 best12. ;
846               format _2_28_20 best12. ;
847               format _2_29_20 best12. ;
848               format _3_1_20 best12. ;
849               format _3_2_20 best12. ;
850               format _3_3_20 best12. ;
851               format _3_4_20 best12. ;
852               format _3_5_20 best12. ;
853               format _3_6_20 best12. ;
854               format _3_7_20 best12. ;
855               format _3_8_20 best12. ;
856               format _3_9_20 best12. ;
857               format _3_10_20 best12. ;
858               format _3_11_20 best12. ;
859               format _3_12_20 best12. ;
860               format _3_13_20 best12. ;
861               format _3_14_20 best12. ;
862               format _3_15_20 best12. ;
863               format _3_16_20 best12. ;
864               format _3_17_20 best12. ;
43                          The SAS System
                                           18:30 Sunday, April 12, 2020

865               format _3_18_20 best12. ;
866               format _3_19_20 best12. ;
867               format _3_20_20 best12. ;
868               format _3_21_20 best12. ;
869               format _3_22_20 best12. ;
870               format _3_23_20 best12. ;
871               format _3_24_20 best12. ;
872               format _3_25_20 best12. ;
873               format _3_26_20 best12. ;
874               format _3_27_20 best12. ;
875               format _3_28_20 best12. ;
876               format _3_29_20 best12. ;
877               format _3_30_20 best12. ;
878               format _3_31_20 best12. ;
879               format _4_1_20 best12. ;
880               format _4_2_20 best12. ;
881               format _4_3_20 best12. ;
882               format _4_4_20 best12. ;
883               format _4_5_20 best12. ;
884               format _4_6_20 best12. ;
885               format _4_7_20 best12. ;
886               format _4_8_20 best12. ;
887               format _4_9_20 best12. ;
888               format _4_10_20 best12. ;
889               format _4_11_20 best12. ;
890            input
891                        Province_State  $
44                          The SAS System
                                           18:30 Sunday, April 12, 2020

892                        Country_Region  $
893                        Lat
894                        Long
895                        _1_22_20
896                        _1_23_20
897                        _1_24_20
898                        _1_25_20
899                        _1_26_20
900                        _1_27_20
901                        _1_28_20
902                        _1_29_20
903                        _1_30_20
904                        _1_31_20
905                        _2_1_20
906                        _2_2_20
907                        _2_3_20
908                        _2_4_20
909                        _2_5_20
910                        _2_6_20
911                        _2_7_20
912                        _2_8_20
913                        _2_9_20
914                        _2_10_20
915                        _2_11_20
916                        _2_12_20
917                        _2_13_20
918                        _2_14_20
45                          The SAS System
                                           18:30 Sunday, April 12, 2020

919                        _2_15_20
920                        _2_16_20
921                        _2_17_20
922                        _2_18_20
923                        _2_19_20
924                        _2_20_20
925                        _2_21_20
926                        _2_22_20
927                        _2_23_20
928                        _2_24_20
929                        _2_25_20
930                        _2_26_20
931                        _2_27_20
932                        _2_28_20
933                        _2_29_20
934                        _3_1_20
935                        _3_2_20
936                        _3_3_20
937                        _3_4_20
938                        _3_5_20
939                        _3_6_20
940                        _3_7_20
941                        _3_8_20
942                        _3_9_20
943                        _3_10_20
944                        _3_11_20
945                        _3_12_20
46                          The SAS System
                                           18:30 Sunday, April 12, 2020

946                        _3_13_20
947                        _3_14_20
948                        _3_15_20
949                        _3_16_20
950                        _3_17_20
951                        _3_18_20
952                        _3_19_20
953                        _3_20_20
954                        _3_21_20
955                        _3_22_20
956                        _3_23_20
957                        _3_24_20
958                        _3_25_20
959                        _3_26_20
960                        _3_27_20
961                        _3_28_20
962                        _3_29_20
963                        _3_30_20
964                        _3_31_20
965                        _4_1_20
966                        _4_2_20
967                        _4_3_20
968                        _4_4_20
969                        _4_5_20
970                        _4_6_20
971                        _4_7_20
972                        _4_8_20
47                          The SAS System
                                           18:30 Sunday, April 12, 2020

973                        _4_9_20
974                        _4_10_20
975                        _4_11_20
976            ;
977            if _ERROR_ then call symputx('_EFIERR_',1);  /* set
977      ! ERROR detection macro variable */
978            run;

NOTE: The infile RECODATA is:
      
      Filename=U:\web\democd103\.\github_clone_12APR2020\csse_covid_19_
      data\csse_covid_19_time_series\time_series_covid19_recovered_glob
      al.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=56038,
      Last Modified=12Apr2020:18:24:51,
      Create Time=12Apr2020:18:24:51

NOTE: 250 records were read from the infile RECODATA.
      The minimum record length was 178.
      The maximum record length was 461.
NOTE: The data set WORK.RECOVERED_DATA has 250 observations and 85 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      

48                          The SAS System
                                           18:30 Sunday, April 12, 2020

250 rows created in WORK.RECOVERED_DATA from RECODATA.
  
  
  
NOTE: WORK.RECOVERED_DATA data set was successfully created.
NOTE: The data set WORK.RECOVERED_DATA has 250 observations and 85 
      variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.53 seconds
      cpu time            0.29 seconds
      

979        
980        /* Needed, because of
980      ! https://github.com/CSSEGISandData/COVID-19/issues/559 */
981        /* The state summary has no comma in the province_state
981      ! variable - don't output those lines, or you'll double-count)
981      !  */
982        /*
983        data recovered_data; set recovered_data;
984        if country_region^='US' or (country_region='US' and
984      ! (index(province_state,',')^=0 or province_state in ('Diamond
984      !  Princess' 'Grand Princess')))  then output;
985        run;
986        */
987        
988        proc transpose data=recovered_data out=recovered_data
49                          The SAS System
                                           18:30 Sunday, April 12, 2020

988      ! (rename=(_name_=datestring col1=recovered));
989        by Province_State Country_Region Lat Long notsorted;
990        run;

NOTE: There were 250 observations read from the data set 
      WORK.RECOVERED_DATA.
NOTE: The data set WORK.RECOVERED_DATA has 20250 observations and 6 
      variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

991        
992        /* The date/timestamp is in a string - parse it apart, and
992      ! create a real date variable */
993        data recovered_data (drop = month day year datestring);
994         set recovered_data;
995        Country_Region=trim(left(Country_Region));
996        if province_state='Curacao' then Country_Region='Curacao';
997        if province_state='Greenland' then
997      ! Country_Region='Greenland';
998        if province_state='Faroe Islands' then Country_Region='Faroe
998      !  Islands';
999        if province_state='Aruba' then Country_Region='Aruba';
1000       if province_state='Sint Maarten' then Country_Region='Sint
1000     ! Maarten';
50                          The SAS System
                                           18:30 Sunday, April 12, 2020

1001       if province_state='Bonaire, Sint Eustatius and Saba' then
1001     ! Country_Region='Bonaire, Sint Eustatius and Saba';
1002       if Country_Region='United Arab Emirates' then
1002     ! Country_Region='UAE';
1003       if country_region='Iran (Islamic Republic of)' then
1003     ! country_region='Iran';
1004       month=.; month=scan(datestring,1,'_');
1005       day=.; day=scan(datestring,2,'_');
1006       year=.; year=2000+scan(datestring,3,'_');
1007       if recovered=0 then recovered=.;
1008       format snapshot dateampm.;
1009       snapshot=mdy(month,day,year);
1010       run;

NOTE: Character values have been converted to numeric 
      values at the places given by: (Line):(Column).
      1004:16   1005:12   1006:19   
NOTE: There were 20250 observations read from the data set 
      WORK.RECOVERED_DATA.
NOTE: The data set WORK.RECOVERED_DATA has 20250 observations and 6 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1011       
51                          The SAS System
                                           18:30 Sunday, April 12, 2020

1012       proc sql noprint;
1013       create table latest_recovered as
1014       select unique *
1015       from recovered_data
1016       having snapshot=max(snapshot);
NOTE: The query requires remerging summary statistics back with the 
      original data.
NOTE: Table WORK.LATEST_RECOVERED created, with 250 rows and 6 columns.

1017       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1017     !       run;
1018       
1019       
1020       proc sql noprint;
1021       create table confirmed_increase as
1022       select unique country_region, snapshot, sum(confirmed) as
1022     ! confirmed
1023       from confirmed_data
1024       group by country_region, snapshot
1025       order by country_region, snapshot;
NOTE: Table WORK.CONFIRMED_INCREASE created, with 15471 rows and 3 
      columns.
52                          The SAS System
                                           18:30 Sunday, April 12, 2020


1026       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1026     !       run;
1027       data confirmed_increase; set confirmed_increase;
1028       confirmed_this_day=confirmed-lag(confirmed);
1029       if country_region^=lag(country_region) then
1029     ! confirmed_this_day=.;
1030       run;

NOTE: Missing values were generated as a result of performing an 
      operation on missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      8260 at 1028:29   
NOTE: There were 15471 observations read from the data set 
      WORK.CONFIRMED_INCREASE.
NOTE: The data set WORK.CONFIRMED_INCREASE has 15471 observations and 
      4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

53                          The SAS System
                                           18:30 Sunday, April 12, 2020

1031       proc sql noprint;
1032       create table latest_increase as
1033       select unique snapshot, country_region, confirmed_this_day
1034       from confirmed_increase
1035       having snapshot=max(snapshot);
NOTE: The query requires remerging summary statistics back with the 
      original data.
NOTE: Table WORK.LATEST_INCREASE created, with 191 rows and 3 columns.

1036       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1036     !       run;
1037       
1038       
1039       /*
1039     ! ------------------------------------------------------------
1039     ! ----------- */
1040       
1041       
1042       goptions device=png;
1043       goptions border;
1044       
1045       ODS LISTING CLOSE;
54                          The SAS System
                                           18:30 Sunday, April 12, 2020

1046       ODS html path=odsout body="&name..htm"
1047        (title="COVID-19 Coronavirus Dashboard")
1048        style=htmlblue;
NOTE: Writing HTML Body file: coronavirus_covid19_dashboard.htm
1049       
1050       goptions gunit=pct ftitle='albany amt/bold' ftext='albany
1050     ! amt' htitle=28pt htext=12pt;
1051       goptions cback=black ctext=graycc;
1052       
1053       /* Create the individual graphs, but don't display them
1053     ! (yet) */
1054       goptions nodisplay;
1055       
1056       /*----------------------------------------------------------
1056     ! ---------*/
1057       
1058       goptions xpixels=1400 ypixels=700;
1059       data anno_black_background;
1060       length function $8 color $12 style $35;
1061       xsys='3'; ysys='3'; when='b';
1062       function='move'; x=0; y=0; output;
1063       function='bar'; x=100; y=100; style='solid'; color="black";
1063     ! output;
1064       run;

NOTE: The data set WORK.ANNO_BLACK_BACKGROUND has 2 observations and 8 
      variables.
55                          The SAS System
                                           18:30 Sunday, April 12, 2020

NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1065       
1066       /* this is the medium graph background used behind each
1066     ! graph */
1067       data anno_gray_background; set anno_black_background;
1068       color="gray22";
1069       run;

NOTE: There were 2 observations read from the data set 
      WORK.ANNO_BLACK_BACKGROUND.
NOTE: The data set WORK.ANNO_GRAY_BACKGROUND has 2 observations and 8 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1070       
1071       /* this is the dark/black background, behind the entire
1071     ! dashboard */
1072       proc gslide anno=anno_black_background
WARNING: The SAS/GRAPH product with which GSLIDE is associated will be 
         expiring soon, and is currently in warning mode to indicate 
56                          The SAS System
                                           18:30 Sunday, April 12, 2020

         this upcoming expiration. Please run PROC SETINIT to obtain 
         more information on your warning period.
1073        des='' name='back';
1074       run;

1075       
1076       title;
1077       
1078       
1079       /*-----------------------------title------------------------
1079     ! --------------*/
1080       
1081       /* Use annotate & gslide to create a long/skinny title slide
1081     !  */
1082       
1083       /* xpixels=(99.5-.5)/100*1400 ypixels=(99-90)/100*700 */
1084       goptions xpixels=1386 ypixels=63;

NOTE: There were 2 observations read from the data set 
      WORK.ANNO_BLACK_BACKGROUND.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.09 seconds
      cpu time            0.07 seconds
      

1085       data anno_title;
1086       length function $8 color $12 style $35 text $300 html $300;
57                          The SAS System
                                           18:30 Sunday, April 12, 2020

1087       xsys='3'; ysys='3'; when='a'; hsys='d';
1088       function='label'; position='6'; color="graycc";
1089       html='title='||quote("COVID-19 Coronavirus dashboard -
1089     ! &datestr snapshot");
1090       size=20; x=2; y=60; text="COVID-19 Coronavirus Global Cases"
1090     ! ; output;
1091       size=14; x=44; y=53; text="&datestr snapshot"; output;
1092       run;

NOTE: Variable style is uninitialized.
NOTE: The data set WORK.ANNO_TITLE has 2 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1093       data anno_title; set anno_gray_background anno_title;
1094       run;

NOTE: There were 2 observations read from the data set 
      WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 2 observations read from the data set WORK.ANNO_TITLE.
NOTE: The data set WORK.ANNO_TITLE has 4 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
58                          The SAS System
                                           18:30 Sunday, April 12, 2020


1095       proc gslide anno=anno_title des='' name='title';
1096       run;

1097       
1098       
1099       /*-----------------------------info-------------------------
1099     ! -------------*/
1100       
1101       /* Use annotated text in a gslide to create the info box in
1101     ! bottom/right corner */
1102       
1103       /* xpixels=(99.5-70)/100*1400 ypixels=(15-1)/100*700 */
1104       goptions xpixels=413 ypixels=98;

NOTE: There were 4 observations read from the data set WORK.ANNO_TITLE.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.09 seconds
      cpu time            0.04 seconds
      

1105       data anno_info;
1106       length function $8 color $12 style $35 text $300 html $300;
1107       xsys='3'; ysys='3'; when='a'; hsys='d';
1108       function='label'; position='6';
1109       size=11;
1110       
59                          The SAS System
                                           18:30 Sunday, April 12, 2020

1111       y=87; html=''; function='label';
1112       x=3; color="graycc"; style="albany amt"; text="Visualization
1112     !  by: "; output;
1113       html='target="cor2"
1113     ! href='||quote('https://blogs.sas.com/content/graphicallyspea
1113     ! king/2020/02/03/improving-the-wuhan-coronavirus-dashboard/')
1113     ! ;
1114       x=30; color="dodgerblue"; style="albany amt/bold";
1114     ! text="Robert Allison using SAS Software"; output;
1115       
1116       y=y-24; html='';
1117       x=3; color="graycc"; style="albany amt"; text="Designed
1117     ! after: "; output;
1118       html='target="cor2"
1118     ! href='||quote('https://gisanddata.maps.arcgis.com/apps/opsda
1118     ! shboard/index.html#/bda7594740fd40299423467b48e9ecf6');
1119       x=29; color="dodgerblue"; style="albany amt/bold";
1119     ! text="Johns Hopkins dashboard"; output;
1120       
1121       y=y-24; html='';
1122       x=3; color="graycc"; style="albany amt"; text="Data sources:
1122     !  "; output;
1123       html='target="cor2"
1123     ! href='||quote('https://www.who.int/emergencies/diseases/nove
1123     ! l-coronavirus-2019/situation-reports');
1124       x=28; color="dodgerblue"; style="albany amt/bold";
1124     ! text="WHO,"; output;
60                          The SAS System
                                           18:30 Sunday, April 12, 2020

1125       html='target="cor2"
1125     ! href='||quote('https://www.cdc.gov/coronavirus/2019-ncov/ind
1125     ! ex.html');
1126       x=x+11; color="dodgerblue"; text="CDC,"; output;
1127       html='target="cor2"
1127     ! href='||quote('https://www.ecdc.europa.eu/en/geographical-di
1127     ! stribution-2019-ncov-cases');
1128       x=x+10; color="dodgerblue"; text="ECDC,"; output;
1129       html='target="cor2"
1129     ! href='||quote('http://www.nhc.gov.cn/yjb/s3578/new_list.shtm
1129     ! l');
1130       x=x+13; color="dodgerblue"; text="NHC,"; output;
1131       html='target="cor2"
1131     ! href='||quote('https://3g.dxy.cn/newh5/view/pneumonia?scene=
1131     ! 2&clicktime=1579582238&enterid=1579582238&from=singlemessage
1131     ! &isappinstalled=0');
1132       x=x+10; color="dodgerblue"; text="and DXY"; output;
1133       
1134       y=y-24; html='';
1135       x=3; color="graycc"; style="albany amt"; text="Data: ";
1135     ! output;
1136       html='target="cor2"
1136     ! href='||quote('https://github.com/CSSEGISandData/COVID-19/tr
1136     ! ee/master/csse_covid_19_data/csse_covid_19_time_series');
1137       x=14; color="dodgerblue"; style="albany amt/bold";
1137     ! text="GitHub"; output;
1138       
61                          The SAS System
                                           18:30 Sunday, April 12, 2020

1139       run;

NOTE: The data set WORK.ANNO_INFO has 12 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1140       data anno_info; set anno_gray_background anno_info;
1141       run;

NOTE: There were 2 observations read from the data set 
      WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 12 observations read from the data set WORK.ANNO_INFO.
NOTE: The data set WORK.ANNO_INFO has 14 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1142       proc gslide anno=anno_info des='' name='info';
1143       run;

1144       
1145       
1146       /*----------------------------confsum-----------------------
1146     ! ----------------*/
62                          The SAS System
                                           18:30 Sunday, April 12, 2020

1147       
1148       /* this is the grand sum (large number) over the confirmed
1148     ! table */
1149       
1150       /* xpixels=(15-.5)/100*1400  ypixels=(89-75)/100*700 */
1151       goptions xpixels=203 ypixels=98;
1152       

NOTE: There were 14 observations read from the data set WORK.ANNO_INFO.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.10 seconds
      cpu time            0.07 seconds
      

1153       proc sql noprint;
1154       create table anno_confirmed_total as
1155       select sum(confirmed) as sum_confirmed from latest_confirmed
1155     ! ;
NOTE: Table WORK.ANNO_CONFIRMED_TOTAL created, with 1 rows and 1 
      columns.

1156       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

63                          The SAS System
                                           18:30 Sunday, April 12, 2020

1156     !       run;
1157       data anno_confirmed_total; set anno_confirmed_total;
1158       length function $8 color $12 style $35 text $300 html $300;
1159       xsys='3'; ysys='3'; when='a'; hsys='d';
1160       function='label'; position='5';
1161       style='albany amt/bold'; color="graycc"; size=11;
1162       x=50; y=84; text="Total Confirmed"; output;
1163       html='title='||quote(trim(left(put(sum_confirmed,comma12.0))
1163     ! )||" total confirmed cases of COVID-19 Coronavirus
1163     ! worldwide");
1164       style='albany amt/bold'; color="red"; size=31;
1165       x=50; y=50; text=trim(left(put(sum_confirmed,comma12.0)));
1165     ! output;
1166       run;

NOTE: There were 1 observations read from the data set 
      WORK.ANNO_CONFIRMED_TOTAL.
NOTE: The data set WORK.ANNO_CONFIRMED_TOTAL has 2 observations and 14 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      

1167       data anno_confirmed_total; set anno_gray_background
1167     ! anno_confirmed_total;
1168       run;
64                          The SAS System
                                           18:30 Sunday, April 12, 2020


NOTE: There were 2 observations read from the data set 
      WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 2 observations read from the data set 
      WORK.ANNO_CONFIRMED_TOTAL.
NOTE: The data set WORK.ANNO_CONFIRMED_TOTAL has 4 observations and 14 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1169       proc gslide anno=anno_confirmed_total des='' name='confsum';
1170       run;

1171       
1172       /*------------------------------deadsum---------------------
1172     ! ----------------*/
1173       
1174       /* this is the grand sum (large number) over the deaths
1174     ! table */
1175       
1176       goptions xpixels=203 ypixels=98;

NOTE: There were 4 observations read from the data set 
      WORK.ANNO_CONFIRMED_TOTAL.
NOTE: PROCEDURE GSLIDE used (Total process time):
65                          The SAS System
                                           18:30 Sunday, April 12, 2020

      real time           0.10 seconds
      cpu time            0.04 seconds
      

1177       proc sql noprint;
1178       create table anno_deaths_total as
1179       select sum(deaths) as sum_deaths from latest_deaths;
NOTE: Table WORK.ANNO_DEATHS_TOTAL created, with 1 rows and 1 columns.

1180       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1180     !       run;
1181       data anno_deaths_total; set anno_deaths_total;
1182       length function $8 color $12 style $35 text $300 html $300;
1183       xsys='3'; ysys='3'; when='a'; hsys='d';
1184       function='label'; position='5';
1185       style='albany amt/bold'; color="graycc"; size=11;
1186       x=50; y=84; text="Total Deaths"; output;
1187       html='title='||quote(trim(left(put(sum_deaths,comma12.0)))||
1187     ! " deaths from COVID-19 Coronavirus worldwide");
1188       style='albany amt/bold'; color="white"; size=40;
1189       x=50; y=50; text=trim(left(put(sum_deaths,comma12.0)));
1189     ! output;
66                          The SAS System
                                           18:30 Sunday, April 12, 2020

1190       run;

NOTE: There were 1 observations read from the data set 
      WORK.ANNO_DEATHS_TOTAL.
NOTE: The data set WORK.ANNO_DEATHS_TOTAL has 2 observations and 14 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1191       data anno_deaths_total; set anno_gray_background
1191     ! anno_deaths_total;
1192       run;

NOTE: There were 2 observations read from the data set 
      WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 2 observations read from the data set 
      WORK.ANNO_DEATHS_TOTAL.
NOTE: The data set WORK.ANNO_DEATHS_TOTAL has 4 observations and 14 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1193       proc gslide anno=anno_deaths_total des='' name='deadsum';
67                          The SAS System
                                           18:30 Sunday, April 12, 2020

1194       run;

1195       
1196       
1197       /*------------------------------recosum---------------------
1197     ! ----------------*/
1198       
1199       /* this is the grand sum (large number) over the recovered
1199     ! table */
1200       
1201       goptions xpixels=203 ypixels=98;

NOTE: There were 4 observations read from the data set 
      WORK.ANNO_DEATHS_TOTAL.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.09 seconds
      cpu time            0.06 seconds
      

1202       proc sql noprint;
1203       create table anno_recovered_total as
1204       select sum(recovered) as sum_recovered from latest_recovered
1204     ! ;
NOTE: Table WORK.ANNO_RECOVERED_TOTAL created, with 1 rows and 1 
      columns.

1205       quit;
68                          The SAS System
                                           18:30 Sunday, April 12, 2020

NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1205     !       run;
1206       data anno_recovered_total; set anno_recovered_total;
1207       length function $8 color $12 style $35 text $300 html $300;
1208       xsys='3'; ysys='3'; when='a'; hsys='d';
1209       function='label'; position='5';
1210       style='albany amt/bold'; color="graycc"; size=11;
1211       x=50; y=84; text="Total Recovered"; output;
1212       html='title='||quote(trim(left(put(sum_recovered,comma12.0))
1212     ! )||" recovered from COVID-19 Coronavirus worldwide");
1213       style='albany amt/bold'; color="cx71a81e"; size=40;
1214       x=50; y=50; text=trim(left(put(sum_recovered,comma12.0)));
1214     ! output;
1215       run;

NOTE: There were 1 observations read from the data set 
      WORK.ANNO_RECOVERED_TOTAL.
NOTE: The data set WORK.ANNO_RECOVERED_TOTAL has 2 observations and 14 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      
69                          The SAS System
                                           18:30 Sunday, April 12, 2020


1216       data anno_recovered_total; set anno_gray_background
1216     ! anno_recovered_total;
1217       run;

NOTE: There were 2 observations read from the data set 
      WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 2 observations read from the data set 
      WORK.ANNO_RECOVERED_TOTAL.
NOTE: The data set WORK.ANNO_RECOVERED_TOTAL has 4 observations and 14 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1218       proc gslide anno=anno_recovered_total des='' name='recosum';
1219       run;

1220       
1221       /*------------------------------incsum----------------------
1221     ! ---------------*/
1222       
1223       goptions xpixels=203 ypixels=98;

NOTE: There were 4 observations read from the data set 
      WORK.ANNO_RECOVERED_TOTAL.
70                          The SAS System
                                           18:30 Sunday, April 12, 2020

NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.08 seconds
      cpu time            0.06 seconds
      

1224       proc sql noprint;
1225       create table anno_increase_total as
1226       select sum(confirmed_this_day) as sum_increase from
1226     ! latest_increase;
NOTE: Table WORK.ANNO_INCREASE_TOTAL created, with 1 rows and 1 
      columns.

1227       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1227     !       run;
1228       data anno_increase_total; set anno_increase_total;
1229       length function $8 color $12 style $35 text $300 html $300;
1230       xsys='3'; ysys='3'; when='a'; hsys='d';
1231       function='label'; position='5';
1232       style='albany amt/bold'; color="graycc"; size=11;
1233       x=50; y=84; text="New Cases Today"; output;
1234       html='title='||quote(trim(left(put(sum_increase,comma12.0)))
1234     ! ||" increase in COVID-19 Coronavirus cases worldwide on
71                          The SAS System
                                           18:30 Sunday, April 12, 2020

1234     ! &datestr");
1235       style='albany amt/bold'; color="orange"; size=40;
1236       x=50; y=50; text=trim(left(put(sum_increase,comma12.0)));
1236     ! output;
1237       run;

NOTE: There were 1 observations read from the data set 
      WORK.ANNO_INCREASE_TOTAL.
NOTE: The data set WORK.ANNO_INCREASE_TOTAL has 2 observations and 14 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1238       data anno_increase_total; set anno_gray_background
1238     ! anno_increase_total;
1239       run;

NOTE: There were 2 observations read from the data set 
      WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 2 observations read from the data set 
      WORK.ANNO_INCREASE_TOTAL.
NOTE: The data set WORK.ANNO_INCREASE_TOTAL has 4 observations and 14 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
72                          The SAS System
                                           18:30 Sunday, April 12, 2020

      cpu time            0.00 seconds
      

1240       proc gslide anno=anno_increase_total des='' name='incsum';
1241       run;

1242       
1243       
1244       
1245       /*----------------------------map---------------------------
1245     ! ------------*/
1246       
1247       /* World map, with annotated red bubbles */
1248       
1249       /* xpixels=(69.5-15.5)/100*1400  ypixels=(89-35)/100*700 */
1250       goptions xpixels=756 ypixels=378;
1251       

NOTE: There were 4 observations read from the data set 
      WORK.ANNO_INCREASE_TOTAL.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.08 seconds
      cpu time            0.04 seconds
      

1252       proc sql noprint;
1253       create table map_data as
73                          The SAS System
                                           18:30 Sunday, April 12, 2020

1254       select unique country_region, avg(lat) as lat, avg(long) as
1254     ! long, sum(confirmed) as confirmed
1255       from latest_confirmed
1256       group by country_region;
NOTE: Table WORK.MAP_DATA created, with 191 rows and 4 columns.

1257       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1257     !       run;
1258       
1259       data map_data; set map_data;
1260       /* if the average lat/long doesn't land in a good position,
1260     ! hard-code one */
1261       if country_region='Canada' then do;
1262        lat=52.7765273; long=-107.4818132;
1263        end;
1264       if country_region='Sweden' then do;
1265        lat=63.7425748; long=16.5564647;
1266        end;
1267       if country_region='Russia' then do;
1268        lat=55.4645521; long=37.3415677;
1269        end;
1270       if country_region='United Kingdom' then do;
74                          The SAS System
                                           18:30 Sunday, April 12, 2020

1271        lat=53.7970459; long=-1.5191599;
1272        end;
1273       if country_region='France' then do;
1274        lat=48.8283932; long=2.3443639;
1275        end;
1276       if country_region='Mauritania' then do;
1277        lat=19.5488367; long=-10.3433656;
1278        end;
1279       /* https://github.com/CSSEGISandData/COVID-19/issues/836 */
1280       if country_region='Congo (Brazzaville)' then do;
1281        lat=-0.7134667; long=15.7399857;
1282        end;
1283       length html $300;
1284       html=
1285        'title='||quote(
1286         trim(left(country_region))||'0d'x||
1287         trim(left(put(confirmed,comma12.0)))||' confirmed
1287     ! cases')||
1288        ' href='||quote('#'||trim(left(country_region)));
1289       run;

NOTE: There were 191 observations read from the data set WORK.MAP_DATA.
NOTE: The data set WORK.MAP_DATA has 191 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      
75                          The SAS System
                                           18:30 Sunday, April 12, 2020


1290       
1291       /* The country names have to match in the data & map, for
1291     ! the choro map */
1292       /* So, let's make our SAS map names match the names in the
1292     ! data. */
1293       data my_map; set mapsgfk.world (where=((density<=2 or
1294        idname in ('Vatican City State' 'Gibraltar' 'San Marino'
1294     ! 'Monaco'))
1295        and idname^='Antarctica') drop=resolution);
NOTE: The map data sets in library MAPSGFK are based on the digital 
      maps from GfK GeoMarketing and are covered by their Copyright. 
      For additional information, see 
      http://support.sas.com/mapsonline/gfklicense.
1296       length country_region $100;
1297       country_region=idname;
1298       if idname='China/Taiwan_POC' then country_region='Taiwan*';
1299       if idname='United States' then country_region='US';
1300       if idname='Bolivia, Plurinational State of' then
1300     ! country_region='Bolivia';
1301       if idname='Russian Federation' then country_region='Russia';
1302       if idname='Viet Nam' then country_region='Vietnam';
1303       if idname='United Arab Emirates' then country_region='UAE';
1304       if idname='Macedonia' then country_region='North Macedonia';
1305       if idname='Brunei Darussalam' then country_region='Brunei';
1306       if idname='Vatican City State' then country_region='Holy
1306     ! See';
76                          The SAS System
                                           18:30 Sunday, April 12, 2020

1307       if idname='South Korea' then country_region='Korea, South';
1308       if idname='Czech Republic' then country_region='Czechia';
1309       if idname='Ivory Coast' then country_region="Cote d'Ivoire";
1310       if idname='Swaziland' then country_region='Eswatini';
1311       if idname='Venezuela, Bolivarian Republic of' then
1311     ! country_region='Venezuela';
1312       if idname='Bailiwick of Jersey' then country_region='Jersey'
1312     ! ;
1313       if idname='Bailiwick of Guernsey' then
1313     ! country_region='Guernsey';
1314       if idname='Myanmar' then country_region='Burma';
1315       /*
1316       if idname='Bahamas' then country_region='The Bahamas';
1317       if idname='Bahamas' then country_region='Bahamas, The';
1318       */
1319       if idname='Tanzania, United Republic of' then
1319     ! country_region='Tanzania';
1320       if idname='Democratic Republic of Congo' then
1320     ! country_region='Congo (Kinshasa)';
1321       if idname='Congo' then country_region='Congo (Brazzaville)';
1322       /*
1323       if idname='Gambia' then country_region='Gambia, The';
1324       if idname='Congo' then country_region='Republic of the
1324     ! Congo';
1325       */
1326       run;

77                          The SAS System
                                           18:30 Sunday, April 12, 2020

NOTE: There were 44075 observations read from the data set 
      MAPSGFK.WORLD.
      WHERE ((density<=2) or idname in ('Gibraltar', 'Monaco', 'San 
      Marino', 'Vatican City State')) and (idname not = 'Antarctica');
NOTE: The data set WORK.MY_MAP has 44075 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

1327       /*
1328       if idname='China/Taiwan_POC' then country_region='Taiwan';
1329       if idname='Moldova' then country_region='Republic of
1329     ! Moldova';
1330       if idname='China' then country_region='Mainland China';
1331       if idname='United Kingdom' then country_region='UK';
1332       if idname='South Korea' then country_region='Republic of
1332     ! Korea';
1333       */
1334       
1335       /*
1336       Some code to help find the matches...
1337       proc print data=mapsgfk.world
1337     ! (where=(index(idname,'Vatican')^=0)); run;
1338       */
1339       proc gproject data=my_map out=my_map latlong eastlong
1339     ! degrees
78                          The SAS System
                                           18:30 Sunday, April 12, 2020

1340        project=miller2 parmout=projparm;
1341       id country_region;
1342       run;

NOTE: The MILLER2 projection is experimental.
NOTE: POLELAT = 12.255794.
NOTE: POLELONG = 0.000411.
NOTE: The data set WORK.PROJPARM has 1 observations and 9 variables.
NOTE: There were 44075 observations read from the data set WORK.MY_MAP.
NOTE: The data set WORK.MY_MAP has 44075 observations and 13 variables.
NOTE: PROCEDURE GPROJECT used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

1343       /* Project the bubble lat/longs the same way you did the map
1343     !  */
1344       proc gproject data=map_data out=map_data latlong eastlong
1344     ! degrees
1345        parmin=projparm parmentry=my_map;
1346       id;
1347       run;

NOTE: Using default parameters for entry MY_MAP from data set 
      WORK.PROJPARM. Use NOPARMIN option to disable this feature.
NOTE: POLELAT = 12.255794.
NOTE: POLELONG = 0.000411.
79                          The SAS System
                                           18:30 Sunday, April 12, 2020

NOTE: There were 191 observations read from the data set WORK.MAP_DATA.
NOTE: The data set WORK.MAP_DATA has 191 observations and 7 variables.
NOTE: PROCEDURE GPROJECT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1348       
1349       /* these control the size of the blue bubbles */
1350       %let max_val=500000;  /* maximum number of confirmed cases
1350     ! (will correspond to maximum bubble size) */
1351       %let max_area=80; /* maximum bubble size (area) */
1352       proc sort data=map_data out=anno_bubbles;
1353       by descending confirmed;
1354       run;

NOTE: There were 191 observations read from the data set WORK.MAP_DATA.
NOTE: The data set WORK.ANNO_BUBBLES has 191 observations and 7 
      variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1355       data anno_bubbles; set anno_bubbles;
1356       length function $8 color $12 style $35 text $300 html $300;
1357       xsys='2'; ysys='2'; hsys='3'; when='a';
80                          The SAS System
                                           18:30 Sunday, April 12, 2020

1358       function='pie'; rotate=360; style='psolid'; color="red";
1359       size=.3+sqrt((confirmed/&max_val)*&max_area/3.14);
1360       output;
1361       /* gray outline around bubbles (especially important for
1361     ! overlapping bubbles */
1362       size=size+.1;
1363       style='pempty';
1364       color='gray77';
1365       html='';
1366       output;
1367       run;

NOTE: Variable text is uninitialized.
NOTE: There were 191 observations read from the data set 
      WORK.ANNO_BUBBLES.
NOTE: The data set WORK.ANNO_BUBBLES has 382 observations and 17 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1368       
1369       data anno_bubbles; set anno_gray_background anno_bubbles;
1370       run;

NOTE: There were 2 observations read from the data set 
81                          The SAS System
                                           18:30 Sunday, April 12, 2020

      WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 382 observations read from the data set 
      WORK.ANNO_BUBBLES.
NOTE: The data set WORK.ANNO_BUBBLES has 384 observations and 17 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1371       pattern1 v=s c=gray99;
1372       proc gmap data=map_data map=my_map all anno=anno_bubbles;
1373       id country_region;
1374       choro confirmed / levels=1 nolegend
1375        cdefault=gray55 coutline=gray77
1376        html=html
1377        des='' name='map';
1378       run;

WARNING: ID variable Country_Region is of length 32 in response data 
         set and length 100 in map data set.  This might result in ID 
         values not matching or multiple regions to be combined.

NOTE: There were 44075 observations read from the data set WORK.MY_MAP.
NOTE: There were 384 observations read from the data set 
      WORK.ANNO_BUBBLES.
NOTE: PROCEDURE GMAP used (Total process time):
82                          The SAS System
                                           18:30 Sunday, April 12, 2020

      real time           0.10 seconds
      cpu time            0.07 seconds
      

1379       proc sql noprint;
1380       create table not_in_map as
1381       select unique country_region
1382       from map_data
1383       where country_region not in (select unique country_region
1383     ! from my_map);
NOTE: Table WORK.NOT_IN_MAP created, with 5 rows and 1 columns.

1384       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.03 seconds
      cpu time            0.04 seconds
      

1384     !       run;
1385       
1386       
1387       /*--------------------------conftab-------------------------
1387     ! ----------------*/
1388       
1389       /* confirmed table */
1390       
1391       /* xpixels=(15-.5)/100*1400 ypixels=(74-1)/100*700 */
83                          The SAS System
                                           18:30 Sunday, April 12, 2020

1392       goptions xpixels=203 ypixels=511;
1393       proc sql noprint;
1394       create table anno_table_confirmed as
1395       select unique country_region, sum(confirmed) as confirmed
1396       from latest_confirmed
1397       group by country_region;
NOTE: Table WORK.ANNO_TABLE_CONFIRMED created, with 191 rows and 2 
      columns.

1398       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1398     !       run;
1399       proc sort data=anno_table_confirmed out=anno_table_confirmed
1399     ! ;
1400       by descending confirmed country_region;
1401       run;

NOTE: There were 191 observations read from the data set 
      WORK.ANNO_TABLE_CONFIRMED.
NOTE: The data set WORK.ANNO_TABLE_CONFIRMED has 191 observations and 
      2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
84                          The SAS System
                                           18:30 Sunday, April 12, 2020

      cpu time            0.00 seconds
      

1402       data anno_table_confirmed; set anno_table_confirmed (obs=16)
1402     ! ;
1403       if country_region='United Arab Emirates' then
1403     ! country_region='UAE';
1404       if country_region='Iran (Islamic Republic of)' then
1404     ! country_region='Iran';
1405       run;

NOTE: There were 16 observations read from the data set 
      WORK.ANNO_TABLE_CONFIRMED.
NOTE: The data set WORK.ANNO_TABLE_CONFIRMED has 16 observations and 2 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1406       data anno_table_confirmed; set anno_table_confirmed;
1407       length function $8 color $12 style $35 text $300 html $300;
1408       xsys='3'; ysys='3'; when='a'; hsys='d';
1409       function='label'; style='albany amt/bold'; size=11;
1410       y=99-(_n_*6);
1411       text=trim(left(put(confirmed,comma12.0))); x=28;
1411     ! position='4'; color="red"; output;
85                          The SAS System
                                           18:30 Sunday, April 12, 2020

1412       text=trim(left(country_region)); x=x+5; position='6';
1412     ! color="graycc"; output;
1413       /* annotate an invisible box, for the html= mouse-over text
1413     ! */
1414       html='title='||quote(trim(left(put(confirmed,comma12.0)))||"
1414     !  confirmed cases of COVID-19 Coronavirus in
1414     ! "||trim(left(country_region)))||
1415        ' href='||quote('#'||trim(left(country_region)));
1416       function='move'; x=0; y=y-3; output;
1417       function='bar'; x=100; y=y+5; style='empty'; line=3;
1417     ! size=.001; color="pink"; output;
1418       run;

NOTE: There were 16 observations read from the data set 
      WORK.ANNO_TABLE_CONFIRMED.
NOTE: The data set WORK.ANNO_TABLE_CONFIRMED has 64 observations and 
      16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1419       data anno_table_confirmed; set anno_table_confirmed;
1420       output;
1421       if _n_=1 then do;
1422        style='albany amt'; color="graycc"; text='- top 16 -'; x=50
1422     ! ; y=y+5;  position='5'; output;
86                          The SAS System
                                           18:30 Sunday, April 12, 2020

1423        end;
1424       run;

NOTE: There were 64 observations read from the data set 
      WORK.ANNO_TABLE_CONFIRMED.
NOTE: The data set WORK.ANNO_TABLE_CONFIRMED has 65 observations and 
      16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1425       data anno_table_confirmed; set anno_gray_background
1425     ! anno_table_confirmed;
1426       run;

NOTE: There were 2 observations read from the data set 
      WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 65 observations read from the data set 
      WORK.ANNO_TABLE_CONFIRMED.
NOTE: The data set WORK.ANNO_TABLE_CONFIRMED has 67 observations and 
      16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

87                          The SAS System
                                           18:30 Sunday, April 12, 2020

1427       proc gslide anno=anno_table_confirmed des='' name='conftab';
1428       run;

NOTE: ERROR DETECTED IN ANNOTATE= DATASET WORK.ANNO_TABLE_CONFIRMED.
NOTE: PROBLEM IN OBSERVATION     6 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    10 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    14 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    18 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    22 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    26 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    30 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    34 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    38 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    42 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    46 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    50 -
88                          The SAS System
                                           18:30 Sunday, April 12, 2020

      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    54 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    58 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    62 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    66 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
1429       
1430       
1431       /*---------------------------deadtab------------------------
1431     ! ----------------*/
1432       
1433       /* dead table */
1434       
1435       /* xpixels=(84.5-70)/100*1400 ypixels=(74-16)/100*700 */
1436       goptions xpixels=203 ypixels=406;

NOTE: There were 67 observations read from the data set 
      WORK.ANNO_TABLE_CONFIRMED.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.10 seconds
      cpu time            0.07 seconds
      

1437       proc sql noprint;
89                          The SAS System
                                           18:30 Sunday, April 12, 2020

1438       create table anno_table_deaths as
1439       select unique country_region, sum(deaths) as deaths
1440       from latest_deaths
1441       group by country_region;
NOTE: Table WORK.ANNO_TABLE_DEATHS created, with 191 rows and 2 
      columns.

1442       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1442     !       run;
1443       proc sort data=anno_table_deaths out=anno_table_deaths;
1444       by descending deaths country_region;
1445       run;

NOTE: There were 191 observations read from the data set 
      WORK.ANNO_TABLE_DEATHS.
NOTE: The data set WORK.ANNO_TABLE_DEATHS has 191 observations and 2 
      variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

90                          The SAS System
                                           18:30 Sunday, April 12, 2020

1446       data anno_table_deaths; set anno_table_deaths
1446     ! (where=(deaths>0));
1447       run;

NOTE: There were 152 observations read from the data set 
      WORK.ANNO_TABLE_DEATHS.
      WHERE deaths>0;
NOTE: The data set WORK.ANNO_TABLE_DEATHS has 152 observations and 2 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1448       data anno_table_deaths; set anno_table_deaths (obs=13);
1449       if country_region='United Arab Emirates' then
1449     ! country_region='UAE';
1450       if country_region='Iran (Islamic Republic of)' then
1450     ! country_region='Iran';
1451       run;

NOTE: There were 13 observations read from the data set 
      WORK.ANNO_TABLE_DEATHS.
NOTE: The data set WORK.ANNO_TABLE_DEATHS has 13 observations and 2 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
91                          The SAS System
                                           18:30 Sunday, April 12, 2020

      cpu time            0.00 seconds
      

1452       data anno_table_deaths; set anno_table_deaths;
1453       length function $8 color $12 style $35 text $300 html $300;
1454       xsys='3'; ysys='3'; when='a'; hsys='d';
1455       function='label'; style='albany amt/bold'; size=11;
1456       y=98-(_n_*7);
1457       text=trim(left(put(deaths,comma12.0))); x=28; position='4';
1457     ! color="white"; output;
1458       text=trim(left(country_region)); x=x+5; position='6';
1458     ! color="graycc"; output;
1459       /* annotate an invisible box, for the html= mouse-over text
1459     ! */
1460       html='title='||quote(trim(left(put(deaths,comma12.0)))||"
1460     ! deaths from COVID-19 Coronavirus in
1460     ! "||trim(left(country_region)))||
1461        ' href='||quote('#'||trim(left(country_region)));
1462       function='move'; x=0; y=y-3; output;
1463       function='bar'; x=100; y=y+5; style='empty'; line=3;
1463     ! size=.001; color="pink"; output;
1464       run;

NOTE: There were 13 observations read from the data set 
      WORK.ANNO_TABLE_DEATHS.
NOTE: The data set WORK.ANNO_TABLE_DEATHS has 52 observations and 16 
      variables.
92                          The SAS System
                                           18:30 Sunday, April 12, 2020

NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1465       data anno_table_deaths; set anno_table_deaths;
1466       output;
1467       if _n_=1 then do;
1468        style='albany amt'; color="graycc"; text='- top 13 -'; x=50
1468     ! ; y=y+6;  position='5'; output;
1469        end;
1470       run;

NOTE: There were 52 observations read from the data set 
      WORK.ANNO_TABLE_DEATHS.
NOTE: The data set WORK.ANNO_TABLE_DEATHS has 53 observations and 16 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1471       data anno_table_deaths; set anno_gray_background
1471     ! anno_table_deaths;
1472       run;

NOTE: There were 2 observations read from the data set 
93                          The SAS System
                                           18:30 Sunday, April 12, 2020

      WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 53 observations read from the data set 
      WORK.ANNO_TABLE_DEATHS.
NOTE: The data set WORK.ANNO_TABLE_DEATHS has 55 observations and 16 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1473       proc gslide anno=anno_table_deaths des='' name='deadtab';
1474       run;

NOTE: ERROR DETECTED IN ANNOTATE= DATASET WORK.ANNO_TABLE_DEATHS.
NOTE: PROBLEM IN OBSERVATION     6 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    10 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    14 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    18 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    22 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    26 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    30 -
94                          The SAS System
                                           18:30 Sunday, April 12, 2020

      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    34 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    38 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    42 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    46 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    50 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    54 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
1475       
1476       
1477       /*---------------------------inctab-------------------------
1477     ! ---------------*/
1478       
1479       /* daily increase table */
1480       
1481       goptions xpixels=203 ypixels=406;

NOTE: There were 55 observations read from the data set 
      WORK.ANNO_TABLE_DEATHS.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.10 seconds
      cpu time            0.06 seconds
95                          The SAS System
                                           18:30 Sunday, April 12, 2020

      

1482       proc sort data=latest_increase out=anno_table_increase;
1483       by descending confirmed_this_day country_region;
1484       run;

NOTE: There were 191 observations read from the data set 
      WORK.LATEST_INCREASE.
NOTE: The data set WORK.ANNO_TABLE_INCREASE has 191 observations and 3 
      variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1485       data anno_table_increase; set anno_table_increase
1485     ! (where=(confirmed_this_day>0));
1486       run;

NOTE: There were 140 observations read from the data set 
      WORK.ANNO_TABLE_INCREASE.
      WHERE confirmed_this_day>0;
NOTE: The data set WORK.ANNO_TABLE_INCREASE has 140 observations and 3 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
96                          The SAS System
                                           18:30 Sunday, April 12, 2020

      

1487       data anno_table_increase; set anno_table_increase (obs=13);
1488       if country_region='United Arab Emirates' then
1488     ! country_region='UAE';
1489       if country_region='Iran (Islamic Republic of)' then
1489     ! country_region='Iran';
1490       run;

NOTE: There were 13 observations read from the data set 
      WORK.ANNO_TABLE_INCREASE.
NOTE: The data set WORK.ANNO_TABLE_INCREASE has 13 observations and 3 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1491       
1492       data anno_table_increase; set anno_table_increase;
1493       length function $8 color $12 style $35 text $300 html $300;
1494       xsys='3'; ysys='3'; when='a'; hsys='d';
1495       function='label'; style='albany amt/bold'; size=11;
1496       y=98-(_n_*7);
1497       /* green was cx71a81e */
1498       text=trim(left(put(confirmed_this_day,comma12.0))); x=28;
1498     ! position='4'; color="orange"; output;
97                          The SAS System
                                           18:30 Sunday, April 12, 2020

1499       text=trim(left(country_region)); x=x+5; position='6';
1499     ! color="graycc"; output;
1500       /* annotate an invisible box, for the html= mouse-over text
1500     ! */
1501       html='title='||quote(trim(left(put(confirmed_this_day,comma1
1501     ! 2.0)))||
1502        " increase in COVID-19 Coronavirus in
1502     ! "||trim(left(country_region))||' on
1502     ! '||trim(left(put(snapshot,nldate20.))))||
1503        ' href='||quote('#'||trim(left(country_region)));
1504       function='move'; x=0; y=y-3; output;
1505       function='bar'; x=100; y=y+5; style='empty'; line=3;
1505     ! size=.001; color="pink"; output;
1506       run;

NOTE: There were 13 observations read from the data set 
      WORK.ANNO_TABLE_INCREASE.
NOTE: The data set WORK.ANNO_TABLE_INCREASE has 52 observations and 17 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1507       data anno_table_increase; set anno_table_increase;
1508       output;
1509       if _n_=1 then do;
98                          The SAS System
                                           18:30 Sunday, April 12, 2020

1510        style='albany amt'; color="graycc"; text='- top 13 -'; x=50
1510     ! ; y=y+6;  position='5'; output;
1511        end;
1512       run;

NOTE: There were 52 observations read from the data set 
      WORK.ANNO_TABLE_INCREASE.
NOTE: The data set WORK.ANNO_TABLE_INCREASE has 53 observations and 17 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1513       data anno_table_increase; set anno_gray_background
1513     ! anno_table_increase;
1514       run;

NOTE: There were 2 observations read from the data set 
      WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 53 observations read from the data set 
      WORK.ANNO_TABLE_INCREASE.
NOTE: The data set WORK.ANNO_TABLE_INCREASE has 55 observations and 17 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
99                          The SAS System
                                           18:30 Sunday, April 12, 2020

      

1515       proc gslide anno=anno_table_increase des='' name='incrtab';
1516       run;

NOTE: ERROR DETECTED IN ANNOTATE= DATASET WORK.ANNO_TABLE_INCREASE.
NOTE: PROBLEM IN OBSERVATION     6 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    10 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    14 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    18 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    22 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    26 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    30 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    34 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    38 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    42 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    46 -
100                         The SAS System
                                           18:30 Sunday, April 12, 2020

      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    50 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    54 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
1517       
1518       
1519       
1520       /*---------------------------recotab------------------------
1520     ! ----------------*/
1521       
1522       /* recovered table */
1523       
1524       goptions xpixels=203 ypixels=406;

NOTE: There were 55 observations read from the data set 
      WORK.ANNO_TABLE_INCREASE.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.08 seconds
      cpu time            0.04 seconds
      

1525       proc sql noprint;
1526       create table anno_table_recovered as
1527       select unique country_region, sum(recovered) as recovered
1528       from latest_recovered
1529       group by country_region;
101                         The SAS System
                                           18:30 Sunday, April 12, 2020

NOTE: Table WORK.ANNO_TABLE_RECOVERED created, with 191 rows and 2 
      columns.

1530       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1530     !       run;
1531       proc sort data=anno_table_recovered out=anno_table_recovered
1531     ! ;
1532       by descending recovered country_region;
1533       run;

NOTE: There were 191 observations read from the data set 
      WORK.ANNO_TABLE_RECOVERED.
NOTE: The data set WORK.ANNO_TABLE_RECOVERED has 191 observations and 
      2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1534       data anno_table_recovered; set anno_table_recovered
1534     ! (where=(recovered>0));
1535       run;
102                         The SAS System
                                           18:30 Sunday, April 12, 2020


NOTE: There were 166 observations read from the data set 
      WORK.ANNO_TABLE_RECOVERED.
      WHERE recovered>0;
NOTE: The data set WORK.ANNO_TABLE_RECOVERED has 166 observations and 
      2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1536       data anno_table_recovered; set anno_table_recovered (obs=13)
1536     ! ;
1537       if country_region='United Arab Emirates' then
1537     ! country_region='UAE';
1538       if country_region='Iran (Islamic Republic of)' then
1538     ! country_region='Iran';
1539       run;

NOTE: There were 13 observations read from the data set 
      WORK.ANNO_TABLE_RECOVERED.
NOTE: The data set WORK.ANNO_TABLE_RECOVERED has 13 observations and 2 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
103                         The SAS System
                                           18:30 Sunday, April 12, 2020


1540       data anno_table_recovered; set anno_table_recovered;
1541       length function $8 color $12 style $35 text $300 html $300;
1542       xsys='3'; ysys='3'; when='a'; hsys='d';
1543       function='label'; style='albany amt/bold'; size=11;
1544       y=98-(_n_*7);
1545       text=trim(left(put(recovered,comma12.0))); x=28;
1545     ! position='4'; color="cx71a81e"; output;
1546       text=trim(left(country_region)); x=x+5; position='6';
1546     ! color="graycc"; output;
1547       /* annotate an invisible box, for the html= mouse-over text
1547     ! */
1548       html='title='||quote(trim(left(put(recovered,comma12.0)))||"
1548     !  recovered from COVID-19 Coronavirus in
1548     ! "||trim(left(country_region)))||
1549        ' href='||quote('#'||trim(left(country_region)));
1550       function='move'; x=0; y=y-3; output;
1551       function='bar'; x=100; y=y+5; style='empty'; line=3;
1551     ! size=.001; color="pink"; output;
1552       run;

NOTE: There were 13 observations read from the data set 
      WORK.ANNO_TABLE_RECOVERED.
NOTE: The data set WORK.ANNO_TABLE_RECOVERED has 52 observations and 
      16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
104                         The SAS System
                                           18:30 Sunday, April 12, 2020

      cpu time            0.00 seconds
      

1553       data anno_table_recovered; set anno_table_recovered;
1554       output;
1555       if _n_=1 then do;
1556       /*
1557        style='albany amt'; color="graycc"; text='- top 13 -'; x=50
1557     ! ; y=y+6;  position='5'; output;
1558       */
1559        style='albany amt'; color="graycc"; text='- data ended
1559     ! March 22 -'; x=50; y=y+6;  position='5'; output;
1560        end;
1561       run;

NOTE: There were 52 observations read from the data set 
      WORK.ANNO_TABLE_RECOVERED.
NOTE: The data set WORK.ANNO_TABLE_RECOVERED has 53 observations and 
      16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1562       data anno_table_recovered; set anno_gray_background
1562     ! anno_table_recovered;
1563       run;
105                         The SAS System
                                           18:30 Sunday, April 12, 2020


NOTE: There were 2 observations read from the data set 
      WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 53 observations read from the data set 
      WORK.ANNO_TABLE_RECOVERED.
NOTE: The data set WORK.ANNO_TABLE_RECOVERED has 55 observations and 
      16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1564       proc gslide anno=anno_table_recovered des='' name='recotab';
1565       run;

NOTE: ERROR DETECTED IN ANNOTATE= DATASET WORK.ANNO_TABLE_RECOVERED.
NOTE: PROBLEM IN OBSERVATION     6 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    10 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    14 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    18 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    22 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    26 -
106                         The SAS System
                                           18:30 Sunday, April 12, 2020

      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    30 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    34 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    38 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    42 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    46 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    50 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    54 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
1566       
1567       
1568       /*---------------------------series-------------------------
1568     ! ---------------*/
1569       
1570       /* time series graph */
1571       
1572       /* xpixels=(69.5-15.5)/100*1400 ypixels=(34-1)/100*700 */
1573       goptions xpixels=756 ypixels=231;

NOTE: There were 55 observations read from the data set 
      WORK.ANNO_TABLE_RECOVERED.
107                         The SAS System
                                           18:30 Sunday, April 12, 2020

NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.08 seconds
      cpu time            0.03 seconds
      

1574       proc sql noprint;
1575       create table summarized_series as
1576       select unique snapshot, sum(confirmed) as confirmed
1577       from confirmed_data
1578       group by snapshot
1579       order by snapshot;
NOTE: Table WORK.SUMMARIZED_SERIES created, with 81 rows and 2 columns.

1580       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.03 seconds
      

1580     !       run;
1581       data summarized_series; set summarized_series;
1582       length html $300;
1583       html='title='||quote(
1584        trim(left(put(snapshot,weekdate30.)))||'0d'x||
1585        trim(left(put(confirmed,comma12.0)))||' confirmed cases'
1586        );
1587       run;
108                         The SAS System
                                           18:30 Sunday, April 12, 2020


NOTE: There were 81 observations read from the data set 
      WORK.SUMMARIZED_SERIES.
NOTE: The data set WORK.SUMMARIZED_SERIES has 81 observations and 3 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1588       /*
1589       There seems to be a bug in gplot mouseover text, when used
1589     ! in greplay in this way.
1590       Therefore I'm annotating 'invisible' circles around the
1590     ! gplot markers,
1591       with the html mouse-over on the annotated circles.
1592       */
1593       data anno_mouseover; set summarized_series;
1594       length function $8 color $12 style $35;
1595       xsys='2'; ysys='2'; hsys='3'; when='b';
1596       x=snapshot; y=confirmed;
1597       function='pie'; style='pempty'; size=3; rotate=360;
1597     ! color='gray22';
1598       html=trim(left(html))||' href='||quote('#newbar');
1599       run;

NOTE: There were 81 observations read from the data set 
109                         The SAS System
                                           18:30 Sunday, April 12, 2020

      WORK.SUMMARIZED_SERIES.
NOTE: The data set WORK.ANNO_MOUSEOVER has 81 observations and 14 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1600       proc sql noprint;
1601       select min(snapshot) format=date9. into :mindate from
1601     ! summarized_series;
1602       select max(snapshot) format=date9. into :maxdate from
1602     ! summarized_series;
1603       select max(snapshot)-min(snapshot) into :byval from
1603     ! summarized_series;
1604       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1604     !       run;
1605       axis1 value=(c=graycc h=11pt) label=none minor=none
1605     ! offset=(0,0);
1606       axis2 label=none order=("&mindate"d to "&maxdate"d by
1606     ! &byval)
1607        major=(height=8pt) value=(c=graycc h=11pt font='albany
110                         The SAS System
                                           18:30 Sunday, April 12, 2020

1607     ! amt')
1608        offset=(1,2);
1609       legend1 value=(c=graycc font="albany amt/bold" h=11pt)
1609     ! shape=symbol(4pct,4pct)
1610        label=(position=top font="albany amt/bold" h=11pt c=graycc
1610     ! "Total Confirmed Cases")
1611        position=(top left inside) mode=share across=1 repeat=2
1611     ! offset=(3pct, -8pct);
1612       symbol1 interpol=sm50 height=8pt width=2 color=red
1612     ! value=square;
1613       title1 h=2pct ' ';
1614       footnote1 h=2pct ' ';
1615       data anno_mouseover; set anno_mouseover anno_gray_background
1615     ! ;
1616       run;

NOTE: There were 81 observations read from the data set 
      WORK.ANNO_MOUSEOVER.
NOTE: There were 2 observations read from the data set 
      WORK.ANNO_GRAY_BACKGROUND.
NOTE: The data set WORK.ANNO_MOUSEOVER has 83 observations and 14 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

111                         The SAS System
                                           18:30 Sunday, April 12, 2020

1617       proc gplot data=summarized_series anno=anno_mouseover;
1618       format confirmed comma12.0;
1619       format snapshot nldate20.;
1620       note move=(15,77) font='albany amt/bold' "Total Confirmed
1620     ! Cases Worldwide";
1621       plot confirmed*snapshot /
1622        vaxis=axis1 haxis=axis2
1623        des='' name="series";
1624       run;

1625       
1626       
1627       /*----------------------------------------------------------
1627     ! ---------*/
1628       
1629       /*
1630       turn on display again, and replay all the individual graphs
1631       into a custom greplay template layout.
1632       */
1633       
1634       goptions display;
1635       
1636       %let border=gray44;
1637       goptions xpixels=1400 ypixels=700;

NOTE: There were 81 observations read from the data set 
      WORK.SUMMARIZED_SERIES.
112                         The SAS System
                                           18:30 Sunday, April 12, 2020

NOTE: There were 83 observations read from the data set 
      WORK.ANNO_MOUSEOVER.
NOTE: PROCEDURE GPLOT used (Total process time):
      real time           0.09 seconds
      cpu time            0.07 seconds
      

1638       proc greplay nofs igout=work.gseg tc=tempcat;
NOTE: Building list of graphs from the catalog.

NOTE: Enter greplay commands or statements.
1639          tdef dash des='COVID-19 Coronavirus Dashboard'
1640          0/ llx=0       lly=0
1641             ulx=0       uly=100
1642             urx=100     ury=100
1643             lrx=100     lry=0
1644          1/ llx=.5      lly=90
1645             ulx=.5      uly=99
1646             urx=99.5    ury=99
1647             lrx=99.5    lry=90
1648             color=&border
1649          2/ llx=.5      lly=75
1650             ulx=.5      uly=89
1651             urx=15      ury=89
1652             lrx=15      lry=75
1653             color=&border
1654          3/ llx=.5      lly=1
113                         The SAS System
                                           18:30 Sunday, April 12, 2020

1655             ulx=.5      uly=74
1656             urx=15      ury=74
1657             lrx=15      lry=1
1658             color=&border
1659          4/ llx=70      lly=75
1660             ulx=70      uly=89
1661             urx=84.5    ury=89
1662             lrx=84.5    lry=75
1663             color=&border
1664          5/ llx=70      lly=16
1665             ulx=70      uly=74
1666             urx=84.5    ury=74
1667             lrx=84.5    lry=16
1668             color=&border
1669          6/ llx=85      lly=75
1670             ulx=85      uly=89
1671             urx=99.5    ury=89
1672             lrx=99.5    lry=75
1673             color=&border
1674          7/ llx=85      lly=16
1675             ulx=85      uly=74
1676             urx=99.5    ury=74
1677             lrx=99.5    lry=16
1678             color=&border
1679          8/ llx=15.5    lly=35
1680             ulx=15.5    uly=89
1681             urx=69.5    ury=89
114                         The SAS System
                                           18:30 Sunday, April 12, 2020

1682             lrx=69.5    lry=35
1683             color=&border
1684          9/ llx=15.5    lly=1
1685             ulx=15.5    uly=34
1686             urx=69.5    ury=34
1687             lrx=69.5    lry=1
1688             color=&border
1689         10/ llx=70      lly=1
1690             ulx=70      uly=15
1691             urx=99.5    ury=15
1692             lrx=99.5    lry=1
1693             color=&border
1694          ;
1695          template dash;
1696          treplay
1697           9:series
1698           0:back
1699           1:title
1700           2:confsum
1701           3:conftab
1702           4:incsum
1703           5:incrtab
1704           6:deadsum
1705           7:deadtab
1706       /*
1707           7:recotab
1708       */
115                         The SAS System
                                           18:30 Sunday, April 12, 2020

1709           8:map
1710          10:info
1711           des='' name="&name";
NOTE: This SAS session is using a registry in WORK.  All changes will 
      be lost at the end of this session.
NOTE: Foreground color BLACK same as background. Part of your graph 
      might not be visible.
NOTE: 165774 bytes written to 
      U:\web\democd103\coronavirus_covid19_dashboard.png.
1712       run;

1713       
1714       /*
1714     ! ------------------------------------------------------------
1714     ! -------- */
1715       
1716       ods graphics /
1717        noscale /* if you don't use this option, the text will be
1717     ! resized */
1718        imagemap tipmax=2500
1719        imagefmt=png
1720        width=800px height=600px
1721        noborder;
1722       
1723       /*
1723     ! ------------------------------------------------------------
1723     ! -------- */
116                         The SAS System
                                           18:30 Sunday, April 12, 2020

1724       
1725       /*
1726       Create the bar chart, below the dashboard.
1727       */
1728       

NOTE: PROCEDURE GREPLAY used (Total process time):
      real time           0.58 seconds
      cpu time            0.43 seconds
      

1729       proc sql noprint;
1730       
1731       create table bar_confirmed as
1732       select unique snapshot, 'Confirmed' as type, sum(confirmed)
1732     ! as cumulative_cases
1733       from confirmed_data
1734       group by snapshot
1735       order by snapshot;
NOTE: Table WORK.BAR_CONFIRMED created, with 81 rows and 3 columns.

1736       
1737       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      
117                         The SAS System
                                           18:30 Sunday, April 12, 2020


1737     !       run;
1738       
1739       data bar_confirmed; set bar_confirmed;
1740       on_this_day=cumulative_cases-lag(cumulative_cases);
1741       run;

NOTE: Missing values were generated as a result of performing an 
      operation on missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      1 at 1740:29   
NOTE: There were 81 observations read from the data set 
      WORK.BAR_CONFIRMED.
NOTE: The data set WORK.BAR_CONFIRMED has 81 observations and 4 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1742       
1743       ods html anchor="newbar";
1744       ods graphics / imagename="coronavirus_covid19_newbar";
1745       
1746       title1 h=18pt font='albany amt/bold' c=gray33 "COVID-19
1746     ! Coronavirus - Number of new confirmed cases each day";
1747       title2 h=4pt ' ';
118                         The SAS System
                                           18:30 Sunday, April 12, 2020

1748       
1749       ods graphics / width=900px height=600px;
1750       
1751       proc sgplot data=bar_confirmed noborder;
1752       /*
1753       format snapshot nldate20.;
1754       */
1755       format snapshot nldate20.;
1756       format on_this_day comma10.0;
1757       label on_this_day='Cases on this day';
1758       vbarparm category=snapshot response=on_this_day /
1759        fillattrs=(color=orange)
1760        outlineattrs=(color=gray77)
1761        tip=(snapshot on_this_day)
1762        tipformat=(weekdate30. auto auto)
1763        ;
1764       yaxis display=(nolabel noline noticks)
1765        grid gridattrs=(pattern=dot color=gray88)
1766        valueattrs=(color=gray33 size=10pt)
1767       /* thresholdmax=1 */
1768        ;
1769       xaxis display=(nolabel)
1770        type=time values=("&mindate"d to "&maxdate"d by &byval)
1771        valueattrs=(color=gray33 size=10pt);
1772       run;

NOTE: PROCEDURE SGPLOT used (Total process time):
119                         The SAS System
                                           18:30 Sunday, April 12, 2020

      real time           1.24 seconds
      cpu time            0.06 seconds
      
NOTE: There were 81 observations read from the data set 
      WORK.BAR_CONFIRMED.

1773       
1774       
1775       /*
1775     ! ------------------------------------------------------------
1775     ! -------- */
1776       
1777       /*
1778       Create drilldown graphs for each country.
1779       We will jump to these graphs using html 'anchors' (by the
1779     ! name of the country)
1780       */
1781       
1782       proc sql noprint;
1783       
1784       create table graph_confirmed as
1785       select unique country_region, snapshot, sum(confirmed) as
1785     ! confirmed
1786       from confirmed_data
1787       group by country_region, snapshot
1788       order by country_region, snapshot;
NOTE: Table WORK.GRAPH_CONFIRMED created, with 15471 rows and 3 
120                         The SAS System
                                           18:30 Sunday, April 12, 2020

      columns.

1789       
1790       create table graph_recovered as
1791       select unique country_region, snapshot, sum(recovered) as
1791     ! recovered
1792       from recovered_data
1793       group by country_region, snapshot
1794       order by country_region, snapshot;
NOTE: Table WORK.GRAPH_RECOVERED created, with 15471 rows and 3 
      columns.

1795       
1796       create table graph_deaths as
1797       select unique country_region, snapshot, sum(deaths) as
1797     ! deaths
1798       from death_data
1799       group by country_region, snapshot
1800       order by country_region, snapshot;
NOTE: Table WORK.GRAPH_DEATHS created, with 15471 rows and 3 columns.

1801       
1802       
1803       create table graph_all as
1804       select unique graph_confirmed.*, graph_recovered.recovered
1805       from graph_confirmed left join graph_recovered
1806       on
121                         The SAS System
                                           18:30 Sunday, April 12, 2020

1806     ! (graph_confirmed.country_region=graph_recovered.country_regi
1806     ! on) and (graph_confirmed.snapshot=graph_recovered.snapshot);
NOTE: Table WORK.GRAPH_ALL created, with 15471 rows and 4 columns.

1807       
1808       create table graph_all as
1809       select unique graph_all.*, graph_deaths.deaths
1810       from graph_all left join graph_deaths
1811       on (graph_all.country_region=graph_deaths.country_region)
1811     ! and (graph_all.snapshot=graph_deaths.snapshot);
WARNING: This CREATE TABLE statement recursively references the target 
         table. A consequence of this is a possible data integrity 
         problem.
NOTE: Table WORK.GRAPH_ALL created, with 15471 rows and 5 columns.

1812       
1813       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.10 seconds
      cpu time            0.14 seconds
      

1813     !       run;
1814       
1815       data graph_all; set graph_all;
1816       if country_region='United Arab Emirates' then
1816     ! country_region='UAE';
122                         The SAS System
                                           18:30 Sunday, April 12, 2020

1817       if country_region='Iran (Islamic Republic of)' then
1817     ! country_region='Iran';
1818       run;

NOTE: There were 15471 observations read from the data set 
      WORK.GRAPH_ALL.
NOTE: The data set WORK.GRAPH_ALL has 15471 observations and 5 
      variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1819       
1820       proc sort data=graph_all out=graph_all;
1821       by country_region snapshot;
1822       run;

NOTE: There were 15471 observations read from the data set 
      WORK.GRAPH_ALL.
NOTE: The data set WORK.GRAPH_ALL has 15471 observations and 5 
      variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      

123                         The SAS System
                                           18:30 Sunday, April 12, 2020

1823       
1824       ods html anchor="#byval(country_region)";
1825       ods graphics /
1825     ! imagename="coronavirus_covid19_#byval(country_region)";
1826       
1827       options nobyline;
1828       title1 h=18pt font='albany amt/bold' c=gray33 "COVID-19
1828     ! Coronavirus cases in: #byval(country_region)";
1829       title2 h=4pt ' ';
1830       
1831       ods graphics / width=800px height=600px;
1832       proc sgplot data=graph_all noborder;
1833       by country_region;
1834       /*
1835       format snapshot nldate.;
1836       */
1837       format snapshot weekdate30.;
1838       format confirmed recovered deaths comma10.0;
1839       series y=confirmed x=snapshot / name='confirmed'
1840        lineattrs=(color=red thickness=2px)
1841        markers markerattrs=(color=red symbol=square);
1842       series y=deaths x=snapshot / name='deaths'
1843        lineattrs=(color=gray77 thickness=2px)
1844        markers markerattrs=(color=gray77 symbol=circle);
1845       keylegend 'confirmed' 'recovered' 'deaths' /
1846        location=inside position=topleft opaque border
1847        across=1 outerpad=(left=10pt top=10pt);
124                         The SAS System
                                           18:30 Sunday, April 12, 2020

1848       yaxis display=(nolabel noline noticks) min=0
1849        integer thresholdmax=1 grid gridattrs=(pattern=dot
1849     ! color=gray88)
1850        valueattrs=(color=gray33 size=10pt);
1851       xaxis display=(nolabel)
1852        type=time values=("&mindate"d to "&maxdate"d by &byval)
1853        valueattrs=(color=gray33 size=10pt);
1854       run;

NOTE: PROCEDURE SGPLOT used (Total process time):
      real time           18.50 seconds
      cpu time            6.10 seconds
      
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: The IMAGENAME option or the output name contains invalid 
         characters. coronavirus_covid19_Bonaire_ Sint Eustatius and 
         Saba will be used as the image name prefix.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
125                         The SAS System
                                           18:30 Sunday, April 12, 2020

         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: The IMAGENAME option or the output name contains invalid 
         characters. coronavirus_covid19_Congo _Brazzaville_ will be 
         used as the image name prefix.
WARNING: The IMAGENAME option or the output name contains invalid 
         characters. coronavirus_covid19_Congo _Kinshasa_ will be used 
         as the image name prefix.
WARNING: The IMAGENAME option or the output name contains invalid 
         characters. coronavirus_covid19_Cote d_Ivoire will be used as 
         the image name prefix.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
126                         The SAS System
                                           18:30 Sunday, April 12, 2020

         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: The IMAGENAME option or the output name contains invalid 
         characters. coronavirus_covid19_Korea_ South will be used as 
         the image name prefix.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
127                         The SAS System
                                           18:30 Sunday, April 12, 2020

         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: The IMAGENAME option or the output name contains invalid 
         characters. coronavirus_covid19_Taiwan_ will be used as the 
         image name prefix.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
         contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not 
128                         The SAS System
                                           18:30 Sunday, April 12, 2020

         contain all missing values.
NOTE: There were 15471 observations read from the data set 
      WORK.GRAPH_ALL.

1855       
1856       /*
1856     ! ------------------------------------------------------------
1856     ! ------ */
1857       
1858       /* We don't have Hong Kong and Macau in our world map */
1859       /* That's ok - those polygons would be too small to see
1859     ! anyway */
1860       /* They still get a red bubble. */
1861       /*
1862       */
1863       title "country_region names not in the map";
1864       proc print data=not_in_map (where=(country_region not in (
1865        'Monaco'
1866        'Macau'
1867        'Cabo Verde'
1868        'Macao SAR'
1869        'Hong Kong SAR'
1870        'North Ireland'
1871        'San Marino'
1872        'Channel Islands'
1873        'Taipei and environs'
1874        'occupied Palestinian territory'
129                         The SAS System
                                           18:30 Sunday, April 12, 2020

1875        'Cruise Ship'
1876        'Diamond Princess'
1877        'Republic of the Congo'
1878        'East Timor'
1879        'Timor-Leste'
1880        'West Bank and Gaza'
1881        'MS Zaandam'
1882        'Bonaire, Sint Eustatius and Saba'
1883        )));
1884       run;

NOTE: No observations were selected from data set WORK.NOT_IN_MAP.
NOTE: There were 0 observations read from the data set WORK.NOT_IN_MAP.
      WHERE country_region not in ('Bonaire, Sint Eustatius and Saba', 
      'Cabo Verde', 'Channel Islands', 'Cruise Ship', 'Diamond 
      Princess', 'East Timor', 'Hong Kong SAR', 'MS Zaandam', 'Macao 
      SAR', 'Macau', 'Monaco', 'North Ireland', 'Republic of the 
      Congo', 'San Marino', 'Taipei and environs', 'Timor-Leste', 
      'West Bank and Gaza', 'occupied Palestinian territory');
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1885       /*
1886       data foo; set mapsgfk.world_attr
1886     ! (where=(index(idname,'Venezuela')^=0));
130                         The SAS System
                                           18:30 Sunday, April 12, 2020

1887       run;
1888       proc print data=foo; run;
1889       proc print data=map_data; run;
1890       */
1891       
1892       quit;
1893       ODS HTML CLOSE;
1894       ODS LISTING;
NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           25.16 seconds
      cpu time            9.34 seconds
      
