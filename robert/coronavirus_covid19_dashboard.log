1                                                          The SAS System                            07:20 Wednesday, April 15, 2020

NOTE: Unable to open SASUSER.REGSTRY. WORK.REGSTRY will be opened instead.
NOTE: All registry changes will be lost at the end of the session.

WARNING: Unable to copy SASUSER registry to WORK registry. Because of this, you will not see registry customizations during this 
         session.
NOTE: Unable to open SASUSER.PROFILE. WORK.PROFILE will be opened instead.
NOTE: All profile changes will be lost at the end of the session.
NOTE: Copyright (c) 2016 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M6) 
      Licensed to SAS IT, Site 70068128.
NOTE: This session is executing on the X64_10PRO  platform.



NOTE: Analytical products:
      
      SAS/STAT 15.1
      SAS/ETS 15.1
      SAS/IML 15.1
      SAS/QC 15.1

WARNING: Your system is scheduled to expire on May 19, 2020, which is 34 days from now. The SAS System will no longer 
         function on or after that date. Please contact your SAS Installation Representative to obtain your updated SAS 
         Installation Data (SID) file, which includes SETINIT information.
To locate the name of your SAS Installation Representative go to http://support.sas.com/repfinder and provide your site 
number 70068128 and company name as SAS IT. On the SAS REP list provided, locate the REP for operating system Windows.
NOTE: Additional host information:

 X64_10PRO WIN 10.0.18362  Workstation

NOTE: SAS initialization used:
      real time           1.21 seconds
      cpu time            0.29 seconds
      

NOTE: AUTOEXEC processing beginning; file is U:\autoexec.sas.


NOTE: AUTOEXEC processing completed.

1          %let name=coronavirus_covid19_dashboard;
2          filename odsout '.';
3          
4          /*
5          Imitation/variation of Johns Hopkins dashboard:
6          https://gisanddata.maps.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ecf6
7          
8          https://github.com/CSSEGISandData/2019-nCoV/tree/master/time_series
9          https://github.com/CSSEGISandData/2019-nCoV/
10         
2                                                    The SAS System                       07:20 Wednesday, April 15, 2020

11         https://github.com/CSSEGISandData/COVID-19/tree/master/csse_covid_19_data/csse_covid_19_time_series
12         https://github.com/CSSEGISandData/COVID-19/
13         */
14         
15         /*
16         Make a local copy/clone of the GitHub data.
17         gitfn_clone() needs an empty folder, therefore use a new
18         folder name each time, with the date & time in the name.
19         */
20         /*
21         %let gitfolder=./github_clone_&sysdate9._%sysfunc(tranwrd(&systime,:,_));
22         %let gitfolder=./github_clone_17FEB2020;
23         */
24         
25         %let gitfolder=./github_clone_&sysdate9;
26         data _null_;
WARNING: The Base SAS Software product with which DATASTEP is associated will be expiring soon, and is currently in 
         warning mode to indicate this upcoming expiration. Please run PROC SETINIT to obtain more information on your 
         warning period.
27          rc = gitfn_clone("https://github.com/CSSEGISandData/COVID-19/",
28            "&gitfolder");
29          put rc=;
30         run;

rc=0
NOTE: DATA statement used (Total process time):
      real time           33.28 seconds
      cpu time            8.75 seconds
      

31         /*
32         */
33         
34         /*
35         John D. accesses the data like this:
36         https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/
36       ! time_series_19-covid-Confirmed.csv
37         */
38         
39         /* ------------------ Import the confirmed cases data ---------------------- */
40         
41         /*
42         filename confdata "./&gitfolder/time_series/time_series_2019-ncov-Confirmed.csv";
43         filename confdata
43       ! "./&gitfolder/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Confirmed.csv";
44         */
45         filename confdata
45       ! "./&gitfolder/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv";
46         proc import datafile=confdata
47          out=confirmed_data dbms=csv replace;
3                                                    The SAS System                       07:20 Wednesday, April 15, 2020

48         getnames=yes;
49         guessingrows=all;
50         run;

51          /**********************************************************************
52          *   PRODUCT:   SAS
53          *   VERSION:   9.4
54          *   CREATOR:   External File Interface
55          *   DATE:      15APR20
56          *   DESC:      Generated SAS Datastep Code
57          *   TEMPLATE SOURCE:  (None Specified.)
58          ***********************************************************************/
59             data WORK.CONFIRMED_DATA    ;
60             %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
61             infile CONFDATA delimiter = ',' MISSOVER DSD lrecl=32767 firstobs=2 ;
62                informat Province_State $34. ;
63                informat Country_Region $32. ;
64                informat Lat best32. ;
65                informat Long best32. ;
66                informat _1_22_20 best32. ;
67                informat _1_23_20 best32. ;
68                informat _1_24_20 best32. ;
69                informat _1_25_20 best32. ;
70                informat _1_26_20 best32. ;
71                informat _1_27_20 best32. ;
72                informat _1_28_20 best32. ;
73                informat _1_29_20 best32. ;
74                informat _1_30_20 best32. ;
75                informat _1_31_20 best32. ;
76                informat _2_1_20 best32. ;
77                informat _2_2_20 best32. ;
78                informat _2_3_20 best32. ;
79                informat _2_4_20 best32. ;
80                informat _2_5_20 best32. ;
81                informat _2_6_20 best32. ;
82                informat _2_7_20 best32. ;
83                informat _2_8_20 best32. ;
84                informat _2_9_20 best32. ;
85                informat _2_10_20 best32. ;
86                informat _2_11_20 best32. ;
87                informat _2_12_20 best32. ;
88                informat _2_13_20 best32. ;
89                informat _2_14_20 best32. ;
90                informat _2_15_20 best32. ;
91                informat _2_16_20 best32. ;
92                informat _2_17_20 best32. ;
93                informat _2_18_20 best32. ;
94                informat _2_19_20 best32. ;
95                informat _2_20_20 best32. ;
96                informat _2_21_20 best32. ;
4                                                    The SAS System                       07:20 Wednesday, April 15, 2020

97                informat _2_22_20 best32. ;
98                informat _2_23_20 best32. ;
99                informat _2_24_20 best32. ;
100               informat _2_25_20 best32. ;
101               informat _2_26_20 best32. ;
102               informat _2_27_20 best32. ;
103               informat _2_28_20 best32. ;
104               informat _2_29_20 best32. ;
105               informat _3_1_20 best32. ;
106               informat _3_2_20 best32. ;
107               informat _3_3_20 best32. ;
108               informat _3_4_20 best32. ;
109               informat _3_5_20 best32. ;
110               informat _3_6_20 best32. ;
111               informat _3_7_20 best32. ;
112               informat _3_8_20 best32. ;
113               informat _3_9_20 best32. ;
114               informat _3_10_20 best32. ;
115               informat _3_11_20 best32. ;
116               informat _3_12_20 best32. ;
117               informat _3_13_20 best32. ;
118               informat _3_14_20 best32. ;
119               informat _3_15_20 best32. ;
120               informat _3_16_20 best32. ;
121               informat _3_17_20 best32. ;
122               informat _3_18_20 best32. ;
123               informat _3_19_20 best32. ;
124               informat _3_20_20 best32. ;
125               informat _3_21_20 best32. ;
126               informat _3_22_20 best32. ;
127               informat _3_23_20 best32. ;
128               informat _3_24_20 best32. ;
129               informat _3_25_20 best32. ;
130               informat _3_26_20 best32. ;
131               informat _3_27_20 best32. ;
132               informat _3_28_20 best32. ;
133               informat _3_29_20 best32. ;
134               informat _3_30_20 best32. ;
135               informat _3_31_20 best32. ;
136               informat _4_1_20 best32. ;
137               informat _4_2_20 best32. ;
138               informat _4_3_20 best32. ;
139               informat _4_4_20 best32. ;
140               informat _4_5_20 best32. ;
141               informat _4_6_20 best32. ;
142               informat _4_7_20 best32. ;
143               informat _4_8_20 best32. ;
144               informat _4_9_20 best32. ;
145               informat _4_10_20 best32. ;
146               informat _4_11_20 best32. ;
5                                                    The SAS System                       07:20 Wednesday, April 15, 2020

147               informat _4_12_20 best32. ;
148               informat _4_13_20 best32. ;
149               informat _4_14_20 best32. ;
150               format Province_State $34. ;
151               format Country_Region $32. ;
152               format Lat best12. ;
153               format Long best12. ;
154               format _1_22_20 best12. ;
155               format _1_23_20 best12. ;
156               format _1_24_20 best12. ;
157               format _1_25_20 best12. ;
158               format _1_26_20 best12. ;
159               format _1_27_20 best12. ;
160               format _1_28_20 best12. ;
161               format _1_29_20 best12. ;
162               format _1_30_20 best12. ;
163               format _1_31_20 best12. ;
164               format _2_1_20 best12. ;
165               format _2_2_20 best12. ;
166               format _2_3_20 best12. ;
167               format _2_4_20 best12. ;
168               format _2_5_20 best12. ;
169               format _2_6_20 best12. ;
170               format _2_7_20 best12. ;
171               format _2_8_20 best12. ;
172               format _2_9_20 best12. ;
173               format _2_10_20 best12. ;
174               format _2_11_20 best12. ;
175               format _2_12_20 best12. ;
176               format _2_13_20 best12. ;
177               format _2_14_20 best12. ;
178               format _2_15_20 best12. ;
179               format _2_16_20 best12. ;
180               format _2_17_20 best12. ;
181               format _2_18_20 best12. ;
182               format _2_19_20 best12. ;
183               format _2_20_20 best12. ;
184               format _2_21_20 best12. ;
185               format _2_22_20 best12. ;
186               format _2_23_20 best12. ;
187               format _2_24_20 best12. ;
188               format _2_25_20 best12. ;
189               format _2_26_20 best12. ;
190               format _2_27_20 best12. ;
191               format _2_28_20 best12. ;
192               format _2_29_20 best12. ;
193               format _3_1_20 best12. ;
194               format _3_2_20 best12. ;
195               format _3_3_20 best12. ;
196               format _3_4_20 best12. ;
6                                                    The SAS System                       07:20 Wednesday, April 15, 2020

197               format _3_5_20 best12. ;
198               format _3_6_20 best12. ;
199               format _3_7_20 best12. ;
200               format _3_8_20 best12. ;
201               format _3_9_20 best12. ;
202               format _3_10_20 best12. ;
203               format _3_11_20 best12. ;
204               format _3_12_20 best12. ;
205               format _3_13_20 best12. ;
206               format _3_14_20 best12. ;
207               format _3_15_20 best12. ;
208               format _3_16_20 best12. ;
209               format _3_17_20 best12. ;
210               format _3_18_20 best12. ;
211               format _3_19_20 best12. ;
212               format _3_20_20 best12. ;
213               format _3_21_20 best12. ;
214               format _3_22_20 best12. ;
215               format _3_23_20 best12. ;
216               format _3_24_20 best12. ;
217               format _3_25_20 best12. ;
218               format _3_26_20 best12. ;
219               format _3_27_20 best12. ;
220               format _3_28_20 best12. ;
221               format _3_29_20 best12. ;
222               format _3_30_20 best12. ;
223               format _3_31_20 best12. ;
224               format _4_1_20 best12. ;
225               format _4_2_20 best12. ;
226               format _4_3_20 best12. ;
227               format _4_4_20 best12. ;
228               format _4_5_20 best12. ;
229               format _4_6_20 best12. ;
230               format _4_7_20 best12. ;
231               format _4_8_20 best12. ;
232               format _4_9_20 best12. ;
233               format _4_10_20 best12. ;
234               format _4_11_20 best12. ;
235               format _4_12_20 best12. ;
236               format _4_13_20 best12. ;
237               format _4_14_20 best12. ;
238            input
239                        Province_State  $
240                        Country_Region  $
241                        Lat
242                        Long
243                        _1_22_20
244                        _1_23_20
245                        _1_24_20
246                        _1_25_20
7                                                    The SAS System                       07:20 Wednesday, April 15, 2020

247                        _1_26_20
248                        _1_27_20
249                        _1_28_20
250                        _1_29_20
251                        _1_30_20
252                        _1_31_20
253                        _2_1_20
254                        _2_2_20
255                        _2_3_20
256                        _2_4_20
257                        _2_5_20
258                        _2_6_20
259                        _2_7_20
260                        _2_8_20
261                        _2_9_20
262                        _2_10_20
263                        _2_11_20
264                        _2_12_20
265                        _2_13_20
266                        _2_14_20
267                        _2_15_20
268                        _2_16_20
269                        _2_17_20
270                        _2_18_20
271                        _2_19_20
272                        _2_20_20
273                        _2_21_20
274                        _2_22_20
275                        _2_23_20
276                        _2_24_20
277                        _2_25_20
278                        _2_26_20
279                        _2_27_20
280                        _2_28_20
281                        _2_29_20
282                        _3_1_20
283                        _3_2_20
284                        _3_3_20
285                        _3_4_20
286                        _3_5_20
287                        _3_6_20
288                        _3_7_20
289                        _3_8_20
290                        _3_9_20
291                        _3_10_20
292                        _3_11_20
293                        _3_12_20
294                        _3_13_20
295                        _3_14_20
296                        _3_15_20
8                                                    The SAS System                       07:20 Wednesday, April 15, 2020

297                        _3_16_20
298                        _3_17_20
299                        _3_18_20
300                        _3_19_20
301                        _3_20_20
302                        _3_21_20
303                        _3_22_20
304                        _3_23_20
305                        _3_24_20
306                        _3_25_20
307                        _3_26_20
308                        _3_27_20
309                        _3_28_20
310                        _3_29_20
311                        _3_30_20
312                        _3_31_20
313                        _4_1_20
314                        _4_2_20
315                        _4_3_20
316                        _4_4_20
317                        _4_5_20
318                        _4_6_20
319                        _4_7_20
320                        _4_8_20
321                        _4_9_20
322                        _4_10_20
323                        _4_11_20
324                        _4_12_20
325                        _4_13_20
326                        _4_14_20
327            ;
328            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
329            run;

NOTE: The infile CONFDATA is:
      
      Filename=U:\web\democd103\.\github_clone_15APR2020\csse_covid_19_data\csse_covid_19_time_series\time_series_covid19
      _confirmed_global.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=69602,
      Last Modified=15Apr2020:07:21:13,
      Create Time=15Apr2020:07:21:13

NOTE: 264 records were read from the infile CONFDATA.
      The minimum record length was 183.
      The maximum record length was 517.
NOTE: The data set WORK.CONFIRMED_DATA has 264 observations and 88 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      
9                                                    The SAS System                       07:20 Wednesday, April 15, 2020


264 rows created in WORK.CONFIRMED_DATA from CONFDATA.
  
  
  
NOTE: WORK.CONFIRMED_DATA data set was successfully created.
NOTE: The data set WORK.CONFIRMED_DATA has 264 observations and 88 variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           1.50 seconds
      cpu time            0.40 seconds
      

330        
331        /* Needed, because of https://github.com/CSSEGISandData/COVID-19/issues/559 */
332        /* The state summary has no comma in the province_state variable - don't output those lines, or you'll
332      ! double-count) */
333        /*
334        data confirmed_data; set confirmed_data;
335        if country_region^='US' or (country_region='US' and (index(province_state,',')^=0 or province_state in
335      ! ('Diamond Princess' 'Grand Princess')))  then output;
336        run;
337        */
338        
339        proc transpose data=confirmed_data out=confirmed_data (rename=(_name_=datestring col1=confirmed));
340        by Province_State Country_Region Lat Long notsorted;
341        run;

NOTE: There were 264 observations read from the data set WORK.CONFIRMED_DATA.
NOTE: The data set WORK.CONFIRMED_DATA has 22176 observations and 6 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.06 seconds
      cpu time            0.01 seconds
      

342        
343        /* The date/timestamp is in a string - parse it apart, and create a real date variable */
344        data confirmed_data (drop = month day year datestring);
345         set confirmed_data;
346        Country_Region=trim(left(Country_Region));
347        if province_state='Curacao' then Country_Region='Curacao';
348        if province_state='Greenland' then Country_Region='Greenland';
349        if province_state='Faroe Islands' then Country_Region='Faroe Islands';
350        if province_state='Aruba' then Country_Region='Aruba';
351        if province_state='Sint Maarten' then Country_Region='Sint Maarten';
352        if province_state='Bonaire, Sint Eustatius and Saba' then Country_Region='Bonaire, Sint Eustatius and Saba';
353        if country_region='United Arab Emirates' then Country_Region='UAE';
354        if country_region='Iran (Islamic Republic of)' then country_region='Iran';
355        month=.; month=scan(datestring,1,'_');
356        day=.; day=scan(datestring,2,'_');
357        year=.; year=2000+scan(datestring,3,'_');
10                                                   The SAS System                       07:20 Wednesday, April 15, 2020

358        if confirmed=0 then confirmed=.;
359        format snapshot date9.;
360        snapshot=mdy(month,day,year);
361        run;

NOTE: Character values have been converted to numeric values at the places given by: (Line):(Column).
      355:16   356:12   357:19   
NOTE: There were 22176 observations read from the data set WORK.CONFIRMED_DATA.
NOTE: The data set WORK.CONFIRMED_DATA has 22176 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

362        /*
363        Create a table with just the latest date/timestamp.
364        You'll use this latest data in all but the timeseries plot.
365        */
366        proc sql noprint;
367        create table latest_confirmed as
368        select unique *
369        from confirmed_data
370        having snapshot=max(snapshot);
NOTE: The query requires remerging summary statistics back with the original data.
NOTE: Table WORK.LATEST_CONFIRMED created, with 264 rows and 6 columns.

371        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.09 seconds
      cpu time            0.00 seconds
      

371      !       run;
372        
373        /* Create macro variables with the data & time, to use in the title */
374        proc sql noprint;
375        select unique(snapshot) format=nldate20. into :datestr separated by ' ' from latest_confirmed;
376        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

376      !       run;
377        
378        /* save a copy of the dataset, to use in other programs */
379        libname robsdata '.';
NOTE: Libref ROBSDATA was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: U:\web\democd103
11                                                   The SAS System                       07:20 Wednesday, April 15, 2020

380        data robsdata.confirmed_data; set confirmed_data;
381        run;

NOTE: There were 22176 observations read from the data set WORK.CONFIRMED_DATA.
NOTE: The data set ROBSDATA.CONFIRMED_DATA has 22176 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.20 seconds
      cpu time            0.00 seconds
      

382        
383        /* ------------------ Import the deaths data ---------------------- */
384        
385        /*
386        filename deatdata "./&gitfolder/time_series/time_series_2019-ncov-Deaths.csv";
387        filename deatdata "./&gitfolder/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Deaths.csv";
388        */
389        filename deatdata
389      ! "./&gitfolder/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv";
390        proc import datafile=deatdata
391         out=death_data dbms=csv replace;
392        getnames=yes;
393        guessingrows=all;
394        run;

395         /**********************************************************************
396         *   PRODUCT:   SAS
397         *   VERSION:   9.4
398         *   CREATOR:   External File Interface
399         *   DATE:      15APR20
400         *   DESC:      Generated SAS Datastep Code
401         *   TEMPLATE SOURCE:  (None Specified.)
402         ***********************************************************************/
403            data WORK.DEATH_DATA    ;
404            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
405            infile DEATDATA delimiter = ',' MISSOVER DSD lrecl=32767 firstobs=2 ;
406               informat Province_State $34. ;
407               informat Country_Region $32. ;
408               informat Lat best32. ;
409               informat Long best32. ;
410               informat _1_22_20 best32. ;
411               informat _1_23_20 best32. ;
412               informat _1_24_20 best32. ;
413               informat _1_25_20 best32. ;
414               informat _1_26_20 best32. ;
415               informat _1_27_20 best32. ;
416               informat _1_28_20 best32. ;
417               informat _1_29_20 best32. ;
418               informat _1_30_20 best32. ;
419               informat _1_31_20 best32. ;
12                                                   The SAS System                       07:20 Wednesday, April 15, 2020

420               informat _2_1_20 best32. ;
421               informat _2_2_20 best32. ;
422               informat _2_3_20 best32. ;
423               informat _2_4_20 best32. ;
424               informat _2_5_20 best32. ;
425               informat _2_6_20 best32. ;
426               informat _2_7_20 best32. ;
427               informat _2_8_20 best32. ;
428               informat _2_9_20 best32. ;
429               informat _2_10_20 best32. ;
430               informat _2_11_20 best32. ;
431               informat _2_12_20 best32. ;
432               informat _2_13_20 best32. ;
433               informat _2_14_20 best32. ;
434               informat _2_15_20 best32. ;
435               informat _2_16_20 best32. ;
436               informat _2_17_20 best32. ;
437               informat _2_18_20 best32. ;
438               informat _2_19_20 best32. ;
439               informat _2_20_20 best32. ;
440               informat _2_21_20 best32. ;
441               informat _2_22_20 best32. ;
442               informat _2_23_20 best32. ;
443               informat _2_24_20 best32. ;
444               informat _2_25_20 best32. ;
445               informat _2_26_20 best32. ;
446               informat _2_27_20 best32. ;
447               informat _2_28_20 best32. ;
448               informat _2_29_20 best32. ;
449               informat _3_1_20 best32. ;
450               informat _3_2_20 best32. ;
451               informat _3_3_20 best32. ;
452               informat _3_4_20 best32. ;
453               informat _3_5_20 best32. ;
454               informat _3_6_20 best32. ;
455               informat _3_7_20 best32. ;
456               informat _3_8_20 best32. ;
457               informat _3_9_20 best32. ;
458               informat _3_10_20 best32. ;
459               informat _3_11_20 best32. ;
460               informat _3_12_20 best32. ;
461               informat _3_13_20 best32. ;
462               informat _3_14_20 best32. ;
463               informat _3_15_20 best32. ;
464               informat _3_16_20 best32. ;
465               informat _3_17_20 best32. ;
466               informat _3_18_20 best32. ;
467               informat _3_19_20 best32. ;
468               informat _3_20_20 best32. ;
469               informat _3_21_20 best32. ;
13                                                   The SAS System                       07:20 Wednesday, April 15, 2020

470               informat _3_22_20 best32. ;
471               informat _3_23_20 best32. ;
472               informat _3_24_20 best32. ;
473               informat _3_25_20 best32. ;
474               informat _3_26_20 best32. ;
475               informat _3_27_20 best32. ;
476               informat _3_28_20 best32. ;
477               informat _3_29_20 best32. ;
478               informat _3_30_20 best32. ;
479               informat _3_31_20 best32. ;
480               informat _4_1_20 best32. ;
481               informat _4_2_20 best32. ;
482               informat _4_3_20 best32. ;
483               informat _4_4_20 best32. ;
484               informat _4_5_20 best32. ;
485               informat _4_6_20 best32. ;
486               informat _4_7_20 best32. ;
487               informat _4_8_20 best32. ;
488               informat _4_9_20 best32. ;
489               informat _4_10_20 best32. ;
490               informat _4_11_20 best32. ;
491               informat _4_12_20 best32. ;
492               informat _4_13_20 best32. ;
493               informat _4_14_20 best32. ;
494               format Province_State $34. ;
495               format Country_Region $32. ;
496               format Lat best12. ;
497               format Long best12. ;
498               format _1_22_20 best12. ;
499               format _1_23_20 best12. ;
500               format _1_24_20 best12. ;
501               format _1_25_20 best12. ;
502               format _1_26_20 best12. ;
503               format _1_27_20 best12. ;
504               format _1_28_20 best12. ;
505               format _1_29_20 best12. ;
506               format _1_30_20 best12. ;
507               format _1_31_20 best12. ;
508               format _2_1_20 best12. ;
509               format _2_2_20 best12. ;
510               format _2_3_20 best12. ;
511               format _2_4_20 best12. ;
512               format _2_5_20 best12. ;
513               format _2_6_20 best12. ;
514               format _2_7_20 best12. ;
515               format _2_8_20 best12. ;
516               format _2_9_20 best12. ;
517               format _2_10_20 best12. ;
518               format _2_11_20 best12. ;
519               format _2_12_20 best12. ;
14                                                   The SAS System                       07:20 Wednesday, April 15, 2020

520               format _2_13_20 best12. ;
521               format _2_14_20 best12. ;
522               format _2_15_20 best12. ;
523               format _2_16_20 best12. ;
524               format _2_17_20 best12. ;
525               format _2_18_20 best12. ;
526               format _2_19_20 best12. ;
527               format _2_20_20 best12. ;
528               format _2_21_20 best12. ;
529               format _2_22_20 best12. ;
530               format _2_23_20 best12. ;
531               format _2_24_20 best12. ;
532               format _2_25_20 best12. ;
533               format _2_26_20 best12. ;
534               format _2_27_20 best12. ;
535               format _2_28_20 best12. ;
536               format _2_29_20 best12. ;
537               format _3_1_20 best12. ;
538               format _3_2_20 best12. ;
539               format _3_3_20 best12. ;
540               format _3_4_20 best12. ;
541               format _3_5_20 best12. ;
542               format _3_6_20 best12. ;
543               format _3_7_20 best12. ;
544               format _3_8_20 best12. ;
545               format _3_9_20 best12. ;
546               format _3_10_20 best12. ;
547               format _3_11_20 best12. ;
548               format _3_12_20 best12. ;
549               format _3_13_20 best12. ;
550               format _3_14_20 best12. ;
551               format _3_15_20 best12. ;
552               format _3_16_20 best12. ;
553               format _3_17_20 best12. ;
554               format _3_18_20 best12. ;
555               format _3_19_20 best12. ;
556               format _3_20_20 best12. ;
557               format _3_21_20 best12. ;
558               format _3_22_20 best12. ;
559               format _3_23_20 best12. ;
560               format _3_24_20 best12. ;
561               format _3_25_20 best12. ;
562               format _3_26_20 best12. ;
563               format _3_27_20 best12. ;
564               format _3_28_20 best12. ;
565               format _3_29_20 best12. ;
566               format _3_30_20 best12. ;
567               format _3_31_20 best12. ;
568               format _4_1_20 best12. ;
569               format _4_2_20 best12. ;
15                                                   The SAS System                       07:20 Wednesday, April 15, 2020

570               format _4_3_20 best12. ;
571               format _4_4_20 best12. ;
572               format _4_5_20 best12. ;
573               format _4_6_20 best12. ;
574               format _4_7_20 best12. ;
575               format _4_8_20 best12. ;
576               format _4_9_20 best12. ;
577               format _4_10_20 best12. ;
578               format _4_11_20 best12. ;
579               format _4_12_20 best12. ;
580               format _4_13_20 best12. ;
581               format _4_14_20 best12. ;
582            input
583                        Province_State  $
584                        Country_Region  $
585                        Lat
586                        Long
587                        _1_22_20
588                        _1_23_20
589                        _1_24_20
590                        _1_25_20
591                        _1_26_20
592                        _1_27_20
593                        _1_28_20
594                        _1_29_20
595                        _1_30_20
596                        _1_31_20
597                        _2_1_20
598                        _2_2_20
599                        _2_3_20
600                        _2_4_20
601                        _2_5_20
602                        _2_6_20
603                        _2_7_20
604                        _2_8_20
605                        _2_9_20
606                        _2_10_20
607                        _2_11_20
608                        _2_12_20
609                        _2_13_20
610                        _2_14_20
611                        _2_15_20
612                        _2_16_20
613                        _2_17_20
614                        _2_18_20
615                        _2_19_20
616                        _2_20_20
617                        _2_21_20
618                        _2_22_20
619                        _2_23_20
16                                                   The SAS System                       07:20 Wednesday, April 15, 2020

620                        _2_24_20
621                        _2_25_20
622                        _2_26_20
623                        _2_27_20
624                        _2_28_20
625                        _2_29_20
626                        _3_1_20
627                        _3_2_20
628                        _3_3_20
629                        _3_4_20
630                        _3_5_20
631                        _3_6_20
632                        _3_7_20
633                        _3_8_20
634                        _3_9_20
635                        _3_10_20
636                        _3_11_20
637                        _3_12_20
638                        _3_13_20
639                        _3_14_20
640                        _3_15_20
641                        _3_16_20
642                        _3_17_20
643                        _3_18_20
644                        _3_19_20
645                        _3_20_20
646                        _3_21_20
647                        _3_22_20
648                        _3_23_20
649                        _3_24_20
650                        _3_25_20
651                        _3_26_20
652                        _3_27_20
653                        _3_28_20
654                        _3_29_20
655                        _3_30_20
656                        _3_31_20
657                        _4_1_20
658                        _4_2_20
659                        _4_3_20
660                        _4_4_20
661                        _4_5_20
662                        _4_6_20
663                        _4_7_20
664                        _4_8_20
665                        _4_9_20
666                        _4_10_20
667                        _4_11_20
668                        _4_12_20
669                        _4_13_20
17                                                   The SAS System                       07:20 Wednesday, April 15, 2020

670                        _4_14_20
671            ;
672            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
673            run;

NOTE: The infile DEATDATA is:
      
      Filename=U:\web\democd103\.\github_clone_15APR2020\csse_covid_19_data\csse_covid_19_time_series\time_series_covid19
      _deaths_global.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=55792,
      Last Modified=15Apr2020:07:21:13,
      Create Time=15Apr2020:07:21:13

NOTE: 264 records were read from the infile DEATDATA.
      The minimum record length was 179.
      The maximum record length was 422.
NOTE: The data set WORK.DEATH_DATA has 264 observations and 88 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      

264 rows created in WORK.DEATH_DATA from DEATDATA.
  
  
  
NOTE: WORK.DEATH_DATA data set was successfully created.
NOTE: The data set WORK.DEATH_DATA has 264 observations and 88 variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.53 seconds
      cpu time            0.35 seconds
      

674        
675        /* Needed, because of https://github.com/CSSEGISandData/COVID-19/issues/559 */
676        /* The state summary has no comma in the province_state variable - don't output those lines, or you'll
676      ! double-count) */
677        /*
678        data death_data; set death_data;
679        if country_region^='US' or (country_region='US' and (index(province_state,',')^=0 or province_state in
679      ! ('Diamond Princess' 'Grand Princess')))  then output;
680        run;
681        */
682        
683        proc transpose data=death_data out=death_data (rename=(_name_=datestring col1=deaths));
684        by Province_State Country_Region Lat Long notsorted;
685        run;

NOTE: There were 264 observations read from the data set WORK.DEATH_DATA.
NOTE: The data set WORK.DEATH_DATA has 22176 observations and 6 variables.
18                                                   The SAS System                       07:20 Wednesday, April 15, 2020

NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

686        
687        /* The date/timestamp is in a string - parse it apart, and create a real date variable */
688        data death_data (drop = month day year datestring);
689         set death_data;
690        Country_Region=trim(left(Country_Region));
691        if province_state='Curacao' then Country_Region='Curacao';
692        if province_state='Greenland' then Country_Region='Greenland';
693        if province_state='Faroe Islands' then Country_Region='Faroe Islands';
694        if province_state='Aruba' then Country_Region='Aruba';
695        if province_state='Sint Maarten' then Country_Region='Sint Maarten';
696        if province_state='Bonaire, Sint Eustatius and Saba' then Country_Region='Bonaire, Sint Eustatius and Saba';
697        if Country_Region='United Arab Emirates' then Country_Region='UAE';
698        if country_region='Iran (Islamic Republic of)' then country_region='Iran';
699        month=.; month=scan(datestring,1,'_');
700        day=.; day=scan(datestring,2,'_');
701        year=.; year=2000+scan(datestring,3,'_');
702        if deaths=0 then deaths=.;
703        format snapshot date9.;
704        snapshot=mdy(month,day,year);
705        run;

NOTE: Character values have been converted to numeric values at the places given by: (Line):(Column).
      699:16   700:12   701:19   
NOTE: There were 22176 observations read from the data set WORK.DEATH_DATA.
NOTE: The data set WORK.DEATH_DATA has 22176 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

706        
707        proc sql noprint;
708        create table latest_deaths as
709        select unique *
710        from death_data
711        having snapshot=max(snapshot);
NOTE: The query requires remerging summary statistics back with the original data.
NOTE: Table WORK.LATEST_DEATHS created, with 264 rows and 6 columns.

712        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

19                                                   The SAS System                       07:20 Wednesday, April 15, 2020

712      !       run;
713        
714        
715        /* ------------------ Import the recovered cases data ---------------------- */
716        
717        /*
718        filename recodata "./&gitfolder/time_series/time_series_2019-ncov-Recovered.csv";
719        filename recodata
719      ! "./&gitfolder/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Recovered.csv";
720        */
721        filename recodata
721      ! "./&gitfolder/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_recovered_global.csv";
722        proc import datafile=recodata
723         out=recovered_data dbms=csv replace;
724        getnames=yes;
725        guessingrows=all;
726        run;

727         /**********************************************************************
728         *   PRODUCT:   SAS
729         *   VERSION:   9.4
730         *   CREATOR:   External File Interface
731         *   DATE:      15APR20
732         *   DESC:      Generated SAS Datastep Code
733         *   TEMPLATE SOURCE:  (None Specified.)
734         ***********************************************************************/
735            data WORK.RECOVERED_DATA    ;
736            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
737            infile RECODATA delimiter = ',' MISSOVER DSD lrecl=32767 firstobs=2 ;
738               informat Province_State $34. ;
739               informat Country_Region $32. ;
740               informat Lat best32. ;
741               informat Long best32. ;
742               informat _1_22_20 best32. ;
743               informat _1_23_20 best32. ;
744               informat _1_24_20 best32. ;
745               informat _1_25_20 best32. ;
746               informat _1_26_20 best32. ;
747               informat _1_27_20 best32. ;
748               informat _1_28_20 best32. ;
749               informat _1_29_20 best32. ;
750               informat _1_30_20 best32. ;
751               informat _1_31_20 best32. ;
752               informat _2_1_20 best32. ;
753               informat _2_2_20 best32. ;
754               informat _2_3_20 best32. ;
755               informat _2_4_20 best32. ;
756               informat _2_5_20 best32. ;
757               informat _2_6_20 best32. ;
758               informat _2_7_20 best32. ;
20                                                   The SAS System                       07:20 Wednesday, April 15, 2020

759               informat _2_8_20 best32. ;
760               informat _2_9_20 best32. ;
761               informat _2_10_20 best32. ;
762               informat _2_11_20 best32. ;
763               informat _2_12_20 best32. ;
764               informat _2_13_20 best32. ;
765               informat _2_14_20 best32. ;
766               informat _2_15_20 best32. ;
767               informat _2_16_20 best32. ;
768               informat _2_17_20 best32. ;
769               informat _2_18_20 best32. ;
770               informat _2_19_20 best32. ;
771               informat _2_20_20 best32. ;
772               informat _2_21_20 best32. ;
773               informat _2_22_20 best32. ;
774               informat _2_23_20 best32. ;
775               informat _2_24_20 best32. ;
776               informat _2_25_20 best32. ;
777               informat _2_26_20 best32. ;
778               informat _2_27_20 best32. ;
779               informat _2_28_20 best32. ;
780               informat _2_29_20 best32. ;
781               informat _3_1_20 best32. ;
782               informat _3_2_20 best32. ;
783               informat _3_3_20 best32. ;
784               informat _3_4_20 best32. ;
785               informat _3_5_20 best32. ;
786               informat _3_6_20 best32. ;
787               informat _3_7_20 best32. ;
788               informat _3_8_20 best32. ;
789               informat _3_9_20 best32. ;
790               informat _3_10_20 best32. ;
791               informat _3_11_20 best32. ;
792               informat _3_12_20 best32. ;
793               informat _3_13_20 best32. ;
794               informat _3_14_20 best32. ;
795               informat _3_15_20 best32. ;
796               informat _3_16_20 best32. ;
797               informat _3_17_20 best32. ;
798               informat _3_18_20 best32. ;
799               informat _3_19_20 best32. ;
800               informat _3_20_20 best32. ;
801               informat _3_21_20 best32. ;
802               informat _3_22_20 best32. ;
803               informat _3_23_20 best32. ;
804               informat _3_24_20 best32. ;
805               informat _3_25_20 best32. ;
806               informat _3_26_20 best32. ;
807               informat _3_27_20 best32. ;
808               informat _3_28_20 best32. ;
21                                                   The SAS System                       07:20 Wednesday, April 15, 2020

809               informat _3_29_20 best32. ;
810               informat _3_30_20 best32. ;
811               informat _3_31_20 best32. ;
812               informat _4_1_20 best32. ;
813               informat _4_2_20 best32. ;
814               informat _4_3_20 best32. ;
815               informat _4_4_20 best32. ;
816               informat _4_5_20 best32. ;
817               informat _4_6_20 best32. ;
818               informat _4_7_20 best32. ;
819               informat _4_8_20 best32. ;
820               informat _4_9_20 best32. ;
821               informat _4_10_20 best32. ;
822               informat _4_11_20 best32. ;
823               informat _4_12_20 best32. ;
824               informat _4_13_20 best32. ;
825               informat _4_14_20 best32. ;
826               format Province_State $34. ;
827               format Country_Region $32. ;
828               format Lat best12. ;
829               format Long best12. ;
830               format _1_22_20 best12. ;
831               format _1_23_20 best12. ;
832               format _1_24_20 best12. ;
833               format _1_25_20 best12. ;
834               format _1_26_20 best12. ;
835               format _1_27_20 best12. ;
836               format _1_28_20 best12. ;
837               format _1_29_20 best12. ;
838               format _1_30_20 best12. ;
839               format _1_31_20 best12. ;
840               format _2_1_20 best12. ;
841               format _2_2_20 best12. ;
842               format _2_3_20 best12. ;
843               format _2_4_20 best12. ;
844               format _2_5_20 best12. ;
845               format _2_6_20 best12. ;
846               format _2_7_20 best12. ;
847               format _2_8_20 best12. ;
848               format _2_9_20 best12. ;
849               format _2_10_20 best12. ;
850               format _2_11_20 best12. ;
851               format _2_12_20 best12. ;
852               format _2_13_20 best12. ;
853               format _2_14_20 best12. ;
854               format _2_15_20 best12. ;
855               format _2_16_20 best12. ;
856               format _2_17_20 best12. ;
857               format _2_18_20 best12. ;
858               format _2_19_20 best12. ;
22                                                   The SAS System                       07:20 Wednesday, April 15, 2020

859               format _2_20_20 best12. ;
860               format _2_21_20 best12. ;
861               format _2_22_20 best12. ;
862               format _2_23_20 best12. ;
863               format _2_24_20 best12. ;
864               format _2_25_20 best12. ;
865               format _2_26_20 best12. ;
866               format _2_27_20 best12. ;
867               format _2_28_20 best12. ;
868               format _2_29_20 best12. ;
869               format _3_1_20 best12. ;
870               format _3_2_20 best12. ;
871               format _3_3_20 best12. ;
872               format _3_4_20 best12. ;
873               format _3_5_20 best12. ;
874               format _3_6_20 best12. ;
875               format _3_7_20 best12. ;
876               format _3_8_20 best12. ;
877               format _3_9_20 best12. ;
878               format _3_10_20 best12. ;
879               format _3_11_20 best12. ;
880               format _3_12_20 best12. ;
881               format _3_13_20 best12. ;
882               format _3_14_20 best12. ;
883               format _3_15_20 best12. ;
884               format _3_16_20 best12. ;
885               format _3_17_20 best12. ;
886               format _3_18_20 best12. ;
887               format _3_19_20 best12. ;
888               format _3_20_20 best12. ;
889               format _3_21_20 best12. ;
890               format _3_22_20 best12. ;
891               format _3_23_20 best12. ;
892               format _3_24_20 best12. ;
893               format _3_25_20 best12. ;
894               format _3_26_20 best12. ;
895               format _3_27_20 best12. ;
896               format _3_28_20 best12. ;
897               format _3_29_20 best12. ;
898               format _3_30_20 best12. ;
899               format _3_31_20 best12. ;
900               format _4_1_20 best12. ;
901               format _4_2_20 best12. ;
902               format _4_3_20 best12. ;
903               format _4_4_20 best12. ;
904               format _4_5_20 best12. ;
905               format _4_6_20 best12. ;
906               format _4_7_20 best12. ;
907               format _4_8_20 best12. ;
908               format _4_9_20 best12. ;
23                                                   The SAS System                       07:20 Wednesday, April 15, 2020

909               format _4_10_20 best12. ;
910               format _4_11_20 best12. ;
911               format _4_12_20 best12. ;
912               format _4_13_20 best12. ;
913               format _4_14_20 best12. ;
914            input
915                        Province_State  $
916                        Country_Region  $
917                        Lat
918                        Long
919                        _1_22_20
920                        _1_23_20
921                        _1_24_20
922                        _1_25_20
923                        _1_26_20
924                        _1_27_20
925                        _1_28_20
926                        _1_29_20
927                        _1_30_20
928                        _1_31_20
929                        _2_1_20
930                        _2_2_20
931                        _2_3_20
932                        _2_4_20
933                        _2_5_20
934                        _2_6_20
935                        _2_7_20
936                        _2_8_20
937                        _2_9_20
938                        _2_10_20
939                        _2_11_20
940                        _2_12_20
941                        _2_13_20
942                        _2_14_20
943                        _2_15_20
944                        _2_16_20
945                        _2_17_20
946                        _2_18_20
947                        _2_19_20
948                        _2_20_20
949                        _2_21_20
950                        _2_22_20
951                        _2_23_20
952                        _2_24_20
953                        _2_25_20
954                        _2_26_20
955                        _2_27_20
956                        _2_28_20
957                        _2_29_20
958                        _3_1_20
24                                                   The SAS System                       07:20 Wednesday, April 15, 2020

959                        _3_2_20
960                        _3_3_20
961                        _3_4_20
962                        _3_5_20
963                        _3_6_20
964                        _3_7_20
965                        _3_8_20
966                        _3_9_20
967                        _3_10_20
968                        _3_11_20
969                        _3_12_20
970                        _3_13_20
971                        _3_14_20
972                        _3_15_20
973                        _3_16_20
974                        _3_17_20
975                        _3_18_20
976                        _3_19_20
977                        _3_20_20
978                        _3_21_20
979                        _3_22_20
980                        _3_23_20
981                        _3_24_20
982                        _3_25_20
983                        _3_26_20
984                        _3_27_20
985                        _3_28_20
986                        _3_29_20
987                        _3_30_20
988                        _3_31_20
989                        _4_1_20
990                        _4_2_20
991                        _4_3_20
992                        _4_4_20
993                        _4_5_20
994                        _4_6_20
995                        _4_7_20
996                        _4_8_20
997                        _4_9_20
998                        _4_10_20
999                        _4_11_20
1000                       _4_12_20
1001                       _4_13_20
1002                       _4_14_20
1003           ;
1004           if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
1005           run;

NOTE: The infile RECODATA is:
      
25                                                   The SAS System                       07:20 Wednesday, April 15, 2020

      Filename=U:\web\democd103\.\github_clone_15APR2020\csse_covid_19_data\csse_covid_19_time_series\time_series_covid19
      _recovered_global.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=58416,
      Last Modified=15Apr2020:07:21:13,
      Create Time=15Apr2020:07:21:13

NOTE: 250 records were read from the infile RECODATA.
      The minimum record length was 184.
      The maximum record length was 479.
NOTE: The data set WORK.RECOVERED_DATA has 250 observations and 88 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

250 rows created in WORK.RECOVERED_DATA from RECODATA.
  
  
  
NOTE: WORK.RECOVERED_DATA data set was successfully created.
NOTE: The data set WORK.RECOVERED_DATA has 250 observations and 88 variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.52 seconds
      cpu time            0.28 seconds
      

1006       
1007       /* Needed, because of https://github.com/CSSEGISandData/COVID-19/issues/559 */
1008       /* The state summary has no comma in the province_state variable - don't output those lines, or you'll
1008     ! double-count) */
1009       /*
1010       data recovered_data; set recovered_data;
1011       if country_region^='US' or (country_region='US' and (index(province_state,',')^=0 or province_state in
1011     ! ('Diamond Princess' 'Grand Princess')))  then output;
1012       run;
1013       */
1014       
1015       proc transpose data=recovered_data out=recovered_data (rename=(_name_=datestring col1=recovered));
1016       by Province_State Country_Region Lat Long notsorted;
1017       run;

NOTE: There were 250 observations read from the data set WORK.RECOVERED_DATA.
NOTE: The data set WORK.RECOVERED_DATA has 21000 observations and 6 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1018       
1019       /* The date/timestamp is in a string - parse it apart, and create a real date variable */
26                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1020       data recovered_data (drop = month day year datestring);
1021        set recovered_data;
1022       Country_Region=trim(left(Country_Region));
1023       if province_state='Curacao' then Country_Region='Curacao';
1024       if province_state='Greenland' then Country_Region='Greenland';
1025       if province_state='Faroe Islands' then Country_Region='Faroe Islands';
1026       if province_state='Aruba' then Country_Region='Aruba';
1027       if province_state='Sint Maarten' then Country_Region='Sint Maarten';
1028       if province_state='Bonaire, Sint Eustatius and Saba' then Country_Region='Bonaire, Sint Eustatius and Saba';
1029       if Country_Region='United Arab Emirates' then Country_Region='UAE';
1030       if country_region='Iran (Islamic Republic of)' then country_region='Iran';
1031       month=.; month=scan(datestring,1,'_');
1032       day=.; day=scan(datestring,2,'_');
1033       year=.; year=2000+scan(datestring,3,'_');
1034       if recovered=0 then recovered=.;
1035       format snapshot dateampm.;
1036       snapshot=mdy(month,day,year);
1037       run;

NOTE: Character values have been converted to numeric values at the places given by: (Line):(Column).
      1031:16   1032:12   1033:19   
NOTE: There were 21000 observations read from the data set WORK.RECOVERED_DATA.
NOTE: The data set WORK.RECOVERED_DATA has 21000 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

1038       
1039       proc sql noprint;
1040       create table latest_recovered as
1041       select unique *
1042       from recovered_data
1043       having snapshot=max(snapshot);
NOTE: The query requires remerging summary statistics back with the original data.
NOTE: Table WORK.LATEST_RECOVERED created, with 250 rows and 6 columns.

1044       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1044     !       run;
1045       
1046       
1047       proc sql noprint;
1048       create table confirmed_increase as
1049       select unique country_region, snapshot, sum(confirmed) as confirmed
1050       from confirmed_data
27                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1051       group by country_region, snapshot
1052       order by country_region, snapshot;
NOTE: Table WORK.CONFIRMED_INCREASE created, with 16044 rows and 3 columns.

1053       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
      

1053     !       run;
1054       data confirmed_increase; set confirmed_increase;
1055       confirmed_this_day=confirmed-lag(confirmed);
1056       if country_region^=lag(country_region) then confirmed_this_day=.;
1057       run;

NOTE: Missing values were generated as a result of performing an operation on missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      8260 at 1055:29   
NOTE: There were 16044 observations read from the data set WORK.CONFIRMED_INCREASE.
NOTE: The data set WORK.CONFIRMED_INCREASE has 16044 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1058       proc sql noprint;
1059       create table latest_increase as
1060       select unique snapshot, country_region, confirmed_this_day
1061       from confirmed_increase
1062       having snapshot=max(snapshot);
NOTE: The query requires remerging summary statistics back with the original data.
NOTE: Table WORK.LATEST_INCREASE created, with 191 rows and 3 columns.

1063       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1063     !       run;
1064       
1065       
1066       /* ----------------------------------------------------------------------- */
1067       
1068       
1069       goptions device=png;
1070       goptions border;
1071       
1072       ODS LISTING CLOSE;
28                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1073       ODS html path=odsout body="&name..htm"
1074        (title="COVID-19 Coronavirus Dashboard")
1075        style=htmlblue;
NOTE: Writing HTML Body file: coronavirus_covid19_dashboard.htm
1076       
1077       goptions gunit=pct ftitle='albany amt/bold' ftext='albany amt' htitle=28pt htext=12pt;
1078       goptions cback=black ctext=graycc;
1079       
1080       /* Create the individual graphs, but don't display them (yet) */
1081       goptions nodisplay;
1082       
1083       /*-------------------------------------------------------------------*/
1084       
1085       goptions xpixels=1400 ypixels=700;
1086       data anno_black_background;
1087       length function $8 color $12 style $35;
1088       xsys='3'; ysys='3'; when='b';
1089       function='move'; x=0; y=0; output;
1090       function='bar'; x=100; y=100; style='solid'; color="black"; output;
1091       run;

NOTE: The data set WORK.ANNO_BLACK_BACKGROUND has 2 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1092       
1093       /* this is the medium graph background used behind each graph */
1094       data anno_gray_background; set anno_black_background;
1095       color="gray22";
1096       run;

NOTE: There were 2 observations read from the data set WORK.ANNO_BLACK_BACKGROUND.
NOTE: The data set WORK.ANNO_GRAY_BACKGROUND has 2 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1097       
1098       /* this is the dark/black background, behind the entire dashboard */
1099       proc gslide anno=anno_black_background
WARNING: The SAS/GRAPH product with which GSLIDE is associated will be expiring soon, and is currently in warning mode 
         to indicate this upcoming expiration. Please run PROC SETINIT to obtain more information on your warning period.
1100        des='' name='back';
1101       run;

1102       
1103       title;
29                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1104       
1105       
1106       /*-----------------------------title--------------------------------------*/
1107       
1108       /* Use annotate & gslide to create a long/skinny title slide */
1109       
1110       /* xpixels=(99.5-.5)/100*1400 ypixels=(99-90)/100*700 */
1111       goptions xpixels=1386 ypixels=63;

NOTE: There were 2 observations read from the data set WORK.ANNO_BLACK_BACKGROUND.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.25 seconds
      cpu time            0.04 seconds
      

1112       data anno_title;
1113       length function $8 color $12 style $35 text $300 html $300;
1114       xsys='3'; ysys='3'; when='a'; hsys='d';
1115       function='label'; position='6'; color="graycc";
1116       html='title='||quote("COVID-19 Coronavirus dashboard - &datestr snapshot");
1117       size=20; x=2; y=60; text="COVID-19 Coronavirus Global Cases"; output;
1118       size=14; x=44; y=53; text="&datestr snapshot"; output;
1119       run;

NOTE: Variable style is uninitialized.
NOTE: The data set WORK.ANNO_TITLE has 2 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

1120       data anno_title; set anno_gray_background anno_title;
1121       run;

NOTE: There were 2 observations read from the data set WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 2 observations read from the data set WORK.ANNO_TITLE.
NOTE: The data set WORK.ANNO_TITLE has 4 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

1122       proc gslide anno=anno_title des='' name='title';
1123       run;

1124       
1125       
1126       /*-----------------------------info--------------------------------------*/
1127       
1128       /* Use annotated text in a gslide to create the info box in bottom/right corner */
30                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1129       
1130       /* xpixels=(99.5-70)/100*1400 ypixels=(15-1)/100*700 */
1131       goptions xpixels=413 ypixels=98;

NOTE: There were 4 observations read from the data set WORK.ANNO_TITLE.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.09 seconds
      cpu time            0.04 seconds
      

1132       data anno_info;
1133       length function $8 color $12 style $35 text $300 html $300;
1134       xsys='3'; ysys='3'; when='a'; hsys='d';
1135       function='label'; position='6';
1136       size=11;
1137       
1138       y=87; html=''; function='label';
1139       x=3; color="graycc"; style="albany amt"; text="Visualization by: "; output;
1140       html='target="cor2"
1140     ! href='||quote('https://blogs.sas.com/content/graphicallyspeaking/2020/02/03/improving-the-wuhan-coronavirus-da
1140     ! shboard/');
1141       x=30; color="dodgerblue"; style="albany amt/bold"; text="Robert Allison using SAS Software"; output;
1142       
1143       y=y-24; html='';
1144       x=3; color="graycc"; style="albany amt"; text="Designed after: "; output;
1145       html='target="cor2"
1145     ! href='||quote('https://gisanddata.maps.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ec
1145     ! f6');
1146       x=29; color="dodgerblue"; style="albany amt/bold"; text="Johns Hopkins dashboard"; output;
1147       
1148       y=y-24; html='';
1149       x=3; color="graycc"; style="albany amt"; text="Data sources: "; output;
1150       html='target="cor2"
1150     ! href='||quote('https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports');
1151       x=28; color="dodgerblue"; style="albany amt/bold"; text="WHO,"; output;
1152       html='target="cor2" href='||quote('https://www.cdc.gov/coronavirus/2019-ncov/index.html');
1153       x=x+11; color="dodgerblue"; text="CDC,"; output;
1154       html='target="cor2" href='||quote('https://www.ecdc.europa.eu/en/geographical-distribution-2019-ncov-cases');
1155       x=x+10; color="dodgerblue"; text="ECDC,"; output;
1156       html='target="cor2" href='||quote('http://www.nhc.gov.cn/yjb/s3578/new_list.shtml');
1157       x=x+13; color="dodgerblue"; text="NHC,"; output;
1158       html='target="cor2"
1158     ! href='||quote('https://3g.dxy.cn/newh5/view/pneumonia?scene=2&clicktime=1579582238&enterid=1579582238&from=sin
1158     ! glemessage&isappinstalled=0');
1159       x=x+10; color="dodgerblue"; text="and DXY"; output;
1160       
1161       y=y-24; html='';
1162       x=3; color="graycc"; style="albany amt"; text="Data: "; output;
1163       html='target="cor2"
1163     ! href='||quote('https://github.com/CSSEGISandData/COVID-19/tree/master/csse_covid_19_data/csse_covid_19_time_se
31                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1163     ! ries');
1164       x=14; color="dodgerblue"; style="albany amt/bold"; text="GitHub"; output;
1165       
1166       run;

NOTE: The data set WORK.ANNO_INFO has 12 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1167       data anno_info; set anno_gray_background anno_info;
1168       run;

NOTE: There were 2 observations read from the data set WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 12 observations read from the data set WORK.ANNO_INFO.
NOTE: The data set WORK.ANNO_INFO has 14 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1169       proc gslide anno=anno_info des='' name='info';
1170       run;

1171       
1172       
1173       /*----------------------------confsum---------------------------------------*/
1174       
1175       /* this is the grand sum (large number) over the confirmed table */
1176       
1177       /* xpixels=(15-.5)/100*1400  ypixels=(89-75)/100*700 */
1178       goptions xpixels=203 ypixels=98;
1179       

NOTE: There were 14 observations read from the data set WORK.ANNO_INFO.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.10 seconds
      cpu time            0.07 seconds
      

1180       proc sql noprint;
1181       create table anno_confirmed_total as
1182       select sum(confirmed) as sum_confirmed from latest_confirmed;
NOTE: Table WORK.ANNO_CONFIRMED_TOTAL created, with 1 rows and 1 columns.

1183       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
32                                                   The SAS System                       07:20 Wednesday, April 15, 2020

      

1183     !       run;
1184       data anno_confirmed_total; set anno_confirmed_total;
1185       length function $8 color $12 style $35 text $300 html $300;
1186       xsys='3'; ysys='3'; when='a'; hsys='d';
1187       function='label'; position='5';
1188       style='albany amt/bold'; color="graycc"; size=11;
1189       x=50; y=84; text="Total Confirmed"; output;
1190       html='title='||quote(trim(left(put(sum_confirmed,comma12.0)))||" total confirmed cases of COVID-19 Coronavirus
1190     !  worldwide");
1191       style='albany amt/bold'; color="red"; size=31;
1192       x=50; y=50; text=trim(left(put(sum_confirmed,comma12.0))); output;
1193       run;

NOTE: There were 1 observations read from the data set WORK.ANNO_CONFIRMED_TOTAL.
NOTE: The data set WORK.ANNO_CONFIRMED_TOTAL has 2 observations and 14 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      

1194       data anno_confirmed_total; set anno_gray_background anno_confirmed_total;
1195       run;

NOTE: There were 2 observations read from the data set WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 2 observations read from the data set WORK.ANNO_CONFIRMED_TOTAL.
NOTE: The data set WORK.ANNO_CONFIRMED_TOTAL has 4 observations and 14 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

1196       proc gslide anno=anno_confirmed_total des='' name='confsum';
1197       run;

1198       
1199       /*------------------------------deadsum-------------------------------------*/
1200       
1201       /* this is the grand sum (large number) over the deaths table */
1202       
1203       goptions xpixels=203 ypixels=98;

NOTE: There were 4 observations read from the data set WORK.ANNO_CONFIRMED_TOTAL.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.10 seconds
      cpu time            0.07 seconds
      

1204       proc sql noprint;
33                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1205       create table anno_deaths_total as
1206       select sum(deaths) as sum_deaths from latest_deaths;
NOTE: Table WORK.ANNO_DEATHS_TOTAL created, with 1 rows and 1 columns.

1207       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

1207     !       run;
1208       data anno_deaths_total; set anno_deaths_total;
1209       length function $8 color $12 style $35 text $300 html $300;
1210       xsys='3'; ysys='3'; when='a'; hsys='d';
1211       function='label'; position='5';
1212       style='albany amt/bold'; color="graycc"; size=11;
1213       x=50; y=84; text="Total Deaths"; output;
1214       html='title='||quote(trim(left(put(sum_deaths,comma12.0)))||" deaths from COVID-19 Coronavirus worldwide");
1215       style='albany amt/bold'; color="white"; size=40;
1216       x=50; y=50; text=trim(left(put(sum_deaths,comma12.0))); output;
1217       run;

NOTE: There were 1 observations read from the data set WORK.ANNO_DEATHS_TOTAL.
NOTE: The data set WORK.ANNO_DEATHS_TOTAL has 2 observations and 14 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1218       data anno_deaths_total; set anno_gray_background anno_deaths_total;
1219       run;

NOTE: There were 2 observations read from the data set WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 2 observations read from the data set WORK.ANNO_DEATHS_TOTAL.
NOTE: The data set WORK.ANNO_DEATHS_TOTAL has 4 observations and 14 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

1220       proc gslide anno=anno_deaths_total des='' name='deadsum';
1221       run;

1222       
1223       
1224       /*------------------------------recosum-------------------------------------*/
1225       
1226       /* this is the grand sum (large number) over the recovered table */
1227       
1228       goptions xpixels=203 ypixels=98;
34                                                   The SAS System                       07:20 Wednesday, April 15, 2020


NOTE: There were 4 observations read from the data set WORK.ANNO_DEATHS_TOTAL.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.09 seconds
      cpu time            0.01 seconds
      

1229       proc sql noprint;
1230       create table anno_recovered_total as
1231       select sum(recovered) as sum_recovered from latest_recovered;
NOTE: Table WORK.ANNO_RECOVERED_TOTAL created, with 1 rows and 1 columns.

1232       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1232     !       run;
1233       data anno_recovered_total; set anno_recovered_total;
1234       length function $8 color $12 style $35 text $300 html $300;
1235       xsys='3'; ysys='3'; when='a'; hsys='d';
1236       function='label'; position='5';
1237       style='albany amt/bold'; color="graycc"; size=11;
1238       x=50; y=84; text="Total Recovered"; output;
1239       html='title='||quote(trim(left(put(sum_recovered,comma12.0)))||" recovered from COVID-19 Coronavirus
1239     ! worldwide");
1240       style='albany amt/bold'; color="cx71a81e"; size=40;
1241       x=50; y=50; text=trim(left(put(sum_recovered,comma12.0))); output;
1242       run;

NOTE: There were 1 observations read from the data set WORK.ANNO_RECOVERED_TOTAL.
NOTE: The data set WORK.ANNO_RECOVERED_TOTAL has 2 observations and 14 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1243       data anno_recovered_total; set anno_gray_background anno_recovered_total;
1244       run;

NOTE: There were 2 observations read from the data set WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 2 observations read from the data set WORK.ANNO_RECOVERED_TOTAL.
NOTE: The data set WORK.ANNO_RECOVERED_TOTAL has 4 observations and 14 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1245       proc gslide anno=anno_recovered_total des='' name='recosum';
35                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1246       run;

1247       
1248       /*------------------------------incsum-------------------------------------*/
1249       
1250       goptions xpixels=203 ypixels=98;

NOTE: There were 4 observations read from the data set WORK.ANNO_RECOVERED_TOTAL.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.09 seconds
      cpu time            0.06 seconds
      

1251       proc sql noprint;
1252       create table anno_increase_total as
1253       select sum(confirmed_this_day) as sum_increase from latest_increase;
NOTE: Table WORK.ANNO_INCREASE_TOTAL created, with 1 rows and 1 columns.

1254       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1254     !       run;
1255       data anno_increase_total; set anno_increase_total;
1256       length function $8 color $12 style $35 text $300 html $300;
1257       xsys='3'; ysys='3'; when='a'; hsys='d';
1258       function='label'; position='5';
1259       style='albany amt/bold'; color="graycc"; size=11;
1260       x=50; y=84; text="New Cases Today"; output;
1261       html='title='||quote(trim(left(put(sum_increase,comma12.0)))||" increase in COVID-19 Coronavirus cases
1261     ! worldwide on &datestr");
1262       style='albany amt/bold'; color="orange"; size=40;
1263       x=50; y=50; text=trim(left(put(sum_increase,comma12.0))); output;
1264       run;

NOTE: There were 1 observations read from the data set WORK.ANNO_INCREASE_TOTAL.
NOTE: The data set WORK.ANNO_INCREASE_TOTAL has 2 observations and 14 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1265       data anno_increase_total; set anno_gray_background anno_increase_total;
1266       run;

NOTE: There were 2 observations read from the data set WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 2 observations read from the data set WORK.ANNO_INCREASE_TOTAL.
NOTE: The data set WORK.ANNO_INCREASE_TOTAL has 4 observations and 14 variables.
36                                                   The SAS System                       07:20 Wednesday, April 15, 2020

NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1267       proc gslide anno=anno_increase_total des='' name='incsum';
1268       run;

1269       
1270       
1271       
1272       /*----------------------------map---------------------------------------*/
1273       
1274       /* World map, with annotated red bubbles */
1275       
1276       /* xpixels=(69.5-15.5)/100*1400  ypixels=(89-35)/100*700 */
1277       goptions xpixels=756 ypixels=378;
1278       

NOTE: There were 4 observations read from the data set WORK.ANNO_INCREASE_TOTAL.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.09 seconds
      cpu time            0.04 seconds
      

1279       proc sql noprint;
1280       create table map_data as
1281       select unique country_region, avg(lat) as lat, avg(long) as long, sum(confirmed) as confirmed
1282       from latest_confirmed
1283       group by country_region;
NOTE: Table WORK.MAP_DATA created, with 191 rows and 4 columns.

1284       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1284     !       run;
1285       
1286       data map_data; set map_data;
1287       /* if the average lat/long doesn't land in a good position, hard-code one */
1288       if country_region='Canada' then do;
1289        lat=52.7765273; long=-107.4818132;
1290        end;
1291       if country_region='Sweden' then do;
1292        lat=63.7425748; long=16.5564647;
1293        end;
1294       if country_region='Russia' then do;
1295        lat=55.4645521; long=37.3415677;
37                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1296        end;
1297       if country_region='United Kingdom' then do;
1298        lat=53.7970459; long=-1.5191599;
1299        end;
1300       if country_region='France' then do;
1301        lat=48.8283932; long=2.3443639;
1302        end;
1303       if country_region='Mauritania' then do;
1304        lat=19.5488367; long=-10.3433656;
1305        end;
1306       /* https://github.com/CSSEGISandData/COVID-19/issues/836 */
1307       if country_region='Congo (Brazzaville)' then do;
1308        lat=-0.7134667; long=15.7399857;
1309        end;
1310       length html $300;
1311       html=
1312        'title='||quote(
1313         trim(left(country_region))||'0d'x||
1314         trim(left(put(confirmed,comma12.0)))||' confirmed cases')||
1315        ' href='||quote('#'||trim(left(country_region)));
1316       run;

NOTE: There were 191 observations read from the data set WORK.MAP_DATA.
NOTE: The data set WORK.MAP_DATA has 191 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1317       
1318       /* The country names have to match in the data & map, for the choro map */
1319       /* So, let's make our SAS map names match the names in the data. */
1320       data my_map; set mapsgfk.world (where=((density<=2 or
1321        idname in ('Vatican City State' 'Gibraltar' 'San Marino' 'Monaco'))
1322        and idname^='Antarctica') drop=resolution);
NOTE: The map data sets in library MAPSGFK are based on the digital maps from GfK GeoMarketing and are covered by their 
      Copyright. For additional information, see http://support.sas.com/mapsonline/gfklicense.
1323       length country_region $100;
1324       country_region=idname;
1325       if idname='China/Taiwan_POC' then country_region='Taiwan*';
1326       if idname='United States' then country_region='US';
1327       if idname='Bolivia, Plurinational State of' then country_region='Bolivia';
1328       if idname='Russian Federation' then country_region='Russia';
1329       if idname='Viet Nam' then country_region='Vietnam';
1330       if idname='United Arab Emirates' then country_region='UAE';
1331       if idname='Macedonia' then country_region='North Macedonia';
1332       if idname='Brunei Darussalam' then country_region='Brunei';
1333       if idname='Vatican City State' then country_region='Holy See';
1334       if idname='South Korea' then country_region='Korea, South';
1335       if idname='Czech Republic' then country_region='Czechia';
38                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1336       if idname='Ivory Coast' then country_region="Cote d'Ivoire";
1337       if idname='Swaziland' then country_region='Eswatini';
1338       if idname='Venezuela, Bolivarian Republic of' then country_region='Venezuela';
1339       if idname='Bailiwick of Jersey' then country_region='Jersey';
1340       if idname='Bailiwick of Guernsey' then country_region='Guernsey';
1341       if idname='Myanmar' then country_region='Burma';
1342       /*
1343       if idname='Bahamas' then country_region='The Bahamas';
1344       if idname='Bahamas' then country_region='Bahamas, The';
1345       */
1346       if idname='Tanzania, United Republic of' then country_region='Tanzania';
1347       if idname='Democratic Republic of Congo' then country_region='Congo (Kinshasa)';
1348       if idname='Congo' then country_region='Congo (Brazzaville)';
1349       /*
1350       if idname='Gambia' then country_region='Gambia, The';
1351       if idname='Congo' then country_region='Republic of the Congo';
1352       */
1353       run;

NOTE: There were 44075 observations read from the data set MAPSGFK.WORLD.
      WHERE ((density<=2) or idname in ('Gibraltar', 'Monaco', 'San Marino', 'Vatican City State')) and (idname not = 
      'Antarctica');
NOTE: The data set WORK.MY_MAP has 44075 observations and 13 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
      

1354       /*
1355       if idname='China/Taiwan_POC' then country_region='Taiwan';
1356       if idname='Moldova' then country_region='Republic of Moldova';
1357       if idname='China' then country_region='Mainland China';
1358       if idname='United Kingdom' then country_region='UK';
1359       if idname='South Korea' then country_region='Republic of Korea';
1360       */
1361       
1362       /*
1363       Some code to help find the matches...
1364       proc print data=mapsgfk.world (where=(index(idname,'Vatican')^=0)); run;
1365       */
1366       proc gproject data=my_map out=my_map latlong eastlong degrees
1367        project=miller2 parmout=projparm;
1368       id country_region;
1369       run;

NOTE: The MILLER2 projection is experimental.
NOTE: POLELAT = 12.255794.
NOTE: POLELONG = 0.000411.
NOTE: The data set WORK.PROJPARM has 1 observations and 9 variables.
NOTE: There were 44075 observations read from the data set WORK.MY_MAP.
39                                                   The SAS System                       07:20 Wednesday, April 15, 2020

NOTE: The data set WORK.MY_MAP has 44075 observations and 13 variables.
NOTE: PROCEDURE GPROJECT used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

1370       /* Project the bubble lat/longs the same way you did the map */
1371       proc gproject data=map_data out=map_data latlong eastlong degrees
1372        parmin=projparm parmentry=my_map;
1373       id;
1374       run;

NOTE: Using default parameters for entry MY_MAP from data set WORK.PROJPARM. Use NOPARMIN option to disable this feature.
NOTE: POLELAT = 12.255794.
NOTE: POLELONG = 0.000411.
NOTE: There were 191 observations read from the data set WORK.MAP_DATA.
NOTE: The data set WORK.MAP_DATA has 191 observations and 7 variables.
NOTE: PROCEDURE GPROJECT used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      

1375       
1376       /* these control the size of the blue bubbles */
1377       %let max_val=500000;  /* maximum number of confirmed cases (will correspond to maximum bubble size) */
1378       %let max_area=80; /* maximum bubble size (area) */
1379       proc sort data=map_data out=anno_bubbles;
1380       by descending confirmed;
1381       run;

NOTE: There were 191 observations read from the data set WORK.MAP_DATA.
NOTE: The data set WORK.ANNO_BUBBLES has 191 observations and 7 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1382       data anno_bubbles; set anno_bubbles;
1383       length function $8 color $12 style $35 text $300 html $300;
1384       xsys='2'; ysys='2'; hsys='3'; when='a';
1385       function='pie'; rotate=360; style='psolid'; color="red";
1386       size=.3+sqrt((confirmed/&max_val)*&max_area/3.14);
1387       output;
1388       /* gray outline around bubbles (especially important for overlapping bubbles */
1389       size=size+.1;
1390       style='pempty';
1391       color='gray77';
1392       html='';
1393       output;
1394       run;
40                                                   The SAS System                       07:20 Wednesday, April 15, 2020


NOTE: Variable text is uninitialized.
NOTE: There were 191 observations read from the data set WORK.ANNO_BUBBLES.
NOTE: The data set WORK.ANNO_BUBBLES has 382 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1395       
1396       data anno_bubbles; set anno_gray_background anno_bubbles;
1397       run;

NOTE: There were 2 observations read from the data set WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 382 observations read from the data set WORK.ANNO_BUBBLES.
NOTE: The data set WORK.ANNO_BUBBLES has 384 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1398       pattern1 v=s c=gray99;
1399       proc gmap data=map_data map=my_map all anno=anno_bubbles;
1400       id country_region;
1401       choro confirmed / levels=1 nolegend
1402        cdefault=gray55 coutline=gray77
1403        html=html
1404        des='' name='map';
1405       run;

WARNING: ID variable Country_Region is of length 32 in response data set and length 100 in map data set.  This might 
         result in ID values not matching or multiple regions to be combined.

NOTE: There were 44075 observations read from the data set WORK.MY_MAP.
NOTE: There were 384 observations read from the data set WORK.ANNO_BUBBLES.
NOTE: PROCEDURE GMAP used (Total process time):
      real time           0.12 seconds
      cpu time            0.09 seconds
      

1406       proc sql noprint;
1407       create table not_in_map as
1408       select unique country_region
1409       from map_data
1410       where country_region not in (select unique country_region from my_map);
NOTE: Table WORK.NOT_IN_MAP created, with 5 rows and 1 columns.

1411       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.04 seconds
41                                                   The SAS System                       07:20 Wednesday, April 15, 2020

      cpu time            0.01 seconds
      

1411     !       run;
1412       
1413       
1414       /*--------------------------conftab-----------------------------------------*/
1415       
1416       /* confirmed table */
1417       
1418       /* xpixels=(15-.5)/100*1400 ypixels=(74-1)/100*700 */
1419       goptions xpixels=203 ypixels=511;
1420       proc sql noprint;
1421       create table anno_table_confirmed as
1422       select unique country_region, sum(confirmed) as confirmed
1423       from latest_confirmed
1424       group by country_region;
NOTE: Table WORK.ANNO_TABLE_CONFIRMED created, with 191 rows and 2 columns.

1425       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1425     !       run;
1426       proc sort data=anno_table_confirmed out=anno_table_confirmed;
1427       by descending confirmed country_region;
1428       run;

NOTE: There were 191 observations read from the data set WORK.ANNO_TABLE_CONFIRMED.
NOTE: The data set WORK.ANNO_TABLE_CONFIRMED has 191 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1429       data anno_table_confirmed; set anno_table_confirmed (obs=16);
1430       if country_region='United Arab Emirates' then country_region='UAE';
1431       if country_region='Iran (Islamic Republic of)' then country_region='Iran';
1432       run;

NOTE: There were 16 observations read from the data set WORK.ANNO_TABLE_CONFIRMED.
NOTE: The data set WORK.ANNO_TABLE_CONFIRMED has 16 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1433       data anno_table_confirmed; set anno_table_confirmed;
42                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1434       length function $8 color $12 style $35 text $300 html $300;
1435       xsys='3'; ysys='3'; when='a'; hsys='d';
1436       function='label'; style='albany amt/bold'; size=11;
1437       y=99-(_n_*6);
1438       text=trim(left(put(confirmed,comma12.0))); x=28; position='4'; color="red"; output;
1439       text=trim(left(country_region)); x=x+5; position='6'; color="graycc"; output;
1440       /* annotate an invisible box, for the html= mouse-over text */
1441       html='title='||quote(trim(left(put(confirmed,comma12.0)))||" confirmed cases of COVID-19 Coronavirus in
1441     ! "||trim(left(country_region)))||
1442        ' href='||quote('#'||trim(left(country_region)));
1443       function='move'; x=0; y=y-3; output;
1444       function='bar'; x=100; y=y+5; style='empty'; line=3; size=.001; color="pink"; output;
1445       run;

NOTE: There were 16 observations read from the data set WORK.ANNO_TABLE_CONFIRMED.
NOTE: The data set WORK.ANNO_TABLE_CONFIRMED has 64 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1446       data anno_table_confirmed; set anno_table_confirmed;
1447       output;
1448       if _n_=1 then do;
1449        style='albany amt'; color="graycc"; text='- top 16 -'; x=50; y=y+5;  position='5'; output;
1450        end;
1451       run;

NOTE: There were 64 observations read from the data set WORK.ANNO_TABLE_CONFIRMED.
NOTE: The data set WORK.ANNO_TABLE_CONFIRMED has 65 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1452       data anno_table_confirmed; set anno_gray_background anno_table_confirmed;
1453       run;

NOTE: There were 2 observations read from the data set WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 65 observations read from the data set WORK.ANNO_TABLE_CONFIRMED.
NOTE: The data set WORK.ANNO_TABLE_CONFIRMED has 67 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1454       proc gslide anno=anno_table_confirmed des='' name='conftab';
1455       run;

NOTE: ERROR DETECTED IN ANNOTATE= DATASET WORK.ANNO_TABLE_CONFIRMED.
43                                                   The SAS System                       07:20 Wednesday, April 15, 2020

NOTE: PROBLEM IN OBSERVATION     6 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    10 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    14 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    18 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    22 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    26 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    30 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    34 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    38 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    42 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    46 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    50 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    54 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    58 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    62 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    66 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
1456       
1457       
1458       /*---------------------------deadtab----------------------------------------*/
1459       
1460       /* dead table */
1461       
1462       /* xpixels=(84.5-70)/100*1400 ypixels=(74-16)/100*700 */
1463       goptions xpixels=203 ypixels=406;

NOTE: There were 67 observations read from the data set WORK.ANNO_TABLE_CONFIRMED.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.10 seconds
      cpu time            0.04 seconds
      

1464       proc sql noprint;
1465       create table anno_table_deaths as
1466       select unique country_region, sum(deaths) as deaths
44                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1467       from latest_deaths
1468       group by country_region;
NOTE: Table WORK.ANNO_TABLE_DEATHS created, with 191 rows and 2 columns.

1469       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1469     !       run;
1470       proc sort data=anno_table_deaths out=anno_table_deaths;
1471       by descending deaths country_region;
1472       run;

NOTE: There were 191 observations read from the data set WORK.ANNO_TABLE_DEATHS.
NOTE: The data set WORK.ANNO_TABLE_DEATHS has 191 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1473       data anno_table_deaths; set anno_table_deaths (where=(deaths>0));
1474       run;

NOTE: There were 153 observations read from the data set WORK.ANNO_TABLE_DEATHS.
      WHERE deaths>0;
NOTE: The data set WORK.ANNO_TABLE_DEATHS has 153 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1475       data anno_table_deaths; set anno_table_deaths (obs=13);
1476       if country_region='United Arab Emirates' then country_region='UAE';
1477       if country_region='Iran (Islamic Republic of)' then country_region='Iran';
1478       run;

NOTE: There were 13 observations read from the data set WORK.ANNO_TABLE_DEATHS.
NOTE: The data set WORK.ANNO_TABLE_DEATHS has 13 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1479       data anno_table_deaths; set anno_table_deaths;
1480       length function $8 color $12 style $35 text $300 html $300;
1481       xsys='3'; ysys='3'; when='a'; hsys='d';
1482       function='label'; style='albany amt/bold'; size=11;
1483       y=98-(_n_*7);
45                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1484       text=trim(left(put(deaths,comma12.0))); x=28; position='4'; color="white"; output;
1485       text=trim(left(country_region)); x=x+5; position='6'; color="graycc"; output;
1486       /* annotate an invisible box, for the html= mouse-over text */
1487       html='title='||quote(trim(left(put(deaths,comma12.0)))||" deaths from COVID-19 Coronavirus in
1487     ! "||trim(left(country_region)))||
1488        ' href='||quote('#'||trim(left(country_region)));
1489       function='move'; x=0; y=y-3; output;
1490       function='bar'; x=100; y=y+5; style='empty'; line=3; size=.001; color="pink"; output;
1491       run;

NOTE: There were 13 observations read from the data set WORK.ANNO_TABLE_DEATHS.
NOTE: The data set WORK.ANNO_TABLE_DEATHS has 52 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1492       data anno_table_deaths; set anno_table_deaths;
1493       output;
1494       if _n_=1 then do;
1495        style='albany amt'; color="graycc"; text='- top 13 -'; x=50; y=y+6;  position='5'; output;
1496        end;
1497       run;

NOTE: There were 52 observations read from the data set WORK.ANNO_TABLE_DEATHS.
NOTE: The data set WORK.ANNO_TABLE_DEATHS has 53 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1498       data anno_table_deaths; set anno_gray_background anno_table_deaths;
1499       run;

NOTE: There were 2 observations read from the data set WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 53 observations read from the data set WORK.ANNO_TABLE_DEATHS.
NOTE: The data set WORK.ANNO_TABLE_DEATHS has 55 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1500       proc gslide anno=anno_table_deaths des='' name='deadtab';
1501       run;

NOTE: ERROR DETECTED IN ANNOTATE= DATASET WORK.ANNO_TABLE_DEATHS.
NOTE: PROBLEM IN OBSERVATION     6 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    10 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
46                                                   The SAS System                       07:20 Wednesday, April 15, 2020

NOTE: PROBLEM IN OBSERVATION    14 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    18 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    22 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    26 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    30 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    34 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    38 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    42 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    46 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    50 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    54 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
1502       
1503       
1504       /*---------------------------inctab----------------------------------------*/
1505       
1506       /* daily increase table */
1507       
1508       goptions xpixels=203 ypixels=406;

NOTE: There were 55 observations read from the data set WORK.ANNO_TABLE_DEATHS.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.10 seconds
      cpu time            0.07 seconds
      

1509       proc sort data=latest_increase out=anno_table_increase;
1510       by descending confirmed_this_day country_region;
1511       run;

NOTE: There were 191 observations read from the data set WORK.LATEST_INCREASE.
NOTE: The data set WORK.ANNO_TABLE_INCREASE has 191 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1512       data anno_table_increase; set anno_table_increase (where=(confirmed_this_day>0));
1513       run;

47                                                   The SAS System                       07:20 Wednesday, April 15, 2020

NOTE: There were 132 observations read from the data set WORK.ANNO_TABLE_INCREASE.
      WHERE confirmed_this_day>0;
NOTE: The data set WORK.ANNO_TABLE_INCREASE has 132 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1514       data anno_table_increase; set anno_table_increase (obs=13);
1515       if country_region='United Arab Emirates' then country_region='UAE';
1516       if country_region='Iran (Islamic Republic of)' then country_region='Iran';
1517       run;

NOTE: There were 13 observations read from the data set WORK.ANNO_TABLE_INCREASE.
NOTE: The data set WORK.ANNO_TABLE_INCREASE has 13 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1518       
1519       data anno_table_increase; set anno_table_increase;
1520       length function $8 color $12 style $35 text $300 html $300;
1521       xsys='3'; ysys='3'; when='a'; hsys='d';
1522       function='label'; style='albany amt/bold'; size=11;
1523       y=98-(_n_*7);
1524       /* green was cx71a81e */
1525       text=trim(left(put(confirmed_this_day,comma12.0))); x=28; position='4'; color="orange"; output;
1526       text=trim(left(country_region)); x=x+5; position='6'; color="graycc"; output;
1527       /* annotate an invisible box, for the html= mouse-over text */
1528       html='title='||quote(trim(left(put(confirmed_this_day,comma12.0)))||
1529        " increase in COVID-19 Coronavirus in "||trim(left(country_region))||' on
1529     ! '||trim(left(put(snapshot,nldate20.))))||
1530        ' href='||quote('#'||trim(left(country_region)));
1531       function='move'; x=0; y=y-3; output;
1532       function='bar'; x=100; y=y+5; style='empty'; line=3; size=.001; color="pink"; output;
1533       run;

NOTE: There were 13 observations read from the data set WORK.ANNO_TABLE_INCREASE.
NOTE: The data set WORK.ANNO_TABLE_INCREASE has 52 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1534       data anno_table_increase; set anno_table_increase;
1535       output;
1536       if _n_=1 then do;
1537        style='albany amt'; color="graycc"; text='- top 13 -'; x=50; y=y+6;  position='5'; output;
1538        end;
48                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1539       run;

NOTE: There were 52 observations read from the data set WORK.ANNO_TABLE_INCREASE.
NOTE: The data set WORK.ANNO_TABLE_INCREASE has 53 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1540       data anno_table_increase; set anno_gray_background anno_table_increase;
1541       run;

NOTE: There were 2 observations read from the data set WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 53 observations read from the data set WORK.ANNO_TABLE_INCREASE.
NOTE: The data set WORK.ANNO_TABLE_INCREASE has 55 observations and 17 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1542       proc gslide anno=anno_table_increase des='' name='incrtab';
1543       run;

NOTE: ERROR DETECTED IN ANNOTATE= DATASET WORK.ANNO_TABLE_INCREASE.
NOTE: PROBLEM IN OBSERVATION     6 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    10 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    14 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    18 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    22 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    26 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    30 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    34 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    38 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    42 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    46 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    50 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    54 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
49                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1544       
1545       
1546       
1547       /*---------------------------recotab----------------------------------------*/
1548       
1549       /* recovered table */
1550       
1551       goptions xpixels=203 ypixels=406;

NOTE: There were 55 observations read from the data set WORK.ANNO_TABLE_INCREASE.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.09 seconds
      cpu time            0.07 seconds
      

1552       proc sql noprint;
1553       create table anno_table_recovered as
1554       select unique country_region, sum(recovered) as recovered
1555       from latest_recovered
1556       group by country_region;
NOTE: Table WORK.ANNO_TABLE_RECOVERED created, with 191 rows and 2 columns.

1557       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1557     !       run;
1558       proc sort data=anno_table_recovered out=anno_table_recovered;
1559       by descending recovered country_region;
1560       run;

NOTE: There were 191 observations read from the data set WORK.ANNO_TABLE_RECOVERED.
NOTE: The data set WORK.ANNO_TABLE_RECOVERED has 191 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1561       data anno_table_recovered; set anno_table_recovered (where=(recovered>0));
1562       run;

NOTE: There were 170 observations read from the data set WORK.ANNO_TABLE_RECOVERED.
      WHERE recovered>0;
NOTE: The data set WORK.ANNO_TABLE_RECOVERED has 170 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
50                                                   The SAS System                       07:20 Wednesday, April 15, 2020


1563       data anno_table_recovered; set anno_table_recovered (obs=13);
1564       if country_region='United Arab Emirates' then country_region='UAE';
1565       if country_region='Iran (Islamic Republic of)' then country_region='Iran';
1566       run;

NOTE: There were 13 observations read from the data set WORK.ANNO_TABLE_RECOVERED.
NOTE: The data set WORK.ANNO_TABLE_RECOVERED has 13 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

1567       data anno_table_recovered; set anno_table_recovered;
1568       length function $8 color $12 style $35 text $300 html $300;
1569       xsys='3'; ysys='3'; when='a'; hsys='d';
1570       function='label'; style='albany amt/bold'; size=11;
1571       y=98-(_n_*7);
1572       text=trim(left(put(recovered,comma12.0))); x=28; position='4'; color="cx71a81e"; output;
1573       text=trim(left(country_region)); x=x+5; position='6'; color="graycc"; output;
1574       /* annotate an invisible box, for the html= mouse-over text */
1575       html='title='||quote(trim(left(put(recovered,comma12.0)))||" recovered from COVID-19 Coronavirus in
1575     ! "||trim(left(country_region)))||
1576        ' href='||quote('#'||trim(left(country_region)));
1577       function='move'; x=0; y=y-3; output;
1578       function='bar'; x=100; y=y+5; style='empty'; line=3; size=.001; color="pink"; output;
1579       run;

NOTE: There were 13 observations read from the data set WORK.ANNO_TABLE_RECOVERED.
NOTE: The data set WORK.ANNO_TABLE_RECOVERED has 52 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1580       data anno_table_recovered; set anno_table_recovered;
1581       output;
1582       if _n_=1 then do;
1583       /*
1584        style='albany amt'; color="graycc"; text='- top 13 -'; x=50; y=y+6;  position='5'; output;
1585       */
1586        style='albany amt'; color="graycc"; text='- data ended March 22 -'; x=50; y=y+6;  position='5'; output;
1587        end;
1588       run;

NOTE: There were 52 observations read from the data set WORK.ANNO_TABLE_RECOVERED.
NOTE: The data set WORK.ANNO_TABLE_RECOVERED has 53 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
51                                                   The SAS System                       07:20 Wednesday, April 15, 2020

      

1589       data anno_table_recovered; set anno_gray_background anno_table_recovered;
1590       run;

NOTE: There were 2 observations read from the data set WORK.ANNO_GRAY_BACKGROUND.
NOTE: There were 53 observations read from the data set WORK.ANNO_TABLE_RECOVERED.
NOTE: The data set WORK.ANNO_TABLE_RECOVERED has 55 observations and 16 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1591       proc gslide anno=anno_table_recovered des='' name='recotab';
1592       run;

NOTE: ERROR DETECTED IN ANNOTATE= DATASET WORK.ANNO_TABLE_RECOVERED.
NOTE: PROBLEM IN OBSERVATION     6 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    10 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    14 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    18 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    22 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    26 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    30 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    34 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    38 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    42 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    46 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    50 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
NOTE: PROBLEM IN OBSERVATION    54 -
      HSYS="D" is valid only for text functions. HSYS changed to '4'.
1593       
1594       
1595       /*---------------------------series----------------------------------------*/
1596       
1597       /* time series graph */
1598       
1599       /* xpixels=(69.5-15.5)/100*1400 ypixels=(34-1)/100*700 */
52                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1600       goptions xpixels=756 ypixels=231;

NOTE: There were 55 observations read from the data set WORK.ANNO_TABLE_RECOVERED.
NOTE: PROCEDURE GSLIDE used (Total process time):
      real time           0.09 seconds
      cpu time            0.07 seconds
      

1601       proc sql noprint;
1602       create table summarized_series as
1603       select unique snapshot, sum(confirmed) as confirmed
1604       from confirmed_data
1605       group by snapshot
1606       order by snapshot;
NOTE: Table WORK.SUMMARIZED_SERIES created, with 84 rows and 2 columns.

1607       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1607     !       run;
1608       data summarized_series; set summarized_series;
1609       length html $300;
1610       html='title='||quote(
1611        trim(left(put(snapshot,weekdate30.)))||'0d'x||
1612        trim(left(put(confirmed,comma12.0)))||' confirmed cases'
1613        );
1614       run;

NOTE: There were 84 observations read from the data set WORK.SUMMARIZED_SERIES.
NOTE: The data set WORK.SUMMARIZED_SERIES has 84 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1615       /*
1616       There seems to be a bug in gplot mouseover text, when used in greplay in this way.
1617       Therefore I'm annotating 'invisible' circles around the gplot markers,
1618       with the html mouse-over on the annotated circles.
1619       */
1620       data anno_mouseover; set summarized_series;
1621       length function $8 color $12 style $35;
1622       xsys='2'; ysys='2'; hsys='3'; when='b';
1623       x=snapshot; y=confirmed;
1624       function='pie'; style='pempty'; size=3; rotate=360; color='gray22';
1625       html=trim(left(html))||' href='||quote('#newbar');
1626       run;
53                                                   The SAS System                       07:20 Wednesday, April 15, 2020


NOTE: There were 84 observations read from the data set WORK.SUMMARIZED_SERIES.
NOTE: The data set WORK.ANNO_MOUSEOVER has 84 observations and 14 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1627       proc sql noprint;
1628       select min(snapshot) format=date9. into :mindate from summarized_series;
1629       select max(snapshot) format=date9. into :maxdate from summarized_series;
1630       select max(snapshot)-min(snapshot) into :byval from summarized_series;
1631       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1631     !       run;
1632       axis1 value=(c=graycc h=11pt) label=none minor=none offset=(0,0);
1633       axis2 label=none order=("&mindate"d to "&maxdate"d by &byval)
1634        major=(height=8pt) value=(c=graycc h=11pt font='albany amt')
1635        offset=(1,2);
1636       legend1 value=(c=graycc font="albany amt/bold" h=11pt) shape=symbol(4pct,4pct)
1637        label=(position=top font="albany amt/bold" h=11pt c=graycc "Total Confirmed Cases")
1638        position=(top left inside) mode=share across=1 repeat=2 offset=(3pct, -8pct);
1639       symbol1 interpol=sm50 height=8pt width=2 color=red value=square;
1640       title1 h=2pct ' ';
1641       footnote1 h=2pct ' ';
1642       data anno_mouseover; set anno_mouseover anno_gray_background;
1643       run;

NOTE: There were 84 observations read from the data set WORK.ANNO_MOUSEOVER.
NOTE: There were 2 observations read from the data set WORK.ANNO_GRAY_BACKGROUND.
NOTE: The data set WORK.ANNO_MOUSEOVER has 86 observations and 14 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

1644       proc gplot data=summarized_series anno=anno_mouseover;
1645       format confirmed comma12.0;
1646       format snapshot nldate20.;
1647       note move=(15,77) font='albany amt/bold' "Total Confirmed Cases Worldwide";
1648       plot confirmed*snapshot /
1649        vaxis=axis1 haxis=axis2
1650        des='' name="series";
1651       run;

1652       
54                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1653       
1654       /*-------------------------------------------------------------------*/
1655       
1656       /*
1657       turn on display again, and replay all the individual graphs
1658       into a custom greplay template layout.
1659       */
1660       
1661       goptions display;
1662       
1663       %let border=gray44;
1664       goptions xpixels=1400 ypixels=700;

NOTE: There were 84 observations read from the data set WORK.SUMMARIZED_SERIES.
NOTE: There were 86 observations read from the data set WORK.ANNO_MOUSEOVER.
NOTE: PROCEDURE GPLOT used (Total process time):
      real time           0.11 seconds
      cpu time            0.04 seconds
      

1665       proc greplay nofs igout=work.gseg tc=tempcat;
NOTE: Building list of graphs from the catalog.

NOTE: Enter greplay commands or statements.
1666          tdef dash des='COVID-19 Coronavirus Dashboard'
1667          0/ llx=0       lly=0
1668             ulx=0       uly=100
1669             urx=100     ury=100
1670             lrx=100     lry=0
1671          1/ llx=.5      lly=90
1672             ulx=.5      uly=99
1673             urx=99.5    ury=99
1674             lrx=99.5    lry=90
1675             color=&border
1676          2/ llx=.5      lly=75
1677             ulx=.5      uly=89
1678             urx=15      ury=89
1679             lrx=15      lry=75
1680             color=&border
1681          3/ llx=.5      lly=1
1682             ulx=.5      uly=74
1683             urx=15      ury=74
1684             lrx=15      lry=1
1685             color=&border
1686          4/ llx=70      lly=75
1687             ulx=70      uly=89
1688             urx=84.5    ury=89
1689             lrx=84.5    lry=75
1690             color=&border
1691          5/ llx=70      lly=16
55                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1692             ulx=70      uly=74
1693             urx=84.5    ury=74
1694             lrx=84.5    lry=16
1695             color=&border
1696          6/ llx=85      lly=75
1697             ulx=85      uly=89
1698             urx=99.5    ury=89
1699             lrx=99.5    lry=75
1700             color=&border
1701          7/ llx=85      lly=16
1702             ulx=85      uly=74
1703             urx=99.5    ury=74
1704             lrx=99.5    lry=16
1705             color=&border
1706          8/ llx=15.5    lly=35
1707             ulx=15.5    uly=89
1708             urx=69.5    ury=89
1709             lrx=69.5    lry=35
1710             color=&border
1711          9/ llx=15.5    lly=1
1712             ulx=15.5    uly=34
1713             urx=69.5    ury=34
1714             lrx=69.5    lry=1
1715             color=&border
1716         10/ llx=70      lly=1
1717             ulx=70      uly=15
1718             urx=99.5    ury=15
1719             lrx=99.5    lry=1
1720             color=&border
1721          ;
1722          template dash;
1723          treplay
1724           9:series
1725           0:back
1726           1:title
1727           2:confsum
1728           3:conftab
1729           4:incsum
1730           5:incrtab
1731           6:deadsum
1732           7:deadtab
1733       /*
1734           7:recotab
1735       */
1736           8:map
1737          10:info
1738           des='' name="&name";
NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of this session.
NOTE: Foreground color BLACK same as background. Part of your graph might not be visible.
NOTE: 166132 bytes written to U:\web\democd103\coronavirus_covid19_dashboard.png.
56                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1739       run;

1740       
1741       /* -------------------------------------------------------------------- */
1742       
1743       ods graphics /
1744        noscale /* if you don't use this option, the text will be resized */
1745        imagemap tipmax=2500
1746        imagefmt=png
1747        width=800px height=600px
1748        noborder;
1749       
1750       /* -------------------------------------------------------------------- */
1751       
1752       /*
1753       Create the bar chart, below the dashboard.
1754       */
1755       

NOTE: PROCEDURE GREPLAY used (Total process time):
      real time           0.75 seconds
      cpu time            0.48 seconds
      

1756       proc sql noprint;
1757       
1758       create table bar_confirmed as
1759       select unique snapshot, 'Confirmed' as type, sum(confirmed) as cumulative_cases
1760       from confirmed_data
1761       group by snapshot
1762       order by snapshot;
NOTE: Table WORK.BAR_CONFIRMED created, with 84 rows and 3 columns.

1763       
1764       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1764     !       run;
1765       
1766       data bar_confirmed; set bar_confirmed;
1767       on_this_day=cumulative_cases-lag(cumulative_cases);
1768       run;

NOTE: Missing values were generated as a result of performing an operation on missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      1 at 1767:29   
NOTE: There were 84 observations read from the data set WORK.BAR_CONFIRMED.
57                                                   The SAS System                       07:20 Wednesday, April 15, 2020

NOTE: The data set WORK.BAR_CONFIRMED has 84 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1769       
1770       ods html anchor="newbar";
1771       ods graphics / imagename="coronavirus_covid19_newbar";
1772       
1773       title1 h=18pt font='albany amt/bold' c=gray33 "COVID-19 Coronavirus - Number of new confirmed cases each day";
1774       title2 h=4pt ' ';
1775       
1776       ods graphics / width=900px height=600px;
1777       
1778       proc sgplot data=bar_confirmed noborder;
1779       /*
1780       format snapshot nldate20.;
1781       */
1782       format snapshot nldate20.;
1783       format on_this_day comma10.0;
1784       label on_this_day='Cases on this day';
1785       vbarparm category=snapshot response=on_this_day /
1786        fillattrs=(color=orange)
1787        outlineattrs=(color=gray77)
1788        tip=(snapshot on_this_day)
1789        tipformat=(weekdate30. auto auto)
1790        ;
1791       yaxis display=(nolabel noline noticks)
1792        grid gridattrs=(pattern=dot color=gray88)
1793        valueattrs=(color=gray33 size=10pt)
1794       /* thresholdmax=1 */
1795        ;
1796       xaxis display=(nolabel)
1797        type=time values=("&mindate"d to "&maxdate"d by &byval)
1798        valueattrs=(color=gray33 size=10pt);
1799       run;

NOTE: PROCEDURE SGPLOT used (Total process time):
      real time           7.80 seconds
      cpu time            0.07 seconds
      
NOTE: There were 84 observations read from the data set WORK.BAR_CONFIRMED.

1800       
1801       
1802       /* -------------------------------------------------------------------- */
1803       
1804       /*
1805       Create drilldown graphs for each country.
58                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1806       We will jump to these graphs using html 'anchors' (by the name of the country)
1807       */
1808       
1809       proc sql noprint;
1810       
1811       create table graph_confirmed as
1812       select unique country_region, snapshot, sum(confirmed) as confirmed
1813       from confirmed_data
1814       group by country_region, snapshot
1815       order by country_region, snapshot;
NOTE: Table WORK.GRAPH_CONFIRMED created, with 16044 rows and 3 columns.

1816       
1817       create table graph_recovered as
1818       select unique country_region, snapshot, sum(recovered) as recovered
1819       from recovered_data
1820       group by country_region, snapshot
1821       order by country_region, snapshot;
NOTE: Table WORK.GRAPH_RECOVERED created, with 16044 rows and 3 columns.

1822       
1823       create table graph_deaths as
1824       select unique country_region, snapshot, sum(deaths) as deaths
1825       from death_data
1826       group by country_region, snapshot
1827       order by country_region, snapshot;
NOTE: Table WORK.GRAPH_DEATHS created, with 16044 rows and 3 columns.

1828       
1829       
1830       create table graph_all as
1831       select unique graph_confirmed.*, graph_recovered.recovered
1832       from graph_confirmed left join graph_recovered
1833       on (graph_confirmed.country_region=graph_recovered.country_region) and
1833     ! (graph_confirmed.snapshot=graph_recovered.snapshot);
NOTE: Table WORK.GRAPH_ALL created, with 16044 rows and 4 columns.

1834       
1835       create table graph_all as
1836       select unique graph_all.*, graph_deaths.deaths
1837       from graph_all left join graph_deaths
1838       on (graph_all.country_region=graph_deaths.country_region) and (graph_all.snapshot=graph_deaths.snapshot);
WARNING: This CREATE TABLE statement recursively references the target table. A consequence of this is a possible data 
         integrity problem.
NOTE: Table WORK.GRAPH_ALL created, with 16044 rows and 5 columns.

1839       
1840       quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.10 seconds
59                                                   The SAS System                       07:20 Wednesday, April 15, 2020

      cpu time            0.07 seconds
      

1840     !       run;
1841       
1842       data graph_all; set graph_all;
1843       if country_region='United Arab Emirates' then country_region='UAE';
1844       if country_region='Iran (Islamic Republic of)' then country_region='Iran';
1845       run;

NOTE: There were 16044 observations read from the data set WORK.GRAPH_ALL.
NOTE: The data set WORK.GRAPH_ALL has 16044 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1846       
1847       proc sort data=graph_all out=graph_all;
1848       by country_region snapshot;
1849       run;

NOTE: There were 16044 observations read from the data set WORK.GRAPH_ALL.
NOTE: The data set WORK.GRAPH_ALL has 16044 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

1850       
1851       ods html anchor="#byval(country_region)";
1852       ods graphics / imagename="coronavirus_covid19_#byval(country_region)";
1853       
1854       options nobyline;
1855       title1 h=18pt font='albany amt/bold' c=gray33 "COVID-19 Coronavirus cases in: #byval(country_region)";
1856       title2 h=4pt ' ';
1857       
1858       ods graphics / width=800px height=600px;
1859       proc sgplot data=graph_all noborder;
1860       by country_region;
1861       /*
1862       format snapshot nldate.;
1863       */
1864       format snapshot weekdate30.;
1865       format confirmed recovered deaths comma10.0;
1866       series y=confirmed x=snapshot / name='confirmed'
1867        lineattrs=(color=red thickness=2px)
1868        markers markerattrs=(color=red symbol=square);
1869       series y=deaths x=snapshot / name='deaths'
1870        lineattrs=(color=gray77 thickness=2px)
60                                                   The SAS System                       07:20 Wednesday, April 15, 2020

1871        markers markerattrs=(color=gray77 symbol=circle);
1872       keylegend 'confirmed' 'recovered' 'deaths' /
1873        location=inside position=topleft opaque border
1874        across=1 outerpad=(left=10pt top=10pt);
1875       yaxis display=(nolabel noline noticks) min=0
1876        integer thresholdmax=1 grid gridattrs=(pattern=dot color=gray88)
1877        valueattrs=(color=gray33 size=10pt);
1878       xaxis display=(nolabel)
1879        type=time values=("&mindate"d to "&maxdate"d by &byval)
1880        valueattrs=(color=gray33 size=10pt);
1881       run;

NOTE: PROCEDURE SGPLOT used (Total process time):
      real time           21.29 seconds
      cpu time            7.61 seconds
      
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: The IMAGENAME option or the output name contains invalid characters. coronavirus_covid19_Bonaire_ Sint 
         Eustatius and Saba will be used as the image name prefix.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: The IMAGENAME option or the output name contains invalid characters. coronavirus_covid19_Congo _Brazzaville_ 
         will be used as the image name prefix.
WARNING: The IMAGENAME option or the output name contains invalid characters. coronavirus_covid19_Congo _Kinshasa_ will 
         be used as the image name prefix.
WARNING: The IMAGENAME option or the output name contains invalid characters. coronavirus_covid19_Cote d_Ivoire will be 
         used as the image name prefix.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: The IMAGENAME option or the output name contains invalid characters. coronavirus_covid19_Korea_ South will be 
         used as the image name prefix.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
61                                                   The SAS System                       07:20 Wednesday, April 15, 2020

WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: The IMAGENAME option or the output name contains invalid characters. coronavirus_covid19_Taiwan_ will be used 
         as the image name prefix.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
WARNING: Y=DEATHS is invalid. The option expects that the column not contain all missing values.
NOTE: There were 16044 observations read from the data set WORK.GRAPH_ALL.

1882       
1883       /* ------------------------------------------------------------------ */
1884       
1885       /* We don't have Hong Kong and Macau in our world map */
1886       /* That's ok - those polygons would be too small to see anyway */
1887       /* They still get a red bubble. */
1888       /*
1889       */
1890       title "country_region names not in the map";
1891       proc print data=not_in_map (where=(country_region not in (
1892        'Monaco'
1893        'Macau'
1894        'Cabo Verde'
1895        'Macao SAR'
1896        'Hong Kong SAR'
1897        'North Ireland'
1898        'San Marino'
1899        'Channel Islands'
1900        'Taipei and environs'
1901        'occupied Palestinian territory'
1902        'Cruise Ship'
1903        'Diamond Princess'
1904        'Republic of the Congo'
1905        'East Timor'
1906        'Timor-Leste'
1907        'West Bank and Gaza'
1908        'MS Zaandam'
1909        'Bonaire, Sint Eustatius and Saba'
1910        )));
1911       run;

NOTE: No observations were selected from data set WORK.NOT_IN_MAP.
62                                                   The SAS System                       07:20 Wednesday, April 15, 2020

NOTE: There were 0 observations read from the data set WORK.NOT_IN_MAP.
      WHERE country_region not in ('Bonaire, Sint Eustatius and Saba', 'Cabo Verde', 'Channel Islands', 'Cruise Ship', 
      'Diamond Princess', 'East Timor', 'Hong Kong SAR', 'MS Zaandam', 'Macao SAR', 'Macau', 'Monaco', 'North Ireland', 
      'Republic of the Congo', 'San Marino', 'Taipei and environs', 'Timor-Leste', 'West Bank and Gaza', 'occupied 
      Palestinian territory');
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      

1912       /*
1913       data foo; set mapsgfk.world_attr (where=(index(idname,'Venezuela')^=0));
1914       run;
1915       proc print data=foo; run;
1916       proc print data=map_data; run;
1917       */
1918       
1919       quit;
1920       ODS HTML CLOSE;
1921       ODS LISTING;
NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           1:11.22
      cpu time            19.85 seconds
      
